resources:
# https://github.com/ljmerza/light-entity-card/releases/latest/
# Updated 11/17/19
#  - url: /local/custom_cards/light-entity-card.js?v=3.1.0
#    type: js
# HACS
  - url: /hacsfiles/light-entity-card/light-entity-card.js
    type: js

#

# https://github.com/kalkih/mini-graph-card/releases/latest
# Updated 11/17/19
#  - url: /local/custom_cards/mini-graph-card-bundle.js?v=0.8.2
#    type: module
# HACS
  - url: /hacsfiles/mini-graph-card/mini-graph-card-bundle.js
    type: module

# https://github.com/kalkih/mini-media-player/releases/latest
# Updated 11/17/19
#  - url: /local/custom_cards/mini-media-player-bundle.js?v=1.old
#    type: module
# HACS
  - url: /hacsfiles/mini-media-player/mini-media-player-bundle.js
    type: module

# https://github.com/nervetattoo/simple-thermostat/releases/latest/
  - url: /hacsfiles/simple-thermostat/simple-thermostat.js
    type: module

# https://github.com/thomasloven/lovelace-slider-entity-row/releases/latest
  - url: /hacsfiles/lovelace-slider-entity-row/slider-entity-row.js
    type: module

# https://github.com/zanna-37/hass-swipe-navigation/releases/latest
  - url: /hacsfiles/hass-swipe-navigation/swipe-navigation.js?v=1.4.0
    type: module

# https://github.com/ofekashery/vertical-stack-in-card
#
#  - url: /community_plugin/vertical-stack-in-card/vertical-stack-in-card.js
#    type: js

# https://github.com/benct/lovelace-multiple-entity-row
  - url: /hacsfiles/lovelace-multiple-entity-row/multiple-entity-row.js
    type: module

# https://github.com/thomasloven/lovelace-auto-entities
#  - url: /local/custom_cards/auto-entities.js?v=106
#    type: module
  - url: /hacsfiles/lovelace-auto-entities/auto-entities.js
    type: module

# https://github.com/thomasloven/lovelace-fold-entity-row
  - url: /hacsfiles/lovelace-fold-entity-row/fold-entity-row.js
    type: module

# https://github.com/thomasloven/lovelace-card-mod
#  - url: /hacsfiles/lovelace-card-mod/card-mod.js?v=315
#    type: module

# https://github.com/custom-cards/stack-in-card
  - url: /hacsfiles/stack-in-card/stack-in-card.js
    type: module

# https://github.com/benct/lovelace-xiaomi-vacuum-card
#  - url: /hacsfiles/lovelace-xiaomi-vacuum-card/xiaomi-vacuum-card.js
#    type: module

# https://github.com/bramkragten/weather-card
#  - url: /hacsfiles/weather-card/weather-card.js
#    type: module

# https://github.com/Yevgenium/weather-chart-card
#  - url: /hacsfiles/weather-chart-card/weather-chart-card.js
#    type: module

# https://github.com/scstraus/lovelace-weather-card-chart
#  - url: /hacsfiles/lovelace-weather-card-chart/weather-card-chart.js
#    type: module

# https://github.com/rianadon/timer-bar-card
  - url: /hacsfiles/timer-bar-card/timer-bar-card.js
    type: module

  - url: /hacsfiles/lovelace-mushroom/mushroom.js
    type: module

  - url: /hacsfiles/lovelace-layout-card/layout-card.js
    type: module

# https://github.com/custom-cards/button-card
  - url: /hacsfiles/button-card/button-card.js
    type: module

  - url: /view_assist/js/view_assist.js
    type: module

  - url: /hacsfiles/decluttering-card/decluttering-card.js?v=1.0.0
    type: module


# https://github.com/ofekashery/vertical-stack-in-card
#type	      string	Required	custom:vertical-stack-in-card
#cards	    list	  Required	List of cards
#title	    string	Optional	Card title
#horizontal	boolean	Optional	Default: false
#styles	    object	Optional	Adds custom CSS directives to child cards
  - url: /hacsfiles/vertical-stack-in-card/vertical-stack-in-card.js
    type: module

# https://github.com/spacerokk/bar-card
  - url: /hacsfiles/bar-card/bar-card.js
    type: module

# https://github.com/nicufarmache/lovelace-big-slider-card/
#  - url: /hacsfiles/lovelace-big-slider-card/big-slider-card.js
#    type: module

# https://github.com/RomRider/apexcharts-card/releases/download/v2.0.4/apexcharts-card.js
  - url: /hacsfiles/apexcharts-card/apexcharts-card.js?v=2.0.4
    type: module

#  - url: /hacsfiles/history-explorer-card/history-explorer-card.js
#    type: module

  - url: /hacsfiles/flipdown-timer-card/flipdown-timer-card.js
    type: module

##### END RESOURCES SECTION #####

swipe_nav:
  wrap: true
  animate: swipe
  swipe_amount: 15
  prevent_default: true
  skip_tabs: 10

apexcharts_card_templates:
  tufte:
    apex_config:
      legend:
        show: false
      grid:
        show: false
      xaxis:
        axisBorder:
          show: false
    all_series_config:
      stroke_width: 1
  temp_hum:
    config_templates: tufte
    header:
      show: true
      show_states: true
      colorize_states: true
    yaxis:
      - id: temp
      - id: hum
        opposite: true

decluttering_templates:
  de_mushroom_entity_color:
    card:
      type: custom:mushroom-template-card
      primary: '[[name]]'
      secondary: ''
      badge_icon: >-
        {% if is_state('[[entity]]','on') %}
        {% set bright = ((state_attr('[[entity]]','brightness') | int / 255) * 100) | round(0) %}
        mdi:circle-slice-{{ ((bright / 12) - (bright / 12) % 1) | round(0) }}
        {% endif %}
      badge_color: '#292929'
      icon: '[[icon]]'
      entity: '[[entity]]'
      icon_color: |-
        {% if is_state('[[entity]]','on') %}
          {{ '#%02x%02x%02x' % state_attr('[[entity]]','rgb_color') }}
        {% else %}
          #44739e
        {% endif %}
      layout: vertical
      double_tap_action:
        action: more-info
      card_mod:
        style: |
          .type-custom-mushroom-template-card {
            padding: 12px 6px 12px 6px;
          }
          ha-card {
            --card-primary-font-weight: normal;
          }
  de_mushroom_entity_dimmer:
    card:
      type: custom:mushroom-template-card
      primary: >-
        {% if is_state('[[entity]]','onn') %}
        {% set bright = ((state_attr('[[entity]]','brightness') | int / 255) * 100) | round(0) %}
        [[name]] ({{ bright }}%)
        {% else %}
        [[name]]
        {% endif %}
      secondary: ''
      badge_icon: >-
        {% if is_state('[[entity]]','on') %}
        {% set bright = ((state_attr('[[entity]]','brightness') | int / 255) * 100) | round(0) %}
        mdi:circle-slice-{{ ((bright / 12) - (bright / 12) % 1) | round(0) }}
        {% endif %}
      badge_color: '#292929'
      icon: '[[icon]]'
      entity: '[[entity]]'
      icon_color: '{{ ''#ffc107'' if is_state(''[[entity]]'', ''on'') else ''#44739e'' }}'
      layout: vertical
      double_tap_action:
        action: more-info
      card_mod:
        style: |
          .type-custom-mushroom-template-card {
            padding: 12px 6px 12px 6px;
          }
          ha-card {
            --card-primary-font-weight: normal;
          }
  de_mushroom_entity:
    card:
      type: custom:mushroom-template-card
      primary: '[[name]]'
      secondary: ''
      icon: '[[icon]]'
      entity: '[[entity]]'
      icon_color: '{{ ''amber'' if is_state(''[[entity]]'', ''on'') else ''#44739e'' }}'
      layout: vertical
      tap_action:
        action: >-
          {% if 'sensor' in [[entity]] %}
            more-info
          {% else %}
            toggle
          {% endif %}
      double_tap_action:
        action: more-info
      card_mod:
        style: |
          .type-custom-mushroom-template-card {
            padding: 12px 6px 12px 6px;
          }
          ha-card {
            --card-primary-font-weight: normal;
          }
          mushroom-shape-icon {
            --shape-color: transparent !important;
          }
  de_mushroom_entity_picture:
    card:
      type: custom:mushroom-entity-card
      entity: '[[entity]]'
      icon_type: entity-picture
      layout: vertical
      name: ' '
      primary_info: state
      fill_container: false
      secondary_info: ''
      card_mod:
        style: |
          .type-custom-mushroom-template-card {
            padding: 12px 6px 12px 6px;
          }
          ha-card {
            padding: 12px 2px !important;
          }
          :host {
            --mush-card-primary-font-weight: normal;
          }
  de_mushroom_light_slider_color:
    card:
      type: custom:stack-in-card
      mode: horizontal
      cards:
        - type: custom:mushroom-template-card
          card_mod:
            style: |
              ha-card {
                padding-top: 8px !important;
                padding-bottom: 8px !important;
              }
          primary: '[[name]]'
          secondary: >-
            {% if is_state('[[entity]]','on') %}
            {{ ((state_attr('[[entity]]','brightness')|int) / 255 * 100
            ) | int }}%
            {% endif %}
            {% if is_state('[[entity]]','on') and (state_attr('[[entity]]','effect') != none and state_attr('[[entity]]','effect') != 'Mode Color')%}
             [{{ state_attr('[[entity]]','effect') }}]
            {% else %}
            {% endif %}
          icon: '[[icon]]'
          entity: '[[entity]]'
          tap_action:
            action: call-service
            service: ensure.toggle
            data:
              entity_id: '[[entity]]'
          hold_action:
            action: more-info
          double_tap_action:
            action: none
          icon_color: |-
            {% if is_state('[[entity]]','on') %}
              {{ '#%02x%02x%02x' % state_attr('[[entity]]','rgb_color') }}
            {% else %}
              #44739e
            {% endif %}
        - type: custom:mushroom-light-card
          card_mod:
            style: |
              ha-card {
                padding-top: 8px !important;
                padding-bottom: 8px !important;
              }
          entity: '[[entity]]'
          fill_container: false
          icon_type: none
          show_brightness_control: true
          name: ' '
          secondary_info: none
          primary_info: none
          show_color_control: true
          show_color_temp_control: true
          use_light_color: true
          collapsible_controls: true

  de_mushroom_light_slider:
    card:
      type: custom:stack-in-card
      mode: horizontal
      cards:
        - type: custom:mushroom-template-card
          primary: '[[name]]'
          secondary: >-
            {% if is_state('[[entity]]','on') %} {{
            ((state_attr('[[entity]]','brightness')|int) / 255 * 100 ) |
            int }}% {% endif %}
          icon: '[[icon]]'
          entity: '[[entity]]'
          tap_action:
            action: call-service
            service: ensure.toggle
            data:
              entity_id: '[[entity]]'
          hold_action:
            action: none
          double_tap_action:
            action: none
          icon_color: '{{ ''#FFC107'' if is_state(''[[entity]]'',''on'') else ''#44739e'' }}'
          card_mod:
            style: |
              ha-card { border: none !important;
                        padding-top: 9px !important;
                        padding-bottom: 9px !important;
                      }
        - type: custom:mushroom-light-card
          entity: '[[entity]]'
          fill_container: false
          icon_type: none
          show_brightness_control: true
          name: ' '
          primary_info: none
          show_color_control: false
          use_light_color: false
          show_color_temp_control: false
          collapsible_controls: true
          secondary_info: none
          card_mod:
            style: |
              ha-card { border: none !important;
                        padding-top: 9px !important;
                        padding-bottom: 9px !important;
                        --main-color: #FDC107;
                      }
              mushroom-light-brightness-control {
                --slider-color: #FDC107 !important;
              }
              mushroom-light-card { margin-top: -2px; margin-bottom: -2px; }

## END DE-CLUTTERING TEMPLATES ##

views:
  - title: main
    icon: mdi:home-heart
    columns: 2
    cards:
### PEOPLE / ALARM CARD ###
    - type: vertical-stack
      cards:
      - type: custom:vertical-stack-in-card
        horizontal: true
        card_mod:
          style: |
            ha-card { margin-bottom: -15px; }
            .type-custom-mushroom-entity-card { padding: 12px 6px 12px 6px; }
        cards:
          - type: custom:decluttering-card
            template: de_mushroom_entity_picture
            variables:
              - entity: sensor.google_maps_mark
          - type: custom:decluttering-card
            template: de_mushroom_entity_picture
            variables:
              - entity: sensor.google_maps_amber
          - type: custom:decluttering-card
            template: de_mushroom_entity_picture
            variables:
              - entity: sensor.google_maps_aubrey
          - type: custom:decluttering-card
            template: de_mushroom_entity_picture
            variables:
              - entity: sensor.google_maps_jonas
#          - type: custom:decluttering-card
#            template: de_mushroom_entity_picture
#            variables:
#              - entity: sensor.google_maps_volvo
          - type: custom:decluttering-card
            template: de_mushroom_entity_picture
            variables:
              - entity: sensor.google_maps_bmwx7
#          - type: custom:mushroom-template-card
#            primary: >-
#              {{ (states('sensor.david_ln_sensors_illuminance') | int / 1000) | round(1) }}k
#            secondary: ''
#            icon: mdi:brightness-5
#            entity: sensor.alarm_dot_com_sensor_home
#            icon_color: '#44739e'
#            layout: vertical
#            badge_icon: ''
#            picture: ''
#            tap_action:
#              action: more-info
#            card_mod:
#              style: |
#                :host {
#                  --mush-card-primary-font-weight: normal;
#                }
#                mushroom-shape-icon {
#                  --shape-color: transparent !important;
#                }
#                mushroom-state-info {
#                  margin-top: 1px;
#                }
#                ha-card { padding-left: 2px !important; padding-right: 2px !important; }

#          - type: custom:decluttering-card
#            template: de_mushroom_entity_picture
#            variables:
#              - entity: sensor.tile_tracker_porsche

          - type: custom:decluttering-card
            template: de_mushroom_entity_picture
            variables:
              - entity: sensor.findmy_volvo

#          - type: custom:decluttering-card
#            template: de_mushroom_entity
#            variables:
#              - entity: sensor.unifi_g5_turret_ultra_black
#              - name: "{{ states('sensor.unifi_g5_turret_ultra_black').lower() }} %"
#              - icon: mdi:webcam
      - type: custom:vertical-stack-in-card
        horizontal: true
        card_mod:
          style: |
            ha-card { margin-bottom: 0px; margin-top: -10px }
        cards:
          - type: custom:mushroom-entity-card
            entity: sensor.battery_mark_phone
            layout: vertical
            name: ' '
            primary_info: state
            fill_container: false
            secondary_info: none
            icon_color: '#44739e'
            card_mod:
              style: |
                :host {
                  --mush-card-primary-font-weight: normal;
                }
                mushroom-shape-icon {
                  --shape-color: transparent !important;
                }
                mushroom-state-info {
                  margin-top: -5px;
                }
                ha-card { padding-left: 2px !important; padding-right: 2px !important; }
          - type: custom:mushroom-entity-card
            entity: sensor.battery_amber_phone
            layout: vertical
            name: ' '
            primary_info: state
            fill_container: false
            secondary_info: none
            icon_color: '#44739e'
            card_mod:
              style: |
                :host {
                  --mush-card-primary-font-weight: normal;
                }
                mushroom-shape-icon {
                  --shape-color: transparent !important;
                }
                mushroom-state-info {
                  margin-top: -5px;
                }
                ha-card { padding-left: 2px !important; padding-right: 2px !important; }
          - type: custom:mushroom-entity-card
            entity: sensor.battery_aubrey_iphone
            layout: vertical
            name: ' '
            primary_info: state
            fill_container: false
            secondary_info: none
            icon_color: '#44739e'
            card_mod:
              style: |
                :host {
                  --mush-card-primary-font-weight: normal;
                }
                mushroom-shape-icon {
                  --shape-color: transparent !important;
                }
                mushroom-state-info {
                  margin-top: -5px;
                }
                ha-card { padding-left: 2px !important; padding-right: 2px !important; }
          - type: custom:mushroom-entity-card
            entity: sensor.battery_jonas_phone
            layout: vertical
            name: ' '
            primary_info: state
            fill_container: false
            secondary_info: none
            icon_color: '#44739e'
            card_mod:
              style: |
                :host {
                  --mush-card-primary-font-weight: normal;
                }
                mushroom-shape-icon {
                  --shape-color: transparent !important;
                }
                mushroom-state-info {
                  margin-top: -5px;
                }
                ha-card { padding-left: 2px !important; padding-right: 2px !important; }

          - type: custom:mushroom-template-card
            primary: >-
              {% if states('sensor.alarm_dot_com_sensor_home') == 'disarmed' %}
                off
              {% else %}
                {{ states('sensor.alarm_dot_com_sensor_home') }}
              {% endif %}
            secondary: ''
            icon: mdi:shield-home
            entity: sensor.alarm_dot_com_sensor_home
            icon_color: |
              {% if is_state('alarm_control_panel.home', 'armed_away') %}
                red
              {% elif is_state('alarm_control_panel.home', 'armed_home') %}
                amber
              {% else %}
                #44739e
              {% endif %}
            layout: vertical
            badge_icon: ''
            picture: ''
            tap_action:
              action: none
            double_tap_action:
              action: none
            hold_action:
              action: call-service
              service: script.set_home_alarm_click_ui
              data: {}
              target: {}
            card_mod:
              style: |
                :host {
                  --mush-card-primary-font-weight: normal;
                }
                mushroom-shape-icon {
                  --shape-color: transparent !important;
                }
                mushroom-state-info {
                  margin-top: -5px;
                }
                ha-card { padding-left: 2px !important; padding-right: 2px !important; }
          - type: custom:mushroom-template-card
            primary: '{{ states(''switch.adguard_home_protection'') }}'
            secondary: ''
            icon: |
              {% if is_state('switch.adguard_home_protection', 'on') %}
                mdi:shield-check
              {% else %}
                mdi:advertisements
              {% endif %}
            entity: switch.adguard_home_protection
            icon_color: |-
              {% if is_state('switch.adguard_home_protection', 'on') %}
                #25952d
              {% else %}
                red
              {% endif %}
            layout: vertical
            badge_icon: >-
              {% if is_state('switch.adguard_home_protection','off') %}  {% set remain =
              ((as_timestamp(state_attr('timer.adguard_protection','finishes_at')) -
              now().timestamp())/60)|round(1) %} mdi:circle-slice-{{ ((remain / 7.1)
              - (remain / 7.1) % 1) | round(0) }} {% else %} {% endif %}
            picture: ''
            tap_action:
              action: call-service
              service: ensure.toggle
              data:
                entity_id: switch.adguard_home_protection
            multiline_secondary: false
            badge_color: '#292929'
            card_mod:
              style: |
                :host {
                  --mush-card-primary-font-weight: normal;
                }
                mushroom-shape-icon {
                  --shape-color: transparent !important;
                }
                mushroom-state-info {
                  margin-top: -5px;
                }
                ha-card { padding-left: 2px !important; padding-right: 2px !important; }

#      - type: glance
#        show_name: false
#        columns: 6
#        style: |
#          ha-card {
#            margin-bottom: -4px;
#          }
#        entities:
#          - entity: sensor.google_maps_mark
#            name: Mark
#          - entity: sensor.google_maps_amber
#            name: Amber
#          - entity: sensor.google_maps_aubrey
#            name: Aubrey
#          - entity: sensor.google_maps_jonas
#            name: Jonas
#
#          - entity: sensor.google_maps_volvo
#            name: XC90
#            tap_action:
#              action: call-service
#              service: script.turn_on
#              service_data:
#                entity_id: script.volvo_turn_on
#          - entity: sensor.tile_tracker_porsche
#            name: GTS

      ## Row 2
#          - entity: sensor.battery_mark_phone
#          - entity: sensor.battery_amber_phone
#          - entity: sensor.battery_aubrey_phone
#          - entity: sensor.battery_jonas_phone
#          - entity: sensor.alarm_dot_com_sensor_work
#            tap_action:
#              action: call-service
#              service: alarm_control_panel.alarm_arm_away
#              service_data:
#                entity_id: alarm_control_panel.work

#          - entity: sensor.alarm_dot_com_sensor_home
#            tap_action:
#              action: call-service
#              service: script.turn_on
#              service_data:
#                entity_id: script.set_home_alarm_click_ui
#          - entity: switch.adguard_home_protection
#            name: Protection
#            tap_action:
#              action: call-service
#              service: script.turn_on
#              service_data:
#                entity_id: script.adguard_home_toggle

#          - entity: binary_sensor.front_gate_sensor_zw
#            name: Front Gate
#            icon: mdi:gate
#            tap_action:
#              action: call-service
#              service: script.turn_on
#              service_data:
#                entity_id: script.front_gate_toggle

## START of CONDITIONAL VERTICAL-STACK

      - type: custom:stack-in-card
        mode: vertical
        card_mod:
          style: |
            ha-card {
              padding-top: 5px !important;
            }
        cards:

          - type: conditional
            conditions:
              - entity: media_player.chromecast_upstairs
                state: 'playing'
              - entity: media_player.kitchen_group
                state_not: 'playing'
            card:
              type: custom:mini-media-player
              card_mod:
                style: |
                  ha-card {
                    margin-top: 0px;
                  }
                  .mmp-player {
                    padding: 12px !important;
                  }
              entity: media_player.chromecast_upstairs
              artwork: cover

          - type: conditional
            conditions:
              - entity: media_player.kitchen_group
                state: 'playing'
            card:
              type: custom:mini-media-player
              card_mod:
                style: |
                  ha-card {
                    margin-bottom: 0px !important;
                    padding-top: 0px !important;
                    padding-bottom: 0px;
                  }
                  .mmp-player {
                    padding: 10px !important;
                  }
              entity: media_player.kitchen_group
              artwork: cover

          - type: conditional
            conditions:
              - entity: binary_sensor.pool_freeze_protection
                state: 'on'
            card:
              type: entities
              card_mod:
                style: |
                  ha-card #states {
                    margin-bottom: -5px !important;
                    padding-top: 0px !important;
                    padding-bottom: 0px;
                  }
              entities:
                - entity: binary_sensor.pool_freeze_protection
                  type: custom:multiple-entity-row
                  name: Pool Freeze Protection
                  icon: hass:snowflake
                  state_color: true
                  show_state: false
                  #secondary_info: last-changed
                  entities:
                    - entity: sensor.air_temp
                      name: Air Temp
                    - entity: sensor.freeze_protection_on
                      name: Duration

          - type: conditional
            conditions:
              - entity: input_boolean.vacation_mode
                state: "on"
            card:
              type: entities
              card_mod:
                style: |
                  ha-card #states {
                    margin-bottom: -5px !important;
                    padding-top: 1px !important;
                    padding-bottom: 0px;
                  }
              entities:
                - entity: input_boolean.vacation_mode
                  type: custom:multiple-entity-row
                  name: Vacation Mode
                  icon: mdi:umbrella-beach-outline
                  state_color: true
                  show_state: false
                  toggle: true
                  entities:
                    - entity: input_boolean.vacation_mode
                      toggle: false
                      name: ' '
                    - entity: sensor.pretty_time
                      name: DFW Time

          - type: conditional
            conditions:
              - entity: binary_sensor.front_gate_sensor_zw
                state: "on"
            card:
              type: entities
              card_mod:
                style: |
                  ha-card {
                   #margin-top: -5px !important;
                  }
                  ha-card #states {
                    margin-bottom: -5px !important;
                    padding-top: 0px !important;
                    padding-bottom: 0px;
                  }
              entities:
    #            - entity: binary_sensor.front_gate_sensor_zw
    #              name: Front Gatef
    #              icon: mdi:gate
                - entity: switch.front_drive_gate
                  type: custom:multiple-entity-row
                  name: Front Gate
                  state_color: true
                  toggle: false
                  show_state: false
                  entities:
                    - entity: switch.front_drive_gate
                      toggle: true
                      name: false
                      tap_action:
                        action: call-service
                        service: script.turn_on
                        service_data:
                          entity_id: script.front_gate_close
                    - entity: sensor.front_gate_last_open
                      name: Duration

          - type: conditional
            conditions:
              - entity: binary_sensor.front_gate_sensor_zw
                state: "off"
            card:
              type: entities
              card_mod:
                style: |
                  ha-card #states {
                    margin-bottom: -5px !important;
                    padding-top: 0px !important;
                    padding-bottom: 0px;
                  }
              entities:
    #            - entity: binary_sensor.front_gate_sensor_zw
    #              name: Front Gatef
    #              icon: mdi:gate
                - entity: switch.front_drive_gate
                  type: custom:multiple-entity-row
                  name: Front Gate
                  state_color: true
                  toggle: false
                  show_state: false
                  entities:
                    - entity: switch.front_drive_gate
                      toggle: true
                      name: false
                      tap_action:
                        action: call-service
                        service: script.turn_on
                        service_data:
                          entity_id: script.front_gate_open
                    - entity: sensor.front_gate_last_close
                      name: Closed

          - type: conditional
            conditions:
              - entity: input_select.pay_somebody
                state_not: ""
            card:
              type: entities
              card_mod:
                style: |
                  ha-card #states {
                    margin-bottom: -5px !important;
                    padding-top: 0px !important;
                    padding-bottom: 0px;
                  }
                  ha-card {
                    --state-icon-color: #25952d;
                  }
              entities:
                - entity: input_select.pay_somebody
                  icon: mdi:cash-multiple
                  type: custom:multiple-entity-row
                  name: Pay Somebody
                  state_color: false
                  toggle: false
                  show_state: false
                  entities:
                    - entity: input_select.pay_somebody
                      toggle: false
                      name: false

          - type: conditional
            conditions:
              - entity: binary_sensor.jonas_phone_wifi_check
                state: "on"
            card:
              type: entities
              card_mod:
                style: |
                  ha-card #states {
                    margin-bottom: -5px !important;
                    padding-top: 0px !important;
                    padding-bottom: 0px;
                  }
              entities:
                - entity: binary_sensor.jonas_phone_wifi_check
                  type: custom:multiple-entity-row
                  name: Jonas Wifi OFF
                  icon: mdi:wifi-strength-4-alert
                  state_color: false
                  show_state: false

          - type: conditional
            conditions:
              - entity: light.jellyfish_6900_david_ln_front
                state: "on"
            card:
              type: entities
              card_mod:
                style: |
                  ha-card #states {
                    margin-bottom: -5px !important;
                    padding-top: 1px !important;
                    padding-bottom: 0px;
                  }
              entities:
                - entity: light.jellyfish_6900_david_ln_front
                  type: custom:multiple-entity-row
                  name: Jellyfish Lights
                  state_color: true
                  icon: mdi:led-strip-variant
                  show_state: false
                  entities:
                    - entity: sensor.jellyfish_effect_combined
                      name: ' '

          - type: conditional
            conditions:
              - entity: switch.outlet_tempest_weatherflow_hub_zb
                state: "off"
            card:
              type: entities
              card_mod:
                style: |
                  ha-card #states {
                    margin-bottom: -5px !important;
                    padding-top: 1px !important;
                    padding-bottom: 0px;
                  }
              entities:
                - entity: switch.outlet_tempest_weatherflow_hub_zb
                  name: Outlet - Tempest Weatherflow
                  state_color: true
                  icon: mdi:weather-cloudy-alert

          - type: conditional
            conditions:
              - entity: switch.outlet_macmini_pc_zb
                state: "off"
            card:
              type: entities
              card_mod:
                style: |
                  ha-card #states {
                    margin-bottom: -5px !important;
                    padding-top: 1px !important;
                    padding-bottom: 0px;
                  }
              entities:
                - entity: switch.outlet_macmini_pc_zb
                  name: Outlet - MacMini AirTag
                  state_color: true
                  icon: mdi:apple

          - type: conditional
            conditions:
              - entity: switch.outlet_coffee_maker_zb
                state: "off"
              - entity: input_boolean.vacation_mode
                state: "off"
            card:
              type: entities
              card_mod:
                style: |
                  ha-card #states {
                    margin-bottom: -5px !important;
                    padding-top: 1px !important;
                    padding-bottom: 0px;
                  }
              entities:
                - entity: switch.outlet_coffee_maker_zb
                  name: Outlet - Gaggia Coffee Maker
                  state_color: true
                  icon: mdi:coffee-maker-outline

          - type: conditional
            conditions:
              - entity: switch.pump_water_recirc_zb
                state: "off"
              - entity: input_select.weatherflow_brightness_threshold
                state: "above"
              - entity: input_boolean.vacation_mode
                state: "off"
            card:
              type: entities
              card_mod:
                style: |
                  ha-card #states {
                    margin-bottom: -5px !important;
                    padding-top: 1px !important;
                    padding-bottom: 0px;
                  }
              entities:
                - entity: switch.pump_water_recirc_zb
                  name: Outlet - Recirculating Pump
                  state_color: true
                  icon: mdi:pump

          - type: conditional
            conditions:
              - entity: switch.outlet_hubitat_tm
                state: "off"
            card:
              type: entities
              card_mod:
                style: |
                  ha-card #states {
                    margin-bottom: -5px !important;
                    padding-top: 1px !important;
                    padding-bottom: 0px;
                  }
              entities:
                - entity: switch.outlet_hubitat_tm
                  name: Outlet - Hubitat
                  state_color: true
                  icon: mdi:antenna

          - type: conditional
            conditions:
              - entity: binary_sensor.ping_hubitat
                state: "off"
            card:
              type: entities
              card_mod:
                style: |
                  ha-card #states {
                    margin-bottom: -5px !important;
                    padding-top: 1px !important;
                    padding-bottom: 0px;
                  }
              entities:
                - entity: binary_sensor.ping_hubitat
                  type: custom:multiple-entity-row
                  name: Hubitat Ping Status
                  state_color: true
                  toggle: false
                  show_state: false
                  entities:
                    - entity: binary_sensor.ping_hubitat
                      toggle: false
                      name: false
                    - entity: sensor.ping_hubitat_off
                      name: Duration


          - type: conditional
            conditions:
              - entity: switch.light_outside_star_zw
                state: "on"
            card:
              type: entities
              card_mod:
                style: |
                  ha-card #states {
                    margin-bottom: -5px !important;
                    padding-top: 1px !important;
                    padding-bottom: 0px;
                  }
              entities:
                - entity: switch.light_outside_star_zw
                  name: Outside Star
                  state_color: true
                  icon: mdi:star-outline

          - type: conditional
            conditions:
              - entity: cover.garage_door_west_zw
                state: 'open'
            card:
              type: entities
              card_mod:
                style: |
                  ha-card #states {
                    margin-bottom: -5px !important;
                    padding-top: 1px !important;
                    padding-bottom: 0px;
                  }
              entities:
                - entity: switch.garage_door_west
                  type: custom:multiple-entity-row
                  name: Amber Garage
                  state_color: true
                  toggle: false
                  show_state: false
                  entities:
                    - entity: switch.garage_door_west
                      toggle: true
                      name: false
                    - entity: sensor.garage_door_main_last_changed
                      name: Duration

          - type: conditional
            conditions:
              - entity: cover.garage_door_east_zw
                state: 'open'
            card:
              type: entities
              card_mod:
                style: |
                  ha-card #states {
                    margin-bottom: -5px !important;
                    padding-top: 1px !important;
                    padding-bottom: 0px;
                  }
              entities:
                - entity: switch.garage_door_east
                  type: custom:multiple-entity-row
                  name: Mark Garage
                  state_color: true
                  toggle: false
                  show_state: false
                  entities:
                    - entity: switch.garage_door_east
                      toggle: true
                      name: false
                    - entity: sensor.garage_door_east_last_changed
                      name: Duration

          - type: conditional
            conditions:
              - entity: sensor.outside_screens_position
                state: 'open'
            card:
              type: entities
              card_mod:
                style: |
                  ha-card #states {
                    margin-bottom: -5px !important;
                    padding-top: 1px !important;
                    padding-bottom: 0px;
                  }
              entities:
                - entity: cover.outside_fireplace_screen
                  type: custom:multiple-entity-row
                  icon: mdi:window-shutter-open
                  name: Outside Screens
                  state_color: true
                  toggle: false
                  show_state: false
                  entities:
                    - entity: sensor.david_ln_sensors_illuminance
                      name: Brightness
                    - entity: cover.outside_fireplace_screen
                      attribute: current_position
                      name: Fireplace
                      unit: '%'
                    - entity: cover.outside_main_screen
                      attribute: current_position
                      name: Main
                      unit: '%'

          - type: conditional
            conditions:
              - entity: timer.washing_machine_on
                state: 'active'
            card:
              type: entities
              card_mod:
                style: |
                  ha-card #states {
                    margin-bottom: -5px !important;
                    padding-top: 1px !important;
                    padding-bottom: 0px;
                  }
              entities:
                - entity: timer.washing_machine_on
                  type: custom:multiple-entity-row
                  name: Washing Machine
                  state_color: true
                  icon: mdi:washing-machine
                  show_state: false
                  entities:
                    - entity: sensor.washing_machine_time_on
                      name: Duration

          - type: conditional
            conditions:
              - entity: timer.washing_machine_off
                state: 'active'
            card:
              type: entities
              card_mod:
                style: |
                  ha-card #states {
                    margin-bottom: -5px !important;
                    padding-top: 1px !important;
                    padding-bottom: 0px;
                  }
              entities:
                - entity: timer.washing_machine_off
                  type: custom:multiple-entity-row
                  name: Washing Machine
                  state_color: false
                  icon: mdi:washing-machine-off
                  show_state: false
                  entities:
                    - entity: sensor.washing_machine_time_off
                      name: Duration
                      tap_action:
                        action: call-service
                        service: timer.finish
                        service_data:
                          entity_id: timer.washing_machine_off

          - type: conditional
            conditions:
              - entity: timer.dryer_on
                state: 'active'
            card:
              type: entities
              card_mod:
                style: |
                  ha-card #states {
                    margin-bottom: -5px !important;
                    padding-top: 1px !important;
                    padding-bottom: 0px;
                  }
              entities:
                - entity: timer.dryer_on
                  type: custom:multiple-entity-row
                  name: Dryer
                  state_color: true
                  icon: mdi:tumble-dryer
                  show_state: false
                  entities:
                    - entity: sensor.dryer_time_on
                      name: Duration

          - type: conditional
            conditions:
              - entity: timer.dryer_off
                state: 'active'
            card:
              type: entities
              card_mod:
                style: |
                  ha-card #states {
                    margin-bottom: -5px !important;
                    padding-top: 1px !important;
                    padding-bottom: 0px;
                  }
              entities:
                - entity: timer.dryer_off
                  type: custom:multiple-entity-row
                  name: Dryer
                  state_color: false
                  icon: mdi:tumble-dryer-off
                  show_state: false
                  entities:
                    - entity: sensor.dryer_time_off
                      name: Duration
                      tap_action:
                        action: call-service
                        service: timer.finish
                        service_data:
                          entity_id: timer.dryer_off

          - type: conditional
            conditions:
              - entity: binary_sensor.xbox_360
                state: "on"
            card:
              type: entities
              card_mod:
                style: |
                  ha-card #states {
                    margin-bottom: -5px !important;
                    padding-top: 1px !important;
                    padding-bottom: 0px;
                  }
              entities:
                - entity: binary_sensor.xbox_360
                  type: custom:multiple-entity-row
                  name: XBox 360
                  state_color: true
                  icon: mdi:microsoft-xbox
                  show_state: false
                  entities:
                    - entity: sensor.xbox_360_last_on
                      name: Duration



          - type: conditional
            conditions:
              - entity: binary_sensor.xbox_one_s
                state: "onn"
            card:
              type: entities
              card_mod:
                style: |
                  ha-card #states {
                    margin-bottom: -5px !important;
                    padding-top: 1px !important;
                    padding-bottom: 0px;
                  }
              entities:
                - entity: binary_sensor.xbox_one_s
                  type: custom:multiple-entity-row
                  name: XBox One S
                  state_color: true
                  icon: mdi:microsoft-xbox
                  show_state: false
                  entities:
                    - entity: sensor.xbox_one_s_last_on
                      name: Duration

          - type: conditional
            conditions:
              - entity: switch.outlet_octopi_tm
                state: 'on'
            card:
              type: entities
              card_mod:
                style: |
                  ha-card #states {
                    margin-bottom: -5px !important;
                    padding-top: 1px !important;
                    padding-bottom: 0px;
                  }
              entities:
                - entity: switch.outlet_octopi_tm
                  type: custom:multiple-entity-row
                  name: 3D Printer
                  state_color: true
                  icon: mdi:printer-3d
                  show_state: false
                  entities:
#                    - entity: sensor.octoprint_start_time
#                      name: Start Time
                    - entity: sensor.octoprint_time_percent_complete
                      name: 'Progress'
                    - entity: sensor.octoprint_time_printing
                      name: 'Duration'
                    - entity: sensor.octoprint_time_remaining
                      name: 'Remain'
                    - entity: sensor.octoprint_time_end_pretty
                      name: 'Done'
#                    - entity: switch.outlet_octopi_tm
#                      toggle: true
#                      name: ' '


          - type: conditional
            conditions:
              - entity: binary_sensor.peloton
                state: 'on'
            card:
              type: entities
              card_mod:
                style: |
                  ha-card #states {
                    margin-bottom: -5px !important;
                    padding-top: 1px !important;
                    padding-bottom: 0px;
                  }
              entities:
                - entity: binary_sensor.peloton
                  type: custom:multiple-entity-row
                  name: Peloton
                  state_color: true
                  icon: mdi:bike
                  show_state: false
                  entities:
                    - entity: sensor.peloton_last_on
                      name: Duration

          - type: conditional
            conditions:
              - entity: light.esp32_voice_assist_kitchen2_led_strip
                state: 'on'
            card:
              type: entities
              card_mod:
                style: |
                  ha-card #states {
                    margin-bottom: -5px !important;
                    padding-top: 1px !important;
                    padding-bottom: 0px;
                  }
              entities:
                - entity: light.esp32_voice_assist_kitchen2_led_strip
                  type: custom:multiple-entity-row
                  name: Kitchen Jarvis
                  state_color: true
                  icon: mdi:led-strip
                  show_state: false
#                  secondary_info:
#                    attribute: effect
                  entities:
                    - entity: light.esp32_voice_assist_kitchen2_led_strip
                      toggle: true
                      name: ' '
                    - entity: light.esp32_voice_assist_kitchen2_led_strip
                      attribute: effect
                      name: Effect

          - type: conditional
            conditions:
              - entity: switch.fan_attic_zb
                state: 'on'
            card:
              type: entities
              card_mod:
                style: |
                  ha-card #states {
                    margin-bottom: -5px !important;
                    padding-top: 1px !important;
                    padding-bottom: 0px;
                  }
              entities:
                - entity: switch.fan_attic_zb
                  type: custom:multiple-entity-row
                  name: Attic Fan
                  state_color: true
                  icon: mdi:fan
                  show_state: false
#                  secondary_info: last-changed
                  entities:
                    - entity: switch.fan_attic_zb
                      toggle: true
                      name: ' '
                    - entity: sensor.fan_attic_last_on
                      name: Duration


#          - type: conditional
#            conditions:
#              - entity: binary_sensor.pc_predator
#                state: 'on'
#            card:
#              type: entities
#              style: |
#                ha-card #states {
#                  margin-bottom: -5px !important;
#                  padding-top: 1px !important;
#                  padding-bottom: 0px;
#                }
#              entities:
#                - entity: binary_sensor.pc_predator
#                  type: custom:multiple-entity-row
#                  name: Predator PC
#                  state_color: true
#                  icon: mdi:desktop-classic
#                  show_state: false
#                  entities:
#                    - entity: sensor.predator_last_on
#                      name: Duration

          - type: conditional
            conditions:
              - entity: switch.adguard_home_protection
                state: 'off'
            card:
              type: entities
              card_mod:
                style: |
                  ha-card #states {
                    margin-bottom: -5px !important;
                    padding-top: 1px !important;
                    padding-bottom: 0px;
                  }
              entities:
                - entity: switch.adguard_home_protection
                  type: custom:multiple-entity-row
                  name: AdGuard Protection
                  state_color: true
                  show_state: false
                  entities:
                    - entity: switch.adguard_home_protection
                      toggle: true
                      name: false
                    - entity: sensor.adguard_last_off
                      name: Duration

          - type: conditional
            conditions:
              - entity: light.bulb_school_bus_zb
                state: 'on'
            card:
              type: entities
              card_mod:
                style: |
                  ha-card #states {
                    margin-bottom: -5px !important;
                    padding-top: 1px !important;
                    padding-bottom: 0px;
                  }
              entities:
                - entity: light.bulb_school_bus_zb
                  type: custom:multiple-entity-row
                  name: School Bus Light
                  state_color: true
                  icon: mdi:lightbulb
                  show_state: false
#                  secondary_info: last-changed
                  toggle: true
                  entities:
                    - entity: light.bulb_school_bus_zb
                      toggle: true
                      name: ' '
                    - entity: sensor.bulb_school_bus_zb_last_changed
                      name: Duration

          ### AUTO-ENTITIES ###

          - type: conditional
            conditions:
              - entity: binary_sensor.ui_show_device_trackers_home
                state: 'on'
            card:
              type: custom:auto-entities
              show_empty: false
              filter:
                include:
                  - domain: device_tracker
                    state: home
                exclude:
                  - entity_id: 'device_tracker.aubrey_combined'
                  - label: 'UI-DT-Ignore'
              sort:
                method: name
                ignore_case: true
              card:
                type: entities
                card_mod:
                  style: |
                    ha-card #states {
                      margin-top: -5px !important;
                      margin-bottom: -5px !important;
                      padding-top: 0px !important;
                      padding-bottom: 0px;
                    }
                    #states {
                      margin: 0px 0 !important;
                    }
                    #states > * {
                      margin: 5px 0 !important;
                    }
                #title: Unknown Entity(s)
                show_header_toggle: false

          - type: conditional
            conditions:
              - entity: group.alarm_home_all
                state: 'on'
            card:
              type: custom:auto-entities
              show_empty: false
              card:
                type: entities
                card_mod:
                  style: |
                    ha-card #states {
                      margin-bottom: -5px !important;
                      margin-top: -5px !important;
                      padding-top: 0px !important;
                      padding-bottom: 0px;
                    }
                    #states {
                      margin: 0px 0 !important;
                    }
                    #states > * {
                      margin: 5px 0 !important;
                    }
                show_header_toggle: false
              filter:
                include:
                  - domain: binary_sensor
                    state: 'on'
                    entity_id: '*alarm_home_*'
                    options:
                       type: custom:multiple-entity-row
                       toggle: true
                       show_state: false
                       state_color: true
                       entities:
                         - entity: this.entity_id
                           attribute: displayStateText
                           name: 'Status'

          - type: conditional
            conditions:
              - entity: group.sprinklers_all
                state: 'on'
            card:
              type: custom:auto-entities
              show_empty: false
              card:
                type: entities
                card_mod:
                  style: |
                    ha-card { margin: -5px 0 -8px !important;}
                    ha-card #states {
                      margin-bottom: 0px !important;
                      padding-top: 0px !important;
                      padding-bottom: 0px;
                    }
                    #states {
                      margin: 0px 0 !important;
                    }
                    #states > * {
                      margin: 5px 0 !important;
                    }
                show_header_toggle: false
              filter:
                include:
                  - domain: sensor
                    state: 'on'
                    label: 'Sprinkler'
  #                  entity_id: '*rachio_*'
  #                  attributes:
  #                    rgb_color: '! none'
                    options:
                       type: custom:multiple-entity-row
                       toggle: true
                       show_state: false
                       state_color: true
  #                     icon: mdi:sprinkler
                       entities:
                         - entity: this.entity_id
                           attribute: duration
                           name: Duration
                           tap_action:
                             action: call-service
                             service: script.rachio_dynamic_sprinkler_zone_off
                             confirmation:
                               text: OK to Turn Off?

          - type: glance
            show_name: false
            show_state: false
            show_icon: false
            card_mod:
              style: |
                ha-card {
                  height: 0px !important;
                }
            entities:
              - entity: script.do_nothing

        ## END CUSTOM:VERTICAL-STACK-IN-CARD ##

    ## END VERTICAL-STACK ##

#      - type: picture-entity
#        entity: camera.front_door
#        camera_image: camera.front_door


## AUTOMOBILE CARDS

    - type: custom:stack-in-card
      mode: vertical
      cards:
      - type: conditional
        conditions:
        - entity: sensor.xc90_fuel_level_template
          state_not: 'unavailable'
        card:
          type: glance
          title: Volvo XC90
          show_name: false
          columns: 4
          card_mod:
            style: |
              .card-header {
                padding-top: 7px;
                padding-bottom: 7px;
                font-size: 20px;
                margin-bottom: -15px;
              }
              .entity {
                margin-bottom: 0px !important;

              }
              .entities {
                margin-top: -20px;
                padding-bottom: 15px !important;
              }
          entities:
    #          - entity: lock.yv4a22pl3h1186145_door_lock
            - entity: sensor.xc90_doors
              name: Doors
              tap_action:
                action: call-service
                service: script.turn_on
                service_data:
                  entity_id: script.volvo_lock_toggle
            - entity: binary_sensor.yv4a22pl3h1186145_engine
              icon: mdi:engine-outline
              name: Engine
              tap_action:
                action: call-service
                service: script.turn_on
                service_data:
                  entity_id: script.volvo_turn_on
            - entity: binary_sensor.yv4a22pl3h1186145_windows
              name: Windows
            - entity: sensor.car_wash
              name: Car Wash
              #icon: mdi:water-check-outline
              icon: mdi:car-wash

            - entity: sensor.xc90_fuel_level_template
              name: Fuel
            - entity: sensor.xc90_range_mil
              name: Range
            - entity: sensor.xc90_odometer_mil
              name: Odometer
              icon: mdi:counter

      - type: conditional
        conditions:
        - entity: binary_sensor.x7_m60i_xdrive_door_lock_state
          state_not: 'unavailable'
        card:
          type: glance
          title: BMW X7
          show_name: false
          columns: 5
          card_mod:
            style: |
              ha-card {
                margin-top: -5px;
              }
              .card-header {
                padding-top: 3px;
                padding-bottom: 7px;
                font-size: 20px;
                margin-bottom: -15px;
              }
              .entity {
                margin-bottom: 0px !important;
              }
              .entities {
                margin-top: -20px;
                padding-bottom: 15px !important;
              }
          entities:
    #          - entity: lock.yv4a22pl3h1186145_door_lock
            - entity: sensor.x7_doors
              name: Doors
              tap_action:
                action: call-service
                service: script.turn_on
                service_data:
                  entity_id: script.x7_lock_toggle
            - entity: switch.x7_m60i_xdrive_climate
              icon: mdi:air-conditioner
              name: Climate
              tap_action:
                action: call-service
                service: script.turn_on
                service_data:
                  entity_id: script.x7_turn_on
            - entity: binary_sensor.x7_m60i_xdrive_windows
              name: Windows
              icon: mdi:window-closed
            - entity: binary_sensor.x7_m60i_xdrive_lids
              name: Doors
              icon: mdi:car-door
            - entity: sensor.gas_costco_premium
              name: Costco
              icon: mdi:alpha-c-box-outline
              hold_action:
                action: call-service
                service: homeassistant.reload_config_entry
                service_data:
                  entry_id: 01JR18BJFHTD8WZW0Q765SKVQX

            - entity: sensor.x7_fuel_level_template
              name: Fuel
            - entity: sensor.x7_range_mil
              name: Range
            - entity: sensor.x7_odometer_mil
              name: Odometer
              icon: mdi:counter
            - entity: sensor.car_wash
              name: Car Wash
              #icon: mdi:water-check-outline
              icon: mdi:car-wash
            - entity: sensor.gas_sams_club_premium
              name: Sams
              icon: mdi:alpha-s-box-outline
              hold_action:
                action: call-service
                service: homeassistant.reload_config_entry
                service_data:
                  entry_id: 01JR18B44315CJ7DR5604GG86Z




## END AUTOMOBILE CARDS

    ## Weather Forecast Card
    - type: custom:stack-in-card
      mode: vertical
      cards:
      - type: weather-forecast
        entity: weather.forecast_david_ln
        name: "Colleyville, TX"
        show_forecast: false
        #secondary_info_attribute: extrema
        card_mod:
          style: |
            .header {
              padding-top: 12px !important;
            }
            .content {
              padding-bottom: 12px !important;
            }
      - type: markdown
        card_mod:
          style: |
            .no-header {
              padding: 10px 10px 10px !important;
              text-align: center;
              color: #DADADB;
              font-size: 13px;
              line-height: 18px !important;
              font-family: Roboto;
            }
            ha-card {
              box-shadow: none;
              margin-top: -40px !important;
              margin-bottom: 0px !important;
            }
        content: '<center>{{ states(''sensor.weather_description_colleyville_truncated'') }}</center>'
#        - type: glance
#          columns: 1
#          show_icon: false
#          show_name: false
#          card_mod:
#           style: |
#              ha-card {
#                margin-top: -35px !important;
#                margin-bottom: 5px !important;
#              }
#              .entities {
#                padding-top: 12px !important;
#              }
#          entities:
#            - entity: sensor.weather_description

      ## Weather Current Day Names
      - type: glance
        columns: 6
        show_icon: false
        show_state: false
        card_mod:
          style: |
            ha-card {
              margin-top: -30px !important;
              margin-bottom: -10px !important;
              font-size: 10px;
              color: #9da5b4;
            }
        entities:
#          - entity: sensor.david_ln_sensors_humidity
#            name: Humidity
          - entity: sensor.wind_speed_average
            name: Wind
          - entity: sensor.m99_weather_wind_dir_0d
            name: Direction
          - entity: sensor.m99_weather_precipitation_0d
            name: Precip.
#            - entity: sensor.iqvia_allergy_index_today
#              name: Pollen
          - entity: sensor.m99_weather_hi_low_today
            name: High/Low
          - entity: sensor.weatherflow_outside_feels_like
            name: Feels Like
          - entity: sensor.david_ln_sensors_illuminance
            name: Bright
      ## Weather Current Day Values
      - type: glance
        columns: 6
        show_icon: false
        show_name: false
        card_mod:
          style: |
            ha-card {
              margin-top: -30px !important;
              margin-bottom: -10px !important;
            }
        entities:
#          - entity: sensor.david_ln_sensors_humidity
          - entity: sensor.wind_speed_average
          - entity: sensor.m99_weather_wind_dir_0d
          - entity: sensor.m99_weather_precipitation_0d
#            - entity: sensor.iqvia_allergy_index_today
          - entity: sensor.m99_weather_hi_low_today
          - entity: sensor.weatherflow_outside_feels_like
          - entity: sensor.david_ln_sensors_illuminance_1k

      ## Forecast ##
      ## Weather Days
      - type: glance
        columns: 5
        show_icon: false
        show_name: false
        card_mod:
          style: |
            ha-card {
              margin-top: -5px !important;
              margin-bottom: -10px !important;
              padding-top: -15px;
              border-top: 5px solid #222;
            }
            .entities { padding-top: 10px !important; }
            div {
              /* color: #9da5b4; */
            }
        entities:
          - entity: sensor.m99_weather_date_1d
          - entity: sensor.m99_weather_date_2d
          - entity: sensor.m99_weather_date_3d
          - entity: sensor.m99_weather_date_4d
          - entity: sensor.m99_weather_date_5d
      ## Weather Icons
      - type: glance
        columns: 5
        show_name: false
        show_state: false
        card_mod:
          style: |
            ha-card {
              margin-top: -40px !important;
              margin-bottom: -10px !important;
            }
        entities:
          - entity: sensor.m99_weather_date_1d
          - entity: sensor.m99_weather_date_2d
          - entity: sensor.m99_weather_date_3d
          - entity: sensor.m99_weather_date_4d
          - entity: sensor.m99_weather_date_5d
      ## Weather Both Temp
      - type: glance
        columns: 5
        show_name: false
        show_icon: false
        card_mod:
          style: |
            ha-card {
              margin-top: -38px !important;
              margin-bottom: -10px !important;
            }
            div {
              color: #9da5b4 !important;
              font-size: 14px;
            }
        entities:
          - entity: sensor.m99_weather_temp_both_1d
          - entity: sensor.m99_weather_temp_both_2d
          - entity: sensor.m99_weather_temp_both_3d
          - entity: sensor.m99_weather_temp_both_4d
          - entity: sensor.m99_weather_temp_both_5d
      ## Weather Rain
      - type: glance
        columns: 5
        show_name: false
        show_icon: false
        card_mod:
          style: |
            ha-card {
              margin-top: -32px !important;
              margin-bottom: -15px !important;
            }
            div {
              color: #4c709d !important;
              font-size: 14px;
            }
        entities:
          - entity: sensor.m99_weather_precipitation_1d
          - entity: sensor.m99_weather_precipitation_2d
          - entity: sensor.m99_weather_precipitation_3d
          - entity: sensor.m99_weather_precipitation_4d
          - entity: sensor.m99_weather_precipitation_5d
      ## Weather Wind Both
      - type: glance
        columns: 5
        show_name: false
        show_icon: false
        card_mod:
          style: |
            ha-card {
              margin-top: -29px !important;
              margin-bottom: -25px !important;
            }
            div {
              color: #777 !important;
              font-size: 12px;
            }
        entities:
          - entity: sensor.m99_weather_wind_both_1d
          - entity: sensor.m99_weather_wind_both_2d
          - entity: sensor.m99_weather_wind_both_3d
          - entity: sensor.m99_weather_wind_both_4d
          - entity: sensor.m99_weather_wind_both_5d

## BAR CARD FUTURE WEATHER ##
## USING CONDITIONAL TO CHANGE ICON COLORS ##
## ABOVE ##
      - type: conditional
        conditions:
        - condition: numeric_state
          entity: sensor.m99_weather_temp_low_0d
          above: 87
        card:
          type: custom:bar-card
          card_mod:
            style: |
              ha-card {
                margin-top: 5px;
                margin-bottom: -10px;
                padding-top: 10px;
                border-top: 5px solid #222222;
              }
              bar-card-card {
                margin-right: 0px;
                font-size: 11px;
              }
              bar-card-value {
                color: #222222;
              #  color: #9da5b4;
              }
              bar-card-iconbar {
                width: 20px;
                color: #222222 !important;
                margin-top: 65px;
              }
              bar-card-name {
                margin: 4px 0;
                color: #9da5b4;
                color: #dadadb;
              }
              .value-direction-up {
                #color: #dadadb;
                margin-top: -125px !important;
              }
              bar-card-backgroundbar {
                filter: brightness(.45);
              }
          positions:
            indicator: off
            value: inside
            title: off
            name: outside
            icon: inside
          animation:
            state: on
          direction: up
          height: 100px
          width: 22px
          columns: 12
          stack: horizontal
          min: 10
          max: 110
          entities:
            - sensor.weatherflow_forecast_0
            - sensor.weatherflow_forecast_1
            - sensor.weatherflow_forecast_2
            - sensor.weatherflow_forecast_3
            - sensor.weatherflow_forecast_4
            - sensor.weatherflow_forecast_5
            - sensor.weatherflow_forecast_6
            - sensor.weatherflow_forecast_7
            - sensor.weatherflow_forecast_8
            - sensor.weatherflow_forecast_9
            - sensor.weatherflow_forecast_10
            - sensor.weatherflow_forecast_11
          severity:
          - color: rgb(242,249,255)
            from: -20
            to: 2
          - color: rgb(228,242,254)
            from: 2
            to: 4
          - color: rgb(215,236,254)
            from: 4
            to: 6
          - color: rgb(201,229,253)
            from: 6
            to: 8
          - color: rgb(187,223,253)
            from: 8
            to: 10
          - color: rgb(173,216,252)
            from: 10
            to: 12
          - color: rgb(159,210,252)
            from: 12
            to: 14
          - color: rgb(145,203,251)
            from: 14
            to: 16
          - color: rgb(131,197,250)
            from: 16
            to: 18
          - color: rgb(117,190,249)
            from: 18
            to: 20
          - color: rgb(103,184,248)
            from: 20
            to: 22
          - color: rgb(89,177,247)
            from: 22
            to: 24
          - color: rgb(75,171,246)
            from: 24
            to: 26
          - color: rgb(61,164,245)
            from: 26
            to: 28
          - color: rgb(47,157,244)
            from: 28
            to: 30
          - color: rgb(45,155,239)
            from: 30
            to: 32
          - color: rgb(44,153,234)
            from: 32
            to: 34
          - color: rgb(55,157,224)
            from: 34
            to: 36
          - color: rgb(66,160,215)
            from: 36
            to: 38
          - color: rgb(77,164,205)
            from: 38
            to: 40
          - color: rgb(88,167,196)
            from: 40
            to: 42
          - color: rgb(99,171,186)
            from: 42
            to: 44
          - color: rgb(110,174,177)
            from: 44
            to: 46
          - color: rgb(121,178,168)
            from: 46
            to: 48
          - color: rgb(132,181,159)
            from: 48
            to: 50
          - color: rgb(143,185,150)
            from: 50
            to: 52
          - color: rgb(154,188,141)
            from: 52
            to: 54
          - color: rgb(165,192,132)
            from: 54
            to: 56
          - color: rgb(176,195,123)
            from: 56
            to: 58
          - color: rgb(187,199,114)
            from: 58
            to: 60
          - color: rgb(198,202,105)
            from: 60
            to: 62
          - color: rgb(209,205,96)
            from: 62
            to: 64
          - color: rgb(220,208,87)
            from: 64
            to: 66
          - color: rgb(231,211,78)
            from: 66
            to: 68
          - color: rgb(242,214,69)
            from: 68
            to: 70
          - color: rgb(253,217,60)
            from: 70
            to: 72
          - color: rgb(247,206,58)
            from: 72
            to: 74
          - color: rgb(240,194,55)
            from: 74
            to: 76
          - color: rgb(234,183,53)
            from: 76
            to: 78
          - color: rgb(227,171,50)
            from: 78
            to: 80
          - color: rgb(221,160,48)
            from: 80
            to: 82
          - color: rgb(214,148,45)
            from: 82
            to: 84
          - color: rgb(208,137,43)
            from: 84
            to: 86
          - color: rgb(201,125,40)
            from: 86
            to: 88
          - color: rgb(195,114,38)
            from: 88
            to: 90
          - color: rgb(188,102,35)
            from: 90
            to: 92
          - color: rgb(182,91,33)
            from: 92
            to: 94
          - color: rgb(175,79,30)
            from: 94
            to: 96
          - color: rgb(169,68,28)
            from: 96
            to: 98
          - color: rgb(162,56,25)
            from: 98
            to: 100
          - color: rgb(155,45,23)
            from: 100
            to: 102
          - color: rgb(148,33,20)
            from: 102
            to: 104
          - color: rgb(141,22,18)
            from: 104
            to: 106
          - color: rgb(134,11,15)
            from: 106
            to: 108
          - color: rgb(127,0,12)
            from: 108
            to: 120

## BELOW ##
      - type: conditional
        conditions:
        - condition: numeric_state
          entity: sensor.m99_weather_temp_low_0d
          below: 87.01
        card:
          type: custom:bar-card
          card_mod:
            style: |
              ha-card {
                margin-top: 5px;
                margin-bottom: -10px;
                padding-top: 10px;
                border-top: 5px solid #222222;
              }
              bar-card-card {
                margin-right: 0px;
                font-size: 11px;
              }
              bar-card-value {
                color: #222222;
                color: #9da5b4;
              }
              bar-card-iconbar {
                width: 20px;
                color: #dadadb;
                color: #222 !important;
                margin-top: 65px;
              }
              bar-card-name {
                margin: 4px 0;
                color: #9da5b4;
                color: #dadadb;
              }
              .value-direction-up {
                #color: #dadadb;
                margin-top: -125px !important;
              }
              bar-card-backgroundbar {
                filter: brightness(.45);
              }
          positions:
            indicator: off
            value: inside
            title: off
            name: outside
            icon: inside
          animation:
            state: on
          direction: up
          height: 100px
          width: 22px
          columns: 12
          stack: horizontal
          min: 10
          max: 110
          entities:
            - sensor.weatherflow_forecast_0
            - sensor.weatherflow_forecast_1
            - sensor.weatherflow_forecast_2
            - sensor.weatherflow_forecast_3
            - sensor.weatherflow_forecast_4
            - sensor.weatherflow_forecast_5
            - sensor.weatherflow_forecast_6
            - sensor.weatherflow_forecast_7
            - sensor.weatherflow_forecast_8
            - sensor.weatherflow_forecast_9
            - sensor.weatherflow_forecast_10
            - sensor.weatherflow_forecast_11
          severity:
          - color: rgb(242,249,255)
            from: -20
            to: 2
          - color: rgb(228,242,254)
            from: 2
            to: 4
          - color: rgb(215,236,254)
            from: 4
            to: 6
          - color: rgb(201,229,253)
            from: 6
            to: 8
          - color: rgb(187,223,253)
            from: 8
            to: 10
          - color: rgb(173,216,252)
            from: 10
            to: 12
          - color: rgb(159,210,252)
            from: 12
            to: 14
          - color: rgb(145,203,251)
            from: 14
            to: 16
          - color: rgb(131,197,250)
            from: 16
            to: 18
          - color: rgb(117,190,249)
            from: 18
            to: 20
          - color: rgb(103,184,248)
            from: 20
            to: 22
          - color: rgb(89,177,247)
            from: 22
            to: 24
          - color: rgb(75,171,246)
            from: 24
            to: 26
          - color: rgb(61,164,245)
            from: 26
            to: 28
          - color: rgb(47,157,244)
            from: 28
            to: 30
          - color: rgb(45,155,239)
            from: 30
            to: 32
          - color: rgb(44,153,234)
            from: 32
            to: 34
          - color: rgb(55,157,224)
            from: 34
            to: 36
          - color: rgb(66,160,215)
            from: 36
            to: 38
          - color: rgb(77,164,205)
            from: 38
            to: 40
          - color: rgb(88,167,196)
            from: 40
            to: 42
          - color: rgb(99,171,186)
            from: 42
            to: 44
          - color: rgb(110,174,177)
            from: 44
            to: 46
          - color: rgb(121,178,168)
            from: 46
            to: 48
          - color: rgb(132,181,159)
            from: 48
            to: 50
          - color: rgb(143,185,150)
            from: 50
            to: 52
          - color: rgb(154,188,141)
            from: 52
            to: 54
          - color: rgb(165,192,132)
            from: 54
            to: 56
          - color: rgb(176,195,123)
            from: 56
            to: 58
          - color: rgb(187,199,114)
            from: 58
            to: 60
          - color: rgb(198,202,105)
            from: 60
            to: 62
          - color: rgb(209,205,96)
            from: 62
            to: 64
          - color: rgb(220,208,87)
            from: 64
            to: 66
          - color: rgb(231,211,78)
            from: 66
            to: 68
          - color: rgb(242,214,69)
            from: 68
            to: 70
          - color: rgb(253,217,60)
            from: 70
            to: 72
          - color: rgb(247,206,58)
            from: 72
            to: 74
          - color: rgb(240,194,55)
            from: 74
            to: 76
          - color: rgb(234,183,53)
            from: 76
            to: 78
          - color: rgb(227,171,50)
            from: 78
            to: 80
          - color: rgb(221,160,48)
            from: 80
            to: 82
          - color: rgb(214,148,45)
            from: 82
            to: 84
          - color: rgb(208,137,43)
            from: 84
            to: 86
          - color: rgb(201,125,40)
            from: 86
            to: 88
          - color: rgb(195,114,38)
            from: 88
            to: 90
          - color: rgb(188,102,35)
            from: 90
            to: 92
          - color: rgb(182,91,33)
            from: 92
            to: 94
          - color: rgb(175,79,30)
            from: 94
            to: 96
          - color: rgb(169,68,28)
            from: 96
            to: 98
          - color: rgb(162,56,25)
            from: 98
            to: 100
          - color: rgb(155,45,23)
            from: 100
            to: 102
          - color: rgb(148,33,20)
            from: 102
            to: 104
          - color: rgb(141,22,18)
            from: 104
            to: 106
          - color: rgb(134,11,15)
            from: 106
            to: 108
          - color: rgb(127,0,12)
            from: 108
            to: 120

# BAR CARD FUTURE HOURLY PRECIPITATION

      - type: conditional
        conditions:
        - entity: binary_sensor.weatherflow_forecast_precip_total
          state: 'on'
        card:
          type: custom:bar-card
          card_mod:
            style: |
              ha-card {
                margin-top: -15px;
                margin-bottom: -15px;
                padding-top: 0px;
              }
              bar-card-card {
                margin-right: 0px;
                font-size: 11px;
              }
              bar-card-value {
                color: #222222;
              }
              bar-card-iconbar {
                width: 20px;
                color: #333;
                margin-top: 85px;
              }
              bar-card-name {
                margin: 4px 0;
                color: #9da5b4;
              }
              .value-direction-up {
                color: #dadadb;
                margin-top: -120px;
              }
              bar-card-backgroundbar {
                filter: brightness(.65);
              }
          positions:
            indicator: off
            value: off
            title: off
            name: outside
            icon: off
          animation:
            state: on
          direction: up
          height: 25px
          width: 22px
          columns: 12
          stack: horizontal
          min: 10
          max: 110
          entities:
            - sensor.weatherflow_forecast_precip_0
            - sensor.weatherflow_forecast_precip_1
            - sensor.weatherflow_forecast_precip_2
            - sensor.weatherflow_forecast_precip_3
            - sensor.weatherflow_forecast_precip_4
            - sensor.weatherflow_forecast_precip_5
            - sensor.weatherflow_forecast_precip_6
            - sensor.weatherflow_forecast_precip_7
            - sensor.weatherflow_forecast_precip_8
            - sensor.weatherflow_forecast_precip_9
            - sensor.weatherflow_forecast_precip_10
            - sensor.weatherflow_forecast_precip_11
## END BAR CARD HOURLY FORECAST ##

## Weather Chart Test ##
#        - type: custom:weather-card-chart
#          weather: weather.weatherflow_hourly_based_forecast
#          mode: hourly
#          icons: /local/custom_icons/weather/static/
#          show_main: false
#          show_attributes: false
#          temp1_color: rgba(157, 165, 180, 1.0)
#          style: |
#            ha-card {
#              padding-top: 1px !important;
#              margin-top: 5px !important;
#              margin-bottom: 0px !important;
#              border-top: 5px solid #222;
#
#            }
#            .card {
#              padding-bottom: 5px;
#            }
#            .main {
#              display: none !important;
#            }
#            .attributes {
#              display: none !important;
#            }
## END Weather Chart ##
## Weather Chart NEW ##
#        - type: custom:weather-chart-card
#          entity: weather.weatherflow_hourly_based_forecast
      #  mode: hourly
      #  icons: /local/custom_icons/weather/static/
#          show_main: false
#          show_attributes: false
#          temperature1_color: 'rgba(157, 165, 180, 1.0)'
#          style: |
#            ha-card {
#              padding-top: 1px !important;
#              margin-top: 5px !important;
#              margin-bottom: 0px !important;
#              border-top: 5px solid #222;
#            }
#            .card {
#              padding-bottom: 5px;
#              padding-top: 0px;
#            }
#            .conditions {
#              padding-top: 10px;
#            }
#
  ## END Weather Chart NEW ##

  ## Plant Gauge Cards
#    - type: conditional
#      conditions:
#        - entity: input_boolean.vacation_mode
#          state: 'off'
#      card:
#        type: custom:vertical-stack-in-card
    - type: custom:vertical-stack-in-card
      cards:
        - type: custom:layout-card
          layout_type: custom:grid-layout
          layout:
                grid-template-columns: 25% 25% 25% 25%
                margin: -5px 5px -20px
                padding: 5px 2% 0px 2%
                card_margin: 0px 5% 0px
          cards:
            ## MIFLORA 1 CONDITIONAL START
            - type: conditional
              conditions:
              - entity: sensor.miflora_1_moisture
                state_not: 'unknown'
              card:
                type: gauge
                card_mod:
                  style: |
                    ha-card {
                      vertical-align: middle !important;
                      padding: 5px 8% 0 8% !important;
                    }
                    ha-gauge {
                      max-width: 100px !important;
                    }
                #entity: sensor.miflora_1_moisture_variable
                entity: sensor.miflora_1_moisture
                name: ''
                unit: '%'
                needle: true
                min: 0
                max: 100
                segments:
                  - from: 0
                    color: '#f79a29'
                  - from: 15
                    color: '#41b552'
                  - from: 25
                    color: '#25952d'
                  - from: 50
                    color: '#41b552'
                  - from: 60
                    color: '#f79a29'
            - type: conditional
              conditions:
              - entity: sensor.miflora_1_moisture
                state: 'unknown'
              card:
                type: gauge
                card_mod:
                  style: |
                    ha-card {
                      vertical-align: middle !important;
                      padding: 5px 8% 0 8% !important;
                    }
                    ha-gauge {
                      max-width: 110px !important;
                    }
                entity: sensor.miflora_1_moisture_variable
                #entity: sensor.miflora_1_moisture
                name: ''
                unit: '%'
                needle: true
                min: 0
                max: 100
                segments:
                  - from: 0
                    color: '#f79a29'
                  - from: 15
                    color: '#41b552'
                  - from: 25
                    color: '#25952d'
                  - from: 50
                    color: '#41b552'
                  - from: 60
                    color: '#f79a29'
            ## MIFLORA 1 CONDITIONAL END ##
            ## MIFLORA 2 CONDITIONAL START
            - type: conditional
              conditions:
              - entity: sensor.miflora_2_moisture
                state_not: 'unknown'
              card:
                type: gauge
                card_mod:
                  style: |
                    ha-card {
                      vertical-align: middle !important;
                      padding: 5px 8% 0 8% !important;
                    }
                    ha-gauge {
                      max-width: 100px !important;
                    }
                #entity: sensor.miflora_2_moisture_variable
                entity: sensor.miflora_2_moisture
                name: ''
                unit: '%'
                needle: true
                min: 0
                max: 100
                segments:
                  - from: 0
                    color: '#f79a29'
                  - from: 15
                    color: '#41b552'
                  - from: 25
                    color: '#25952d'
                  - from: 50
                    color: '#41b552'
                  - from: 60
                    color: '#f79a29'
            - type: conditional
              conditions:
              - entity: sensor.miflora_2_moisture
                state: 'unknown'
              card:
                type: gauge
                card_mod:
                  style: |
                    ha-card {
                      vertical-align: middle !important;
                      padding: 5px 8% 0 8% !important;
                    }
                    ha-gauge {
                      max-width: 100px !important;
                    }
                entity: sensor.miflora_2_moisture_variable
                #entity: sensor.miflora_2_moisture
                name: ''
                unit: '%'
                needle: true
                min: 0
                max: 100
                segments:
                  - from: 0
                    color: '#f79a29'
                  - from: 15
                    color: '#41b552'
                  - from: 25
                    color: '#25952d'
                  - from: 50
                    color: '#41b552'
                  - from: 60
                    color: '#f79a29'
            ## MIFLORA 2 CONDITIONAL END ##
            ## MIFLORA 3 CONDITIONAL START
            - type: conditional
              conditions:
              - entity: sensor.miflora_3_moisture
                state_not: 'unknown'
              card:
                type: gauge
                card_mod:
                  style: |
                    ha-card {
                      vertical-align: middle !important;
                      padding: 5px 8% 0 8% !important;
                    }
                    ha-gauge {
                      max-width: 100px !important;
                    }
                #entity: sensor.miflora_3_moisture_variable
                entity: sensor.miflora_3_moisture
                name: ''
                unit: '%'
                needle: true
                min: 0
                max: 100
                segments:
                  - from: 0
                    color: '#f79a29'
                  - from: 15
                    color: '#41b552'
                  - from: 25
                    color: '#25952d'
                  - from: 50
                    color: '#41b552'
                  - from: 60
                    color: '#f79a29'
            - type: conditional
              conditions:
              - entity: sensor.miflora_3_moisture
                state: 'unknown'
              card:
                type: gauge
                card_mod:
                  style: |
                    ha-card {
                      vertical-align: middle !important;
                      padding: 5px 8% 0 8% !important;
                    }
                    ha-gauge {
                      max-width: 100px !important;
                    }
                entity: sensor.miflora_3_moisture_variable
                #entity: sensor.miflora_3_moisture
                name: ''
                unit: '%'
                needle: true
                min: 0
                max: 100
                segments:
                  - from: 0
                    color: '#f79a29'
                  - from: 15
                    color: '#41b552'
                  - from: 25
                    color: '#25952d'
                  - from: 50
                    color: '#41b552'
                  - from: 60
                    color: '#f79a29'
            ## MIFLORA 3 CONDITIONAL END ##
            ## MIFLORA 4 CONDITIONAL START
            - type: conditional
              conditions:
              - entity: sensor.miflora_4_moisture
                state: 'unknownn'
              card:
                type: gauge
                card_mod:
                  style: |
                    ha-card {
                      vertical-align: middle !important;
                      padding: 5px 8% 0 8% !important;
                    }
                    ha-gauge {
                      max-width: 100px !important;
                    }
                #entity: sensor.miflora_4_moisture_variable
                entity: sensor.miflora_4_moisture
                name: ''
                unit: '%'
                needle: true
                min: 0
                max: 100
                segments:
                  - from: 0
                    color: '#f79a29'
                  - from: 15
                    color: '#41b552'
                  - from: 25
                    color: '#25952d'
                  - from: 50
                    color: '#41b552'
                  - from: 60
                    color: '#f79a29'
            - type: conditional
              conditions:
              - entity: sensor.miflora_4_moisture
                state: 'unknownn'
              card:
                type: gauge
                card_mod:
                  style: |
                    ha-card {
                      vertical-align: middle !important;
                      padding: 5px 8% 0 8% !important;
                    }
                    ha-gauge {
                      max-width: 100px !important;
                    }
                entity: sensor.miflora_4_moisture_variable
                #entity: sensor.miflora_4_moisture
                name: ''
                unit: '%'
                needle: true
                min: 0
                max: 100
                segments:
                  - from: 0
                    color: '#f79a29'
                  - from: 15
                    color: '#41b552'
                  - from: 25
                    color: '#25952d'
                  - from: 50
                    color: '#41b552'
                  - from: 60
                    color: '#f79a29'
            ## MIFLORA 4 CONDITIONAL END ##
            ## MIFLORA 5 CONDITIONAL START
            - type: conditional
              conditions:
              - entity: sensor.miflora_5_moisture
                state_not: 'unknown'
              card:
                type: gauge
                card_mod:
                  style: |
                    ha-card {
                      vertical-align: middle !important;
                      padding: 5px 8% 0 8% !important;
                    }
                    ha-gauge {
                      max-width: 100px !important;
                    }
                #entity: sensor.miflora_5_moisture_variable
                entity: sensor.miflora_5_moisture
                name: ''
                unit: '%'
                needle: true
                min: 0
                max: 100
                segments:
                  - from: 0
                    color: '#f79a29'
                  - from: 15
                    color: '#41b552'
                  - from: 25
                    color: '#25952d'
                  - from: 50
                    color: '#41b552'
                  - from: 60
                    color: '#f79a29'
            - type: conditional
              conditions:
              - entity: sensor.miflora_5_moisture
                state: 'unknown'
              card:
                type: gauge
                card_mod:
                  style: |
                    ha-card {
                      vertical-align: middle !important;
                      padding: 5px 8% 0 8% !important;
                    }
                    ha-gauge {
                      max-width: 100px !important;
                    }
                entity: sensor.miflora_5_moisture_variable
                #entity: sensor.miflora_5_moisture
                name: ''
                unit: '%'
                needle: true
                min: 0
                max: 100
                segments:
                  - from: 0
                    color: '#f79a29'
                  - from: 15
                    color: '#41b552'
                  - from: 25
                    color: '#25952d'
                  - from: 50
                    color: '#41b552'
                  - from: 60
                    color: '#f79a29'
            ## MIFLORA 4 CONDITIONAL END ##
        - type: custom:layout-card
          layout_type: custom:grid-layout
          layout:
                grid-template-columns: 25% 25% 25% 25% 25%
                margin: -5px 5px -10px
                padding: 0px 2% 0px 2%
                card_margin: -5px 8% 5px 8%
          cards:
            - type: button
              entity: sensor.miflora_1_moisture
              name: Succulent
              show_name: true
              show_icon: false
              tap_action:
                action: more-info
            - type: button
              entity: sensor.miflora_2_moisture
              name: Palm Tree
              show_name: true
              show_icon: false
              tap_action:
                action: more-info
            - type: button
              entity: sensor.miflora_3_moisture
              name: Sago Palm
              show_name: true
              show_icon: false
              tap_action:
                action: more-info
#            - type: button
#              entity: sensor.miflora_4_moisture
#              name: Rose Bush
#              show_name: true
#              show_icon: false
#              tap_action:
#                action: more-info
            - type: button
              entity: sensor.miflora_5_moisture
#              name: Back Flwrs
              name: Large Pot
              show_name: true
              show_icon: false
              tap_action:
                action: more-info

### START VACUUM CARD ###
    - type: custom:stack-in-card
      title: Deebot T8 Vacuum
      mode: vertical
      card_mod:
        style: |
          .card-header {
            padding-top: 7px !important;
            padding-bottom: 2px !important;
            font-size: 20px;
            margin-bottom: -15px !important;
          }
      cards:
      - type: glance
        columns: 5
        show_icon: true
        show_name: false
        card_mod:
          style: |
            ha-card {
              margin-top: -30px !important;
              margin-bottom: -10px !important;
              padding-top: 0px !important;
              #font-size: 10px;
              #color: #9da5b4;
            }
            .entities {
              margin-top: -10px;
            }
        entities:
          - entity: vacuum.deebot_t8
          - entity: sensor.deebot_fan_speed
            name: Fan
          - entity: sensor.battery_deebot_t8
            name: Battery
          - entity: sensor.deebot_main_filter
            name: Filter
          - entity: sensor.deebot_brushes
            name: Brushes
            icon: mdi:broom

      - type: glance
        show_state: false
        show_name: false
        card_mod:
          style: |
            ha-card {
              margin-top: -35px;
              margin-bottom: -20px;
              padding-bottom: 0px;
            }
        columns: 8
        entities:
          - entity: input_boolean.vacuum_all
            icon: mdi:floor-plan
            tap_action:
              action: call-service
              service: input_boolean.turn_on
              service_data:
                entity_id:
                  - input_boolean.vacuum_back_hall
                  - input_boolean.vacuum_front_hall
                  - input_boolean.vacuum_family_room
                  - input_boolean.vacuum_kitchen
                  - input_boolean.vacuum_master_bedroom
                  - input_boolean.vacuum_master_bathroom
          - entity: input_boolean.vacuum_master_bathroom
            icon: mdi:shower-head
            tap_action:
              action: call-service
              service: input_boolean.toggle
              service_data:
                entity_id: input_boolean.vacuum_master_bathroom
          - entity: input_boolean.vacuum_master_bedroom
            icon: mdi:bed-outline
            tap_action:
              action: call-service
              service: input_boolean.toggle
              service_data:
                entity_id: input_boolean.vacuum_master_bedroom
          - entity: input_boolean.vacuum_front_hall
            icon: mdi:table-furniture
            tap_action:
              action: call-service
              service: input_boolean.toggle
              service_data:
                entity_id: input_boolean.vacuum_front_hall
          - entity: input_boolean.vacuum_family_room
            tap_action:
              action: call-service
              service: input_boolean.toggle
              service_data:
                entity_id: input_boolean.vacuum_family_room
          - entity: input_boolean.vacuum_kitchen
            icon: mdi:countertop-outline
            tap_action:
              action: call-service
              service: input_boolean.toggle
              service_data:
                entity_id: input_boolean.vacuum_kitchen
          - entity: input_boolean.vacuum_back_hall
            tap_action:
              action: call-service
              service: input_boolean.toggle
              service_data:
                entity_id: input_boolean.vacuum_back_hall
          - entity: input_boolean.vacuum_all
            icon: mdi:alpha-x-box-outline
            tap_action:
              action: call-service
              service: input_boolean.turn_off
              service_data:
                entity_id:
                  - input_boolean.vacuum_back_hall
                  - input_boolean.vacuum_front_hall
                  - input_boolean.vacuum_family_room
                  - input_boolean.vacuum_kitchen
                  - input_boolean.vacuum_master_bedroom
                  - input_boolean.vacuum_master_bathroom
                  - input_boolean.vacuum_all

      - type: glance
        show_state: false
        show_name: false
        card_mod:
          style: |
            ha-card {
              margin-top: -20px !important;
              margin-bottom: -25px !important;
              padding-top: 0px !important;
              padding-bottom: 0px;
            }
            .entities {
              padding-top: 0px !important;
            }
        columns: 5
        entities:
          - entity: sensor.battery_deebot_t8
            name: Play
            icon: mdi:play-circle-outline
            tap_action:
              action: call-service
              service: script.vacuum_run_manual
          - entity: sensor.battery_deebot_t8
            name: Pause
            icon: mdi:pause-circle-outline
            tap_action:
              action: call-service
              service: vacuum.pause
              service_data:
                entity_id: vacuum.deebot_t8
          - entity: sensor.battery_deebot_t8
            name: Stop
            icon: mdi:stop-circle-outline
            tap_action:
              action: call-service
              service: vacuum.stop
              service_data:
                entity_id: vacuum.deebot_t8
          - entity: sensor.battery_deebot_t8
            name: Locate
            #icon: mdi:map-marker
            icon: mdi:map-marker-circle
            tap_action:
              action: call-service
              service: vacuum.locate
              service_data:
                entity_id: vacuum.deebot_t8
          - entity: sensor.battery_deebot_t8
            name: Return To Base
            #icon: mdi:home-map-marker
            icon: mdi:home-circle-outline
            tap_action:
              action: call-service
              service: vacuum.return_to_base
              service_data:
                entity_id: vacuum.deebot_t8

      - type: glance
        columns: 4
        show_icon: false
        show_name: false
        card_mod:
          style: |
            ha-card {
              margin-top: -15px !important;
              margin-bottom: 0px !important;
              #font-size: 10px;
              #color: #9da5b4;
            }
        entities:
          - entity: sensor.deebot_last_run_text
          #- entity: sensor.deebot_t8_last_docked
          - entity: sensor.house_last_cleaned_pretty
          - entity: sensor.deebot_area_cleaned
          - entity: sensor.deebot_t8_cleaning_duration

### END VACUUUM CARD ###



## START SYSTEM INFO MUSHROOM CARD ##
    - type: vertical-stack
      cards:
      - type: custom:vertical-stack-in-card
        horizontal: true
        card_mod:
          style: |
            ha-card { margin-bottom: -15px; }
            .type-custom-mushroom-entity-card { padding: 12px 6px 12px 6px; }
        cards:
          - type: custom:decluttering-card
            template: de_mushroom_entity
            variables:
              - entity: sensor.processor_use
              - name: "{{ states('sensor.processor_use') }} %"
              - icon: mdi:cpu-64-bit
          - type: custom:decluttering-card
            template: de_mushroom_entity
            variables:
              - entity: sensor.memory_use_percent
              - name: "{{ states('sensor.memory_use_percent') | float | round(1) }} %"
              - icon: mdi:memory
          - type: custom:decluttering-card
            template: de_mushroom_entity
            variables:
              - entity: sensor.disk_use_percent_home
              - name: "{{ states('sensor.disk_use_percent_home') | float | round(1) }} %"
              - icon: mdi:harddisk
          - type: custom:mushroom-template-card
            primary: >-
              {% if states('sensor.watchman_missing_entities') | int(0) == 0 %}
                -
              {% elif states('sensor.watchman_missing_entities') | int(0) == 1 %}
                {{ states('sensor.watchman_missing_entities') }} item
              {% else %}
                {{ states('sensor.watchman_missing_entities') }} items
              {% endif %}
            secondary: ''
            icon: mdi:watch-variant
            entity: sensor.watchman_missing_entities
            icon_color: >-
              {% if states('sensor.watchman_missing_entities') | int(0) == 0 %}
                #44739e
              {% elif states('sensor.watchman_missing_entities') | int(0) <= 5 %}
                amber
              {% elif states('sensor.watchman_missing_entities') | int(0) <= 10 %}
                orange
              {% else %}
                red
              {% endif %}
            layout: vertical
            tap_action:
              action: more-info
            hold_action:
              action: call-service
              service: watchman.report
            card_mod:
              style: |
                .type-custom-mushroom-template-card {
                  padding: 12px 6px 12px 6px;
                }
                ha-card {
                  --card-primary-font-weight: normal;
                }
                mushroom-shape-icon {
                  --shape-color: transparent !important;
                }
          - type: custom:mushroom-template-card
            primary: "{{ states('sensor.hacs_updates_needed') }}"
            secondary: ''
            icon: mdi:store-cog
            entity: sensor.hacs_updates_needed
            icon_color: '{{ ''#44739e'' if is_state(''sensor.hacs_updates_needed'',''-'') else ''amber'' }}'
            layout: vertical
            tap_action:
              action: navigate
              #navigation_path: /hacs/entry
              navigation_path: /hacs/dashboard
            hold_action:
              action: navigate
              navigation_path: /config/dashboard
            card_mod:
              style: |
                .type-custom-mushroom-template-card {
                  padding: 12px 6px 12px 6px;
                }
                ha-card {
                  --card-primary-font-weight: normal;
                }
                mushroom-shape-icon {
                  --shape-color: transparent !important;
                }

      - type: custom:vertical-stack-in-card
        horizontal: true
        card_mod:
          style: |
            ha-card { margin-bottom: 0px; margin-top: -10px }
        cards:
          - type: custom:decluttering-card
            template: de_mushroom_entity
            variables:
              - entity: sensor.uptime_friendly
              - name: "{{ states('sensor.uptime_friendly') }}"
              - icon: mdi:clock
          - type: custom:decluttering-card
            template: de_mushroom_entity
            variables:
              - entity: sensor.network_throughput_k
              - name: "{{ states('sensor.network_throughput_k') }}"
              - icon: mdi:swap-vertical-bold
          - type: custom:decluttering-card
            template: de_mushroom_entity
            variables:
              - entity: sensor.192_168_86_50_core_0_temperature
              - name: "{{ states('sensor.192_168_86_50_core_0_temperature') }} °F"
              - icon: mdi:thermometer
          - type: custom:mushroom-template-card
            primary: >-
              {% if states('sensor.watchman_missing_services') | int(0) == 0 %}
                -
              {% elif states('sensor.watchman_missing_services') | int(0) == 1 %}
                {{ states('sensor.watchman_missing_services') }} item
              {% else %}
                {{ states('sensor.watchman_missing_services') }} items
              {% endif %}
            secondary: ''
            icon: mdi:watch-import-variant
            entity: sensor.watchman_missing_services
            icon_color: >-
              {% if states('sensor.watchman_missing_services') | int(0) == 0 %}
                #44739e
              {% elif states('sensor.watchman_missing_services') | int(0) <= 5 %}
                amber
              {% elif states('sensor.watchman_missing_services') | int(0) <= 10 %}
                orange
              {% else %}
                red
              {% endif %}
            layout: vertical
            tap_action:
              action: more-info
            hold_action:
              action: call-service
              service: watchman.report
            card_mod:
              style: |
                .type-custom-mushroom-template-card {
                  padding: 12px 6px 12px 6px;
                }
                ha-card {
                  --card-primary-font-weight: normal;
                }
                mushroom-shape-icon {
                  --shape-color: transparent !important;
                }
          - type: custom:mushroom-template-card
            primary: "{{ states('sensor.ha_version') }}"
            secondary: ''
            icon: mdi:home-assistant
            icon_color: "{{ '#44739E' if 'blue' in state_attr('sensor.ha_version','entity_picture') else 'amber' }}"
            entity: sensor.ha_version
            layout: vertical
            tap_action:
              action: url
              url_path: https://www.home-assistant.io/latest-release-notes/
            double_tap_action:
              action: more-info
            card_mod:
              style: |
                .type-custom-mushroom-template-card {
                  padding: 12px 6px 12px 6px;
                }
                ha-card {
                  --card-primary-font-weight: normal;
                }
                mushroom-shape-icon {
                  --shape-color: transparent !important;
                }
### END SYSTEM MUSHROOM INFO CARD ##

## NEW SQL Garmin Card ##

    - type: custom:stack-in-card
      mode: vertical
      cards:
        - type: custom:stack-in-card
          mode: horizontal
          cards:
          - type: custom:mushroom-select-card
            entity: input_select.sql_activity_type_filter
            hide_state: true
            hide_icon: true
            name: Activity Type
          - type: custom:mushroom-select-card
            entity: input_select.sql_activity_timeframe_filter
            hide_state: true
            hide_icon: true
            name: Timeframe

        - type: glance
          columns: 5
          show_icon: true
          show_name: false
          card_mod:
            style: |
              ha-card {
                margin-top: -35px !important;
                margin-bottom: 0px !important;
                #font-size: 10px;
                #color: #9da5b4;
              }
          entities:
            - entity: sensor.sql_activity_count
              name: Count
              icon: mdi:pound-box-outline
            - entity: sensor.sql_activity_minutes
              name: Time
              icon: mdi:clock-outline
            - entity: sensor.sql_activity_miles
              name: Dist.
              icon: mdi:map-marker-distance
            - entity: sensor.sql_activity_calories
              name: Cals
              icon: mdi:scale-bathroom
            - entity: sensor.sql_activity_last_activity
              name: Last
              icon: mdi:clock-end


## END NEW SQL GARMIN CARD ##

#      - type: map
      #dark_mode: true
#        default_zoom: 15
#        entities:
#          - device_tracker.google_maps_amber_s
#          - device_tracker.google_maps_mark_schaub
#          - device_tracker.yv4a22pl3h1186145_position
#          - zone.home
#          - zone.work
#          - zone.church


### OUTLETS TAB ###

  - title: Outlets
    icon: mdi:power-socket-us
    cards:
#      - type: custom:vertical-stack-in-card
#        cards:
#        - type: custom:vertical-stack-in-card
#          horizontal: true
#          cards:
#          - type: custom:decluttering-card
#            template: de_mushroom_entity_dimmer
#            variables:
#              - name: 'Kitchen'
#              - entity: light.cans_kitchen_zw
#              - icon: mdi:light-recessed
#          - type: custom:decluttering-card
#            template: de_mushroom_entity_color
#            variables:
#              - name: 'Bus Light'
#              - entity: light.bulb_school_bus_zb
#              - icon: mdi:lightbulb-outline
#          - type: custom:decluttering-card
#            template: de_mushroom_entity_dimmer
#            variables:
#              - name: 'Front Hall'
#              - entity: light.bulb_front_hall_lamp_zb
#              - icon: mdi:lamp
#          - type: custom:decluttering-card
#            template: de_mushroom_entity
#            variables:
#              - name: 'Kitchen Humidifier'
#              - entity: switch.humidifier_kitchen_zb
#              - icon: mdi:air-humidifier
      - type: custom:stack-in-card
        mode: vertical
        cards:
        - type: glance
          show_state: false
          title: Downstairs
          card_mod:
            style:
              $: |
                .card-header {
                  text-align: center !important;
                  padding-bottom: 0px !important;
                  padding-top: 2px !important;
                  margin-bottom: 10px !important;
                  border: 0px solid #292929;
                  color: #777 !important;
                }
                .entity {
                  margin-bottom: 10px !important;
                }
          columns: 4
          entities:
            - entity: switch.family_room_cans_switchtemplate
              name: Fam Cans
              icon: mdi:light-recessed
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.family_room_cans_switchtemplate
            - entity: switch.family_room_chandelier_switchtemplate
              name: Fam Chnd
              icon: mdi:chandelier
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.family_room_chandelier_switchtemplate
            - entity: switch.tree_family_room_zb
              name: Fam Tree
              icon: mdi:tree
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.tree_family_room_zb
            - entity: switch.front_hall_lamp_switchtemplate
              name: Front Hall
              icon: mdi:lamp-outline
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.front_hall_lamp_switchtemplate

#            - entity: script.do_nothing
#              name: ''
#              icon: mdi:blank
#              tap_action: none
#              double_tap_action: none
#              hold_action: none

            - entity: group.trees_master_bedroom
              name: Mstr Trees
              icon: mdi:forest
              tap_action:
                action: call-service
                service: switch.toggle
                data:
                  entity_id: switch.trees_master_bedroom_zw
            - entity: switch.fan_master_bedroom_zw
              name: Mstr Clg
              icon: mdi:ceiling-fan
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.fan_master_bedroom_zw
            - entity: switch.air_purifier_master_bedroom_zb
              name: Mstr Pur
              icon: mdi:air-purifier
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.air_purifier_master_bedroom_zb
            - entity: switch.humidifier_master_bedroom_zb
              name: Mstr Hum
              icon: mdi:air-humidifier
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.humidifier_master_bedroom_zb

        - type: glance
          show_state: false
          card_mod:
            style: |
              ha-card {
                margin-top: -30px;
                margin-bottom: 0px;
              }
            columns: 5
          entities:
            - entity: switch.fan_master_bathroom_zw
              name: Mstr Bath
              icon: mdi:fan
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.fan_master_bathroom_zw
            - entity: switch.fan_master_commode_zw
              name: Mstr Cmd
              icon: mdi:fan
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.fan_master_commode_zw
            - entity: switch.outlet_master_hallway_zb
              name: Mstr Hall
              icon: mdi:square-rounded-outline
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.outlet_master_hallway_zb
            - entity: binary_sensor.roku_tv_master_bedroom_helper
              name: Mstr TV
              icon: mdi:television
              tap_action: none
              double_tap_action: none
              hold_action: none
            - entity: switch.outlet_gracie_water_bowl_zb
              name: Gracie Wtr
              icon: mdi:fountain
              #icon:mdi:water-pump
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.outlet_gracie_water_bowl_zb
            - entity: switch.kitchen_cans_switchtemplate
              name: Kitchen
              icon: mdi:light-recessed
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.kitchen_cans_switchtemplate
#            - entity: light.kitchen_fireplace_led_strip_partitions
#              name: Kit Fire
#              icon: mdi:fireplace
#              tap_action:
#                action: toggle
#              hold_action:
#                action: more-info
            - entity: switch.outlet_kitchen_bug_zapper_zb
              name: Bug Light
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.outlet_kitchen_bug_zapper_zb
            - entity: switch.humidifier_kitchen_zb
              name: Kitchen
              icon: mdi:air-humidifier
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.humidifier_kitchen_zb
            - entity: light.esp32_fireplace_kitchen_led_strip
              name: Kit Fire
              icon: mdi:led-strip-variant
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: light.esp32_fireplace_kitchen_led_strip
              hold_action:
                action: more-info
            - entity: switch.kitchen_chandelier_switchtemplate
              name: Kit Chnd
              icon: mdi:chandelier
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.kitchen_chandelier_switchtemplate

            - entity: switch.lamp_craft_room_zb
              name: Game Rm
              icon: mdi:lamp-outline
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.lamp_craft_room_zb
            - entity: fan.game_room_downstairs
              name: Game Rm
              icon: mdi:fan
            - entity: light.bulb_school_bus_zb
              name: Bus Light
              icon: mdi:lightbulb-outline
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: light.bulb_school_bus_zb
            - entity: switch.fan_pool_bathroom_zw
              name: Pool Bath
              icon: mdi:fan
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.fan_pool_bathroom_zw
            - entity: switch.fan_laundry_room_pc_zb
              name: Laundry Fan
              icon: mdi:fan
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.fan_laundry_room_pc_zb

            - entity: switch.movie_room_cans_switchtemplate
              name: Movie Rm
              icon: mdi:light-recessed
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.movie_room_cans_switchtemplate
            - entity: switch.anthem_av
              name: Anthem
              icon: mdi:audio-video
            - entity: switch.fan_movie_room_vent_zb
              name: Anthem
              icon: mdi:fan
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.fan_movie_room_vent_zb
            - entity: binary_sensor.washing_machine_running
              name: Washer
              icon: mdi:washing-machine
            - entity: binary_sensor.vibration_sensor_dryer_motion
              name: Dryer
              icon: mdi:tumble-dryer

        - type: glance
          show_state: false
          card_mod:
            style: |
              ha-card {
                margin-top: -30px;
                margin-bottom: 0px;
              }
          columns: 5
          entities:
            - entity: sensor.movie_room_blinds
              name: Movie Rm
            - entity: input_text.movie_room_blinds
              name: Open
              icon: mdi:arrow-up-bold-box-outline
              tap_action:
                action: call-service
                service: script.movie_room_blinds_open
            - entity: input_text.movie_room_blinds
              name: Middle
              icon: mdi:format-align-middle
              tap_action:
                action: call-service
                service: script.movie_room_blinds_middle
            - entity: input_text.movie_room_blinds
              name: Close
              icon: mdi:arrow-down-bold-box-outline
              tap_action:
                action: call-service
                service: script.movie_room_blinds_close
            - entity: switch.speakers_downstairs_switchtemplate
              name: Spkrs Dn
              icon: mdi:speaker
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.speakers_downstairs_switchtemplate

### UPSTAIRS
      - type: custom:stack-in-card
        mode: vertical
        cards:
        - type: glance
          title: Upstairs
          show_state: false
          columns: 3
          card_mod:
            style:
              $: |
                .card-header {
                  text-align: center !important;
                  padding-bottom: 0px !important;
                  padding-top: 2px !important;
                  margin-bottom: 10px !important;
                  border: 0px solid #292929;
                  color: #777 !important;
                }
                ha-card {

                }
          entities:
            - entity: switch.humidifier_aubrey_zb
              name: Aubrey
              icon: mdi:air-humidifier
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.humidifier_aubrey_zb
            - entity: switch.fan_aubrey_bathroom_zw
              name: A. Bath
              icon: mdi:fan
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.fan_aubrey_bathroom_zw
#            - entity: fan.aubrey_ceiling_fan
#              name: A. Clg
#              icon: mdi:ceiling-fan
            - entity: switch.tree_aubrey_zb
              name: A. Tree
              icon: mdi:tree
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.tree_aubrey_zb

            - entity: switch.humidifier_jonas_zb
              name: Jonas
              icon: mdi:air-humidifier
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.humidifier_jonas_zb
            - entity: switch.fan_jonas_bathroom_zw
              name: J. Bath
              icon: mdi:fan
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.fan_jonas_bathroom_zw
#            - entity: fan.jonas_ceiling_fan
#              name: J. Clg
#              icon: mdi:ceiling-fan
#            - entity: light.bulb_jonas_lamp_tp
#              name: J. Lamp
#              icon: mdi:lamp-outline
#              tap_action:
#                action: toggle
            - entity: switch.speakers_upstairs_switchtemplate
              name: Spkrs Up
              icon: mdi:speaker
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.speakers_upstairs_switchtemplate

        - type: glance
          show_state: false
          card_mod:
            style: |
              ha-card {
                margin-top: -30px;
                margin-bottom: 0px;
              }
          columns: 3
          entities:
            - entity: switch.fan_home_office_zb
              name: Office Fan
              icon: mdi:fan
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.fan_home_office_zb
            - entity: switch.fan_golf_room_zw
              name: Golf Rm Fan
              icon: mdi:fan
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.fan_golf_room_zw
            - entity: switch.fan_attic_zb
              name: Attic Fan
              icon: mdi:fan
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.fan_attic_zb


### XBOXES
      - type: custom:stack-in-card
        mode: vertical
        cards:
        - type: glance
          title: XBox
          show_state: false
          columns: 4
          card_mod:
            style:
              $: |
                .card-header {
                  text-align: center !important;
                  padding-bottom: 0px !important;
                  padding-top: 2px !important;
                  margin-bottom: 10px !important;
                  border: 0px solid #292929;
                  color: #777 !important;
                }
          entities:
            - entity: binary_sensor.xbox_360
              name: XBox 360
              icon: mdi:microsoft-xbox-controller
            - entity: binary_sensor.xbox_one_s
              name: XBox S
              icon: mdi:microsoft-xbox
            - entity: binary_sensor.ping_xbox_series_x
              name: XBox X
              icon: mdi:microsoft-xbox
            - entity: switch.outlet_xbox_one_s_zb
              name: XBox Sw
              icon: mdi:power-socket-us

### OUTSIDE
      - type: custom:stack-in-card
        mode: vertical
        cards:
        - type: glance
          title: Outside
          show_state: false
          columns: 4
          card_mod:
            style:
              $: |
                .card-header {
                  text-align: center !important;
                  padding-bottom: 0px !important;
                  padding-top: 2px !important;
                  margin-bottom: 10px !important;
                  border: 0px solid #292929;
                  color: #777 !important;
                }
          entities:
            - entity: switch.light_front_porch_zw
              name: Front Walk
              icon: mdi:coach-lamp
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.light_front_porch_zw
#              tap_action:
#                action: call-service
#                service: script.turn_on
#                service_data:
#                  entity_id: script.toggle_front_porch_lights_ui
            - entity: light.front_porch_lights_iot
              name: Front Porch
              icon: mdi:dome-light
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: light.front_porch_lights_iot
            - entity: switch.light_front_house_up_zw
              name: Front House
              icon: mdi:light-flood-up
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.light_front_house_up_zw
#            - entity: switch.front_house_lights_switchtemplate
#              name: Front House
#              icon: mdi:light-flood-up
#              tap_action:
#                action: toggle
            - entity: light.jellyfish_6900_david_ln_front
              name: Jellyfish Lights
              icon: mdi:led-strip-variant
#              tap_action:
#                action: toggle
#              hold_action:
#                action: more-info

            - entity: switch.pump_water_recirc_zb
              name: Recirc
              icon: mdi:pump
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.pump_water_recirc_zb
            - entity: light.cans_outside_zw
              name: Out. Cans
              icon: mdi:light-recessed
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: light.cans_outside_zw
#            - entity: switch.fan_outside_zw
#              name: Out. Fan
#              icon: mdi:ceiling-fan
#              tap_action:
#                action: toggle
            - entity: switch.light_outside_star_zw
              name: Out. Star
              icon: mdi:star-outline
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.light_outside_star_zw
            - entity: switch.trees_outside_north_zb
              name: Back Trees N
              icon: mdi:tree
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.trees_outside_north_zb

            - entity: switch.charger_garage_batteries_1_zb
              name: Charger 1
              icon: mdi:power-socket-us
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.charger_garage_batteries_1_zb
            - entity: switch.charger_garage_batteries_2_zb
              name: Charger 2
              icon: mdi:power-socket-us
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.charger_garage_batteries_2_zb
            - entity: switch.charger_garage_ebike_zb
              name: Chrgr EBike
              icon: mdi:power-socket-us
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.charger_garage_ebike_zb
            - entity: switch.trees_outside_south_zb
              name: Back Trees S
              icon: mdi:tree
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.trees_outside_south_zb


        - type: glance
          show_state: false
          card_mod:
            style: |
              ha-card {
                margin-top: -25px;
              /*  margin-bottom: -10px; */
              }
          columns: 5
          entities:
            - entity: switch.lock_driveway_door
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.lock_driveway_door
            - entity: switch.light_garage_motion_zw
              name: Garage Light
              icon: mdi:wall-sconce-flat-outline
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.light_garage_motion_zw
            - entity: switch.garage_door_west
              name: BMW Grg
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.garage_door_west
            - entity: switch.garage_door_east
              name: 911 Grg
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.garage_door_east
            - entity: switch.front_drive_gate
              name: Front Gate
              tap_action:
                action: call-service
                service: script.turn_on
                service_data:
                  entity_id: script.front_gate_toggle

            - entity: light.pool_light
              name: Pool
              icon: mdi:lightbulb-outline
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: light.pool_light
            - entity: switch.pool_pump
              name: Pool
              icon: mdi:swim
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.pool_pump
            - entity: switch.spa_light
              name: Spa
              icon: mdi:lightbulb-outline
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.spa_light
            - entity: switch.spa_pump
              name: Spa
              icon: mdi:hot-tub
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.spa_pump
            - entity: switch.pool_rockfall
              name: Rockfall
              icon: mdi:waves
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.pool_rockfall

## END OUTSIDE STACK-IN ##

## START KIDS DEVICES ##
      - type: conditional
        conditions:
        - entity: group.kids_devices_all
          state: 'offf'
        card:
          type: custom:stack-in-card
          mode: vertical
          cards:
          - type: glance
            title: Kids Devices (Unifi)
            show_state: false
            columns: 6
            card_mod:
              style:
                $: |
                  .card-header {
                    text-align: center !important;
                    padding-bottom: 0px !important;
                    padding-top: 2px !important;
                    margin-bottom: 10px !important;
                    border: 0px solid #292929;
                    color: #777 !important;
                  }
            entities:
              - entity: switch.unifi_laptop_aubrey_macbook_air
                name: A Macbook
                icon: mdi:laptop
                tap_action:
                  action: call-service
                  service: ensure.toggle
                  data:
                    entity_id: switch.unifi_laptop_aubrey_macbook_air

#              - entity: switch.xbox_360
#                name: XBox 360
#                icon: mdi:microsoft-xbox-controller
#                tap_action:
#                  action: toggle
              - entity: switch.unifi_xbox_one_s
                name: XBox S
                icon: mdi:microsoft-xbox
                tap_action:
                  action: call-service
                  service: ensure.toggle
                  data:
                    entity_id: switch.unifi_xbox_one_s
              - entity: switch.unifi_xbox_series_x
                name: XBox X
                icon: mdi:microsoft-xbox
                tap_action:
                  action: call-service
                  service: ensure.toggle
                  data:
                    entity_id: switch.unifi_xbox_series_x
              - entity: switch.outlet_xbox_one_s_zb
                name: XBox Out
                icon: mdi:power
                tap_action:
                  action: call-service
                  service: ensure.toggle
                  data:
                    entity_id: switch.outlet_xbox_one_s_zb
  ## END OUTSIDE DEVICES ##

## HUMIDIFIERS
      - type: conditional
        conditions:
          - condition: or
            conditions:
              - condition: state
                entity: climate.6900_master
                state: 'heat'
              - condition: state
                entity: climate.6900_kitchen
                state: 'heat'
              - condition: state
                entity: climate.6900_upstairs
                state: 'heat'
        card:
          type: glance
          title: Humidifiers
          show_state: false
          card_mod:
            style:
              $: |
                .card-header {
                  text-align: center !important;
                  padding-bottom: 0px !important;
                  padding-top: 2px !important;
                  margin-bottom: 10px !important;
                  border: 0px solid #292929;
                  color: #777 !important;
                }
          columns: 4
          entities:
            - entity: switch.humidifier_kitchen_zb
              name: Kitchen
              icon: mdi:air-humidifier
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.humidifier_kitchen_zb
            - entity: switch.humidifier_master_bedroom_zb
              name: Master
              icon: mdi:air-humidifier
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.humidifier_master_bedroom_zb
            - entity: switch.humidifier_aubrey_zb
              name: Aubrey
              icon: mdi:air-humidifier
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.humidifier_aubrey_zb
            - entity: switch.humidifier_jonas_zb
              name: Jonas
              icon: mdi:air-humidifier
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.humidifier_jonas_zb
## END HUMIDIFIERS ##

## HALLOWEEN ##
      - type: conditional
        conditions:
          - condition: state
            entity: input_select.holiday_mode
            state: 'Halloween'
        card:
          type: glance
          title: Halloween
          show_state: false
          card_mod:
            style:
              $: |
                .card-header {
                  text-align: center !important;
                  padding-bottom: 0px !important;
                  padding-top: 2px !important;
                  margin-bottom: 10px !important;
                  border: 0px solid #292929;
                  color: #777 !important;
                }
          columns: 5
          entities:
            - entity: switch.outlet_holiday_04_zb
              name: Foyer Tree
              icon: mdi:tree-outline
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.outlet_holiday_04_zb
            - entity: switch.outlet_holiday_03_zb
              name: Foyer House
              icon: mdi:home-outline
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.outlet_holiday_03_zb
            - entity: switch.outlet_holiday_01_zb
              name: Wine Cellar
              icon: mdi:bottle-wine-outline
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.outlet_holiday_01_zb
            - entity: switch.outlet_holiday_05_zb
              name: Fireplace
              icon: mdi:fireplace
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.outlet_holiday_05_zb
            - entity: switch.outlet_holiday_outside_front_zw
              name: Frnt Yd
              icon: mdi:ghost-outline
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.outlet_holiday_outside_front_zw
## END HALLOWEEN ##

## CHRISTMAS LIGHTS
      - type: conditional
        conditions:
          - condition: state
            entity: input_select.holiday_mode
            state: 'Christmas'
        card:
          type: custom:stack-in-card
          mode: vertical
          cards:
          - type: glance
            title: Christmas
            show_state: false
            card_mod:
              style:
                $: |
                  .card-header {
                    text-align: center !important;
                    padding-bottom: 0px !important;
                    padding-top: 2px !important;
                    margin-bottom: 10px !important;
                    border: 0px solid #292929;
                    color: #777 !important;
                  }
            columns: 4
            entities:
              - entity: switch.outlet_holiday_01_zb
                name: Tree Star
                icon: mdi:star-outline
                tap_action:
                  action: call-service
                  service: ensure.toggle
                  data:
                    entity_id: switch.outlet_holiday_01_zb
              - entity: switch.twinkly_switchtemplate
                name: Twinkly Tree
                icon: mdi:pine-tree
                state_color: true
                tap_action:
                  action: more-info
                  entity: light.twinkly_2
              - entity: switch.outlet_holiday_03_zb
                name: Foyer Tree
                icon: mdi:pine-tree
                tap_action:
                  action: call-service
                  service: ensure.toggle
                  data:
                    entity_id: switch.outlet_holiday_03_zb
              - entity: switch.outlet_holiday_02_zb
                name: Kitchen Tree
                icon: mdi:pine-tree
                tap_action:
                  action: call-service
                  service: ensure.toggle
                  data:
                    entity_id: switch.outlet_holiday_02_zb

              - entity: switch.outlet_holiday_05_zb
                name: Fireplace Garland
                icon: mdi:fireplace-off
                tap_action:
                  action: call-service
                  service: ensure.toggle
                  data:
                    entity_id: switch.outlet_holiday_05_zb
              - entity: switch.outlet_holiday_04_zb
                name: Foyer Presents
                icon: mdi:gift-outline
                tap_action:
                  action: call-service
                  service: ensure.toggle
                  data:
                    entity_id: switch.outlet_holiday_04_zb
  #            - entity: light.bulb_wine_cellar_zb
  #              name: Wine Cellar
  #              icon: mdi:lightbulb-outline
  #              tap_action:
  #                action: toggle
              - entity: switch.outlet_holiday_06_zb
                name: Dining Rm Garland
                icon: mdi:table-chair
                tap_action:
                  action: call-service
                  service: ensure.toggle
                  data:
                    entity_id: switch.outlet_holiday_06_zb
              - entity: group.holiday_christmas_inside_all
                name: All Inside Lts
                icon: mdi:alpha-x-circle-outline
                tap_action:
                  action: call-service
                  service: homeassistant.toggle
                  service_data:
                    entity_id: group.holiday_christmas_inside_all

#          - type: glance
#            show_state: false
#            style: |
#              ha-card {
#                margin-top: -25px;
#              /*  margin-bottom: -10px; */
#              }
#            columns: 5
#            entities:
              - entity: switch.light_front_gate_zw
                name: Gate Wreath
                icon: mdi:gate
                tap_action:
                  action: call-service
                  service: ensure.toggle
                  data:
                    entity_id: switch.light_front_gate_zw
              - entity: switch.outlet_holiday_outside_front_zw
                name: Front Lights
                icon: mdi:home-outline
                tap_action:
                  action: call-service
                  service: ensure.toggle
                  data:
                    entity_id: switch.outlet_holiday_outside_front_zw
#              - entity: switch.outlet_holiday_outside_back_zw
#                name: Back Lights
#                icon: mdi:string-lights
#                tap_action:
#                  action: toggle
              - entity: light.jellyfish_6900_david_ln_front
                name: Jellyfish
                icon: mdi:led-strip-variant
                tap_action:
                  action: call-service
                  service: ensure.toggle
                  data:
                    entity_id: light.jellyfish_6900_david_ln_front
              - entity: group.holiday_christmas_outside
                name: All Outside Lts
                icon: mdi:alpha-x-circle-outline
                tap_action:
                  action: call-service
                  service: homeassistant.toggle
                  service_data:
                    entity_id: group.holiday_christmas_outside
## END CHRISTMAS LIGHTS ##

  ### BATTERIES
      - type: custom:stack-in-card
        mode: vertical
        cards:
        - type: glance
          title: Batteries
          columns: 4
          card_mod:
            style:
              $: |
                .card-header {
                  text-align: center !important;
                  padding-bottom: 0px !important;
                  padding-top: 2px !important;
                  margin-bottom: 10px !important;
                  border: 0px solid #292929;
                  color: #777 !important;
                }
          entities:
            - entity: sensor.battery_mark_phone
              name: Mark
            - entity: sensor.battery_amber_phone
              name: Amber
            - entity: sensor.battery_aubrey_iphone
              name: Aubrey
            - entity: sensor.battery_jonas_phone
              name: Jonas
#            - entity: sensor.battery_ms_thinkpad
#              name: ThinkPad

        - type: glance
          columns: 4
          show_state: false
          card_mod:
            style: |
              ha-card {
                margin-top: -45px;
                margin-bottom: -10px;
                padding-bottom: 0px;
              }
          entities:
            - entity: group.phone_chargers_mark
              name: ""
              icon: mdi:flash-outline
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: group.phone_chargers_mark
            - entity: switch.charger_phone_amber_zb
              name: ""
              icon: mdi:flash-outline
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.charger_phone_amber_zb
            - entity: switch.charger_phone_aubrey_zb
              name: ""
              icon: mdi:flash-outline
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.charger_phone_aubrey_zb
            - entity: switch.charger_phone_jonas_zb
              name: ""
              icon: mdi:flash-outline
              tap_action:
                action: call-service
                service: ensure.toggle
                data:
                  entity_id: switch.charger_phone_jonas_zb

  ### END BATTERIES STACK-IN ###

### END OUTLETS CARD ###

### THERMOSTATS CARD ###
  - title: Thermostats
    icon: mdi:thermometer
    columns: 3
    cards:
#      - type: vertical-stack
#        cards:
#        - type: thermostat
#          entity: climate.6900_kitchen
#        - type: thermostat
#          entity: climate.6900_master
#        - type: thermostat
#          entity: climate.6900_upstairs
#      - type: vertical-stack
#        cards:
#        - type: thermostat
#          entity: climate.4055_front
#        - type: thermostat
#          entity: climate.4055_middle
#        - type: thermostat
#          entity: climate.4055_rear

      # Home Thermostats
      - type: vertical-stack
        cards:
        - type: custom:simple-thermostat
          entity: climate.6900_kitchen
          card_mod:
            style: |
              ha-card {
                padding-bottom: 0px !important;
                --st-font-size-xl: 40px;
                --st-font-size-l: var(--ha-font-size-4xl);
                --st-font-size-m: var(--ha-font-size-xl);
                --st-font-size-title: var(--ha-card-header-font-size, 24px);
                --st-font-size-sensors: var(--ha-font-size-l, 16px);
                --st-default-spacing: 0;
                padding-left: 10px;
              }
              ha-card header {
                padding-top: 10px;
                padding-bottom: 10px;
              }
              .current-wrapper.row {
                color: #969696;
                padding-left: 20px;
              }
              ha-icon-button {
                padding: 0px 100px !important;
              }
              .sensor-heading {
                padding-left: 15px;
              }
              .header__title {
                padding-left: 5px;
              }
          header:
            name: Home - Kitchen
            icon:
              fan: mdi:fan
              idle:
              cooling: mdi:air-conditioner
              heating: mdi:fire
          decimals: 1
          step_size: 1
          layout:
            step: row
          control: false
          hide:
            state: true
          sensors:
            - attribute: current_humidity
              name: Humidity
              unit: '%'
            - attribute: hvac_action
              name: State
            - entity: sensor.6900_kitchen_feels_like_no_space
              name: 'Feels Like'
            - entity: sensor.6900_kitchen_fan_speed
              name: Fan
              unit: '%'
            - entity: sensor.6900_kitchen_last_changed
              name: Changed

        - type: custom:simple-thermostat
          entity: climate.6900_master
          card_mod:
            style: |
              ha-card {
                padding-bottom: 0px !important;
                --st-font-size-xl: 40px;
                --st-font-size-l: var(--ha-font-size-4xl);
                --st-font-size-m: var(--ha-font-size-xl);
                --st-font-size-title: var(--ha-card-header-font-size, 24px);
                --st-font-size-sensors: var(--ha-font-size-l, 16px);
                --st-default-spacing: 0;
                padding-left: 10px;
              }
              ha-card header {
                padding-top: 10px;
                padding-bottom: 10px;
              }
              .current-wrapper.row {
                color: #969696;
                padding-left: 20px;
              }
              ha-icon-button {
                padding: 0px 100px !important;
              }
              .sensor-heading {
                padding-left: 15px;
              }
              .header__title {
                padding-left: 5px;
              }
          header:
            name: Home - Master
            icon:
              fan: mdi:fan
              idle:
              cooling: mdi:air-conditioner
              heating: mdi:fire
          decimals: 1
          step_size: 1
          layout:
            step: row
          control: false
          hide:
            state: true
          sensors:
            - attribute: current_humidity
              name: Humidity
              unit: '%'
            - attribute: hvac_action
              name: State
            - entity: sensor.6900_master_feels_like_no_space
              name: 'Feels Like'
            - entity: sensor.6900_master_fan_speed
              name: Fan
              unit: '%'
            - entity: sensor.6900_master_last_changed
              name: Changed

        - type: custom:simple-thermostat
          entity: climate.6900_upstairs
          card_mod:
            style: |
              ha-card {
                padding-bottom: 0px !important;
                --st-font-size-xl: 40px;
                --st-font-size-l: var(--ha-font-size-4xl);
                --st-font-size-m: var(--ha-font-size-xl);
                --st-font-size-title: var(--ha-card-header-font-size, 24px);
                --st-font-size-sensors: var(--ha-font-size-l, 16px);
                --st-default-spacing: 0;
                padding-left: 10px;
              }
              ha-card header {
                padding-top: 10px;
                padding-bottom: 10px;
              }
              .current-wrapper.row {
                color: #969696;
                padding-left: 20px;
              }
              ha-icon-button {
                padding: 0px 100px !important;
              }
              .sensor-heading {
                padding-left: 15px;
              }
              .header__title {
                padding-left: 5px;
              }
          header:
            name: Home - Upstairs
            icon:
              fan: mdi:fan
              idle:
              cooling: mdi:air-conditioner
              heating: mdi:fire
          decimals: 1
          step_size: 1
          layout:
            step: row
          control: false
          hide:
            state: true
          sensors:
            - attribute: current_humidity
              name: Humidity
              unit: '%'
            - attribute: hvac_action
              name: State
            - entity: sensor.6900_upstairs_feels_like_no_space
              name: 'Feels Like'
            - attribute: fan_action
              name: Fan
            - entity: sensor.6900_upstairs_last_changed
              name: Changed

## HVAC FAN STATUS NEW
      - type: vertical-stack
        cards:
        - type: glance
          columns: 3
          show_icon: false
          card_mod:
            style: |
              ha-card {
                margin-top: -5px !important;
                margin-bottom: -5px !important;
                padding-top: -15px;
                padding-bottom: 0px !important;
                border-top: 5px solid #222;
              }
              .entities { padding-top: 15px !important; }
              div {
                /* color: #9da5b4; */
              }
          entities:
            - entity: sensor.6900_kitchen_hvac_action
              name: 'Kitchen'
            - entity: sensor.6900_master_hvac_action
              name: 'Master'
            - entity: sensor.6900_upstairs_hvac_action
              name: 'Upstairs'
        ## HVAC HOME ICONS
        - type: glance
          columns: 3
          show_name: false
          show_state: false
          card_mod:
            style: |
              ha-card {
                margin-top: -40px !important;
                margin-bottom: -0px !important;
              }
              .entities {
                padding-top: 0px !important;
                padding-bottom: 0px !important;
              }
          entities:
            - entity: sensor.6900_kitchen_hvac_action
            - entity: sensor.6900_master_hvac_action
            - entity: sensor.6900_upstairs_hvac_action

        - type: conditional
          conditions:
          - entity: climate.6900_master
            state: "cool"
          card:
            type: glance
            columns: 3
            show_name: false
            show_icon: false
            card_mod:
              style: |
                ha-card {
                  margin-top: -20px !important;
                  margin-bottom: -0px !important;
                }
                .entities {
                  padding-top: 0px !important;
                  padding-bottom: 0px !important;
                }
            entities:
              - entity: sensor.kitchen_hvac_cooling_24h
              - entity: sensor.master_hvac_cooling_24h
              - entity: sensor.upstairs_hvac_cooling_24h
        - type: conditional
          conditions:
          - entity: climate.6900_master
            state: "heat"
          card:
            type: glance
            columns: 3
            show_name: false
            show_icon: false
            card_mod:
              style: |
                ha-card {
                  margin-top: -20px !important;
                  margin-bottom: -0px !important;
                }
                .entities {
                  padding-top: 0px !important;
                  padding-bottom: 0px !important;
                }
            entities:
              - entity: sensor.kitchen_hvac_heating_24h
              - entity: sensor.master_hvac_heating_24h
              - entity: sensor.upstairs_hvac_heating_24h

        - type: horizontal-stack
          cards:
          - type: custom:mini-graph-card
            name: Outside Temp (60h)
            entities:
              - entity: sensor.david_ln_sensors_air_temperature
  #            - entity: sensor.david_ln_sensors_humidity
            line_width: 4
            hours_to_show: 60
            font_size: 70
#            line_color: '#FDD835' #yellow - blue is 03A9F4
            color_thresholds:
              - value: 0
                color: '#02f950'
              - value: 45
                color: '#4c709d'
#              - value: 20
#                color: '#02d4f9'
#              - value: 35
#                color: '#02f950'
#              - value: 50
#                color: '#f9e902'
              - value: 75
                color: '#FDD835'
              - value: 90
                color: '#c7363c'
              - value: 100
                color: '#7f000c'
            show:
              icon: true
              labels: true
              legend: false
          - type: custom:mini-graph-card
            name: Outside Humidity (60h)
            card_mod:
              style: |
            entities:
              - entity: sensor.david_ln_sensors_humidity
                name: Outside
                unit: '%'
            line_color: '#4c709d' #'#25952d'
            line_width: 4
            hours_to_show: 60
            font_size: 70
            icon: mdi:water-percent
            show:
              icon: true
              labels: true
              legend: false

        # TEMPERTAURE GRAPHS
        - type: horizontal-stack
          cards:
          - type: custom:mini-graph-card
            card_mod:
              style: |
                ha-card {
                  padding-top: 10px !important;
                }
                .header {
                  padding-top: 5px !imporant;
                  padding-bottom: 5px !important;
                  font-size: 12px !important;
                }
                .states {
                  padding: 0 0 0 15px !important;
                }
                .graph {
                  margin-top: 0px !important;
                  height: 100% !important;
                }
            entities:
              - entity: sensor.6900_kitchen_nativezone_temperature
                name: 'Kitchen (48h)'
                unit: '°F'
                show_legend: false
              - entity: sensor.6900_kitchen_feels_like
                color: '#969696'
                show_fill: false
            line_color: '#4c709d' #'#c7363c'
            line_width: 3
            font_size: 75
            hours_to_show: 48
            icon: mdi:thermometer
            color_thresholds:
              - value: 55
                color: '#02f950'
              - value: 65
                color: '#4c709d'
              - value: 75
                color: '#FDD835'
              - value: 85
                color: '#c7363c'
              - value: 95
                color: '#7f000c'
          - type: custom:mini-graph-card
            card_mod:
              style: |
                ha-card {
                  padding-top: 10px !important;
                }
                .header {
                  padding-top: 5px !imporant;
                  padding-bottom: 5px !important;
                  font-size: 12px !important;
                }
                .states {
                  padding: 0 0 0 15px !important;
                }
                .graph {
                  margin-top: 0px !important;
                  height: 100% !important;
                }
            entities:
              - entity: sensor.6900_master_nativezone_temperature
                name: 'Master (48h)'
                unit: '°F'
                show_legend: false
              - entity: sensor.6900_master_feels_like
                color: '#969696'
                show_fill: false
            line_color: '#4c709d' #'#FDD835'
            line_width: 3
            font_size: 75
            hours_to_show: 48
            icon: mdi:thermometer
            color_thresholds:
              - value: 55
                color: '#02f950'
              - value: 65
                color: '#4c709d'
              - value: 75
                color: '#FDD835'
              - value: 85
                color: '#c7363c'
              - value: 95
                color: '#7f000c'
          - type: custom:mini-graph-card
            card_mod:
              style: |
                ha-card {
                  padding-top: 10px !important;
                }
                .header {
                  padding-top: 5px !imporant;
                  padding-bottom: 5px !important;
                  font-size: 12px !important;
                }
                .states {
                  padding: 0 0 0 15px !important;
                }
                .graph {
                  margin-top: 0px !important;
                  height: 100% !important;
                }
            entities:
              - entity: sensor.6900_upstairs_temperature
                name: 'Upstairs (48h)'
                unit: '°F'
                show_legend: false
              - entity: sensor.6900_upstairs_feels_like
                color: '#969696'
                show_fill: false
            line_color: '#4c709d'
            line_width: 3
            font_size: 75
            hours_to_show: 48
            icon: mdi:thermometer
            color_thresholds:
              - value: 55
                color: '#02f950'
              - value: 65
                color: '#4c709d'
              - value: 75
                color: '#FDD835'
              - value: 85
                color: '#c7363c'
              - value: 95
                color: '#7f000c'

        # HUMIDITY GRAPHS
        - type: horizontal-stack
          cards:
          - type: custom:mini-graph-card
            card_mod:
              style: |
                ha-card {
                  padding-top: 10px !important;
                }
                .header {
                  padding-top: 5px !imporant;
                  padding-bottom: 5px !important;
                  font-size: 12px !important;
                }
                .states {
                  padding: 0 0 0 15px !important;
                }
                .graph {
                  margin-top: 0px !important;
                  height: 100% !important;
                }
            entities:
              - entity: sensor.6900_kitchen_relative_humidity
                name: Kitchen
                unit: '%'
            line_color: '#4c709d' #'#c7363c'
            line_width: 3
            font_size: 75
            hours_to_show: 24
            icon: mdi:water-percent
          - type: custom:mini-graph-card
            card_mod:
              style: |
                ha-card {
                  padding-top: 10px !important;
                }
                .header {
                  padding-top: 5px !imporant;
                  padding-bottom: 5px !important;
                  font-size: 12px !important;
                }
                .states {
                  padding: 0 0 0 15px !important;
                }
                .graph {
                  margin-top: 0px !important;
                  height: 100% !important;
                }
            entities:
              - entity: sensor.6900_master_relative_humidity
                name: Master
                unit: '%'
            line_color: '#4c709d' #'#FDD835'
            line_width: 3
            font_size: 75
            hours_to_show: 24
            icon: mdi:water-percent
          - type: custom:mini-graph-card
            card_mod:
              style: |
                ha-card {
                  padding-top: 10px !important;
                }
                .header {
                  padding-top: 5px !imporant;
                  padding-bottom: 5px !important;
                  font-size: 12px !important;
                }
                .states {
                  padding: 0 0 0 15px !important;
                }
                .graph {
                  margin-top: 0px !important;
                  height: 100% !important;
                }
            entities:
              - entity: sensor.6900_upstairs_humidity_2
                name: Upstairs
                unit: '%'
            line_color: '#4c709d'
            line_width: 3
            font_size: 75
            hours_to_show: 24
            icon: mdi:water-percent

#        - type: custom:mini-graph-card
#          name: Inside Humidity (60h)
#          font_size: 80
#          hours_to_show: 60
#          line_color: '#4c709d'
#          line_width: 3
#          show:
#            icon: false
#            state: false
#            labels: true
#            labels_secondary: false
#          entities:
#            - entity: sensor.6900_upstairs_humidity_2
#              show_legend: true
#              name: 'Upstairs'
#              color: '#4c709d'
#            - entity: sensor.6900_master_humidity
#              show_legend: true
#              name: Master
#              color: '#FDD835'
#            - entity: sensor.6900_kitchen_humidity
#              show_legend: true
#              name: Kitchen
#              color: '#c7363c'

        - type: custom:mini-graph-card
          name: Master Bath Humidity (60h)
          font_size: 70
          icon: mdi:water-percent
          card_mod:
            style: |
              ha-card {
                padding-top: 1px !important;
              }
              .graph {
                margin-top: -10px !important;
                height: 100% !important;
              }
          entities:
            - entity: sensor.master_bathroom_zw_humidity
              show_legend: false
              line_width: 2
              color: '#4c709d'
            - entity: sensor.master_bathroom_humidity_average_linear_24h
              show_legend: false
              color: '#878787'
              show_fill: false
          line_width: 3
          hours_to_show: 60
          line_color: '#4c709d'
          show:
            icon: true
            labels: true
            labels_secondary: true

        - type: horizontal-stack
          cards:
          - type: custom:mini-graph-card
            name: Aubrey Bath Humidity
            font_size: 70
            icon: mdi:water-percent
            card_mod:
              style: |
                ha-card {
                  padding-top: 1px !important;
                }
                .graph {
                  margin-top: -10px !important;
                  height: 100% !important;
                }
            entities:
              - entity: sensor.esp32_govee_ble_sensors_aubrey_bathroom_humidity
                show_legend: false
                line_width: 2
                color: '#4c709d'
              - entity: sensor.aubrey_bathroom_humidity_average_linear_24h
                show_legend: false
                color: '#878787'
                show_fill: false
            line_width: 3
            hours_to_show: 60
            line_color: '#4c709d'
            show:
              icon: true
              labels: false
          - type: custom:mini-graph-card
            name: Jonas Bath Humidity
            font_size: 70
            icon: mdi:water-percent
            card_mod:
              style: |
                ha-card {
                  padding-top: 1px !important;
                }
                .graph {
                  margin-top: -10px !important;
                  height: 100% !important;
                }
            entities:
              - entity: sensor.esp32_govee_ble_sensors_jonas_bathroom_humidity
                show_legend: false
                line_width: 2
                color: '#4c709d'
              - entity: sensor.jonas_bathroom_humidity_average_linear_24h
                show_legend: false
                color: '#878787'
                show_fill: false
            line_width: 3
            hours_to_show: 60
            line_color: '#4c709d'
            show:
              icon: true
              labels: false

    ## FANS S/B SECTION
        - type: vertical-stack
          cards:
          - type: glance
            columns: 3
            show_icon: false
            card_mod:
              style: |
                ha-card {
                  margin-top: -5px !important;
                  margin-bottom: -5px !important;
                  padding-top: -15px;
                  padding-bottom: 0px !important;
                  border-top: 5px solid #222;
                }
                .entities { padding-top: 15px !important; }
                div {
                  /* color: #9da5b4; */
                }
            entities:
              - entity: switch.fan_master_bathroom_zw
                name: 'Master'
              - entity: switch.fan_aubrey_bathroom_zw
                name: 'Aubrey'
              - entity: switch.fan_jonas_bathroom_zw
                name: 'Jonas'
          ## HVAC HOME ICONS
          - type: glance
            columns: 3
            show_name: false
            show_state: false
            card_mod:
              style: |
                ha-card {
                  margin-top: -40px !important;
                  margin-bottom: -0px !important;
                }
                .entities {
                  padding-top: 0px !important;
                  padding-bottom: 0px !important;
                }
            entities:
              - entity: switch.fan_master_bathroom_zw
              - entity: switch.fan_aubrey_bathroom_zw
              - entity: switch.fan_jonas_bathroom_zw
          - type: glance
            columns: 3
            show_name: false
            show_icon: false
            card_mod:
              style: |
                ha-card {
                  margin-top: -20px !important;
                  margin-bottom: -0px !important;
                }
                .entities {
                  padding-top: 0px !important;
                  padding-bottom: 0px !important;
                }
            entities:
              - entity: binary_sensor.master_bath_fan_sb
              - entity: binary_sensor.aubrey_bath_fan_sb
              - entity: binary_sensor.jonas_bath_fan_sb

#XXX
        - type: custom:vertical-stack-in-card
          horizontal: true
          card_mod:
            style: |
              ha-card { margin-top: -25px !important; }
          cards:
            - type: custom:mushroom-template-card
              primary: '{{ states(''sensor.master_bathroom_zw_humidity'') | round(0) }} / {{ states(''sensor.master_bathroom_humidity_average_linear_24h'') | round(0) }}'
              secondary: ''
              icon: ''
              layout: vertical
              entity: sensor.master_bathroom_zw_humidity
              tap_action:
                action: more-info
              card_mod:
                style: |
                  .type-custom-mushroom-template-card {
                    padding: 12px 6px 12px 25px;
                  }
                  ha-card {
                    --card-primary-font-weight: normal;
                  }
                  mushroom-shape-icon {
                    --shape-color: transparent !important;
                  }
            - type: custom:mushroom-template-card
              primary: '{{ state_attr(''sensor.var_govee'',''aubrey_bathroom_humidity'') | round(0) }} / {{ state_attr(''sensor.var_govee'',''aubrey_bathroom_humidity_average'') | round(0) }}'
              secondary: ''
              icon: ''
              layout: vertical
              entity: sensor.esp32_govee_ble_sensors_aubrey_bathroom_humidity
              tap_action:
                action: more-info
              card_mod:
                style: |
                  .type-custom-mushroom-template-card {
                    padding: 12px 6px 12px 6px;
                  }
                  ha-card {
                    --card-primary-font-weight: normal;
                  }
                  mushroom-shape-icon {
                    --shape-color: transparent !important;
                  }
            - type: custom:mushroom-template-card
              primary: '{{ state_attr(''sensor.var_govee'',''jonas_bathroom_humidity'') | round(0) }} / {{ state_attr(''sensor.var_govee'',''jonas_bathroom_humidity_average'') | round(0) }}'
              secondary: ''
              icon: ''
              layout: vertical
              entity: sensor.esp32_govee_ble_sensors_jonas_bathroom_humidity
              tap_action:
                action: more-info
              card_mod:
                style: |
                  .type-custom-mushroom-template-card {
                    padding: 12px 25px 12px 6px;
                  }
                  ha-card {
                    --card-primary-font-weight: normal;
                  }
                  mushroom-shape-icon {
                    --shape-color: transparent !important;
                  }

        - type: custom:mini-graph-card
          name: Network Closet Temp (60h)
          font_size: 70
          icon: mdi:thermometer
          card_mod:
            style: |
              ha-card {
                padding-top: 1px !important;
              }
              .graph {
                margin-top: -10px !important;
                height: 100% !important;
              }
          entities:
            - entity: sensor.esp32_govee_ble_sensors_network_closet_temperature
              show_legend: false
              line_width: 1
              color: '#4c709d'
              color_thresholds:
                - value: 0
                  color: '#02f950'
                - value: 45
                  color: '#4c709d'
  #              - value: 20
  #                color: '#02d4f9'
  #              - value: 35
  #                color: '#02f950'
  #              - value: 50
  #                color: '#f9e902'
                - value: 75
                  color: '#FDD835'
                - value: 90
                  color: '#c7363c'
                - value: 100
                  color: '#7f000c'

###### END THERMOSTAT CARD ######

##### WEATHER CARD #####
## Taken From: https://www.reddit.com/r/homeassistant/comments/1ao1tpe/finished_my_weather_dashboard_probably_my/
  - title: Weather
    path: weather
    icon: mdi:weather-partly-cloudy
    layout:
      grid-template-columns: repeat(4, 1fr)
      grid-template-areas: |-
        "a b b b"
        "c b b b"
        "d e f g"
      place-content: stretch
      mediaquery:
        '(max-width: 1300px)':
          grid-template-columns: 1fr
          grid-template-areas: |-
            "a"
            "b"
            "c"
    type: custom:grid-layout
    badges: []
    cards:
      - show_current: true
        show_forecast: true
        type: weather-forecast
        entity: weather.forecast_david_ln
        forecast_type: daily
        name: Colleyville, TX
        card_mod:
          style: |
            ha-card {
              padding: 5px 10px 0px 5px !important;
            }
            .header {
              padding-top: 1px !important;
            }
            .content {
              padding-bottom: 10px !important;
            }
        view_layout:
          grid-area: a
      - type: iframe
        url: >-
          https://embed.windy.com/embed2.html?lat=32.9076319&lon=-97.1534811&detailLat=32.9076319&detailLon=-97.1534811&width=650&height=650&zoom=5&level=surface&overlay=wind&product=ecmwf&menu=&message=true&marker=&calendar=now&pressure=true&type=map&location=coordinates&detail=&metricWind=default&metricTemp=default&radarRange=-1
        aspect_ratio: 50%
        view_layout:
          place-self: center stretch
          grid-area: b
      - type: custom:apexcharts-card
        config_templates:
          - tufte
        header:
          show: true
          title: Temps (36h)
          show_states: true
          colorize_states: true
        graph_span: 36h
        all_series_config:
          stroke_width: 1
        series:
          - entity: sensor.david_ln_sensors_air_temperature
            name: Temperature
            show:
              extremas: true
          - entity: sensor.david_ln_sensors_heat_index
            name: Heat Index
          - entity: sensor.david_ln_sensors_wind_chill
            name: Wind Chill
          - entity: sensor.david_ln_sensors_dew_point
            name: Dewpoint
        view_layout:
          grid-area: c
      - type: custom:apexcharts-card
        config_templates:
          - tufte
        header:
          show: true
          title: Wind (36h)
          show_states: true
          colorize_states: true
        graph_span: 36h
        all_series_config:
          stroke_width: 1
          show:
            extremas: max
        series:
          - entity: sensor.david_ln_sensors_wind_speed
            name: Speed
            opacity: 0.2
            type: area
          - entity: sensor.david_ln_sensors_wind_gust
            name: Gust
          - entity: sensor.wind_speed_average
            name: Avg.

      - type: custom:apexcharts-card
        config_templates:
          - tufte
        header:
          show: true
          title: Pressure
          show_states: true
          colorize_states: true
        graph_span: 2d
        all_series_config:
          stroke_width: 1
          show:
            extremas: true
        series:
          - entity: sensor.david_ln_sensors_barometric_pressure
            name: ' '
      - type: custom:apexcharts-card
        config_templates:
          - tufte
        header:
          show: true
          title: Humidity
          show_states: true
          colorize_states: true
        graph_span: 1d
        all_series_config:
          stroke_width: 1
          show:
            extremas: true
        series:
          - entity: sensor.david_ln_sensors_humidity
            name: ' '
      - type: custom:apexcharts-card
        config_templates:
          - tufte
        header:
          show: true
          title: Rain
          show_states: true
          colorize_states: true
        graph_span: 1d
        all_series_config:
          stroke_width: 1
          show:
            extremas: max
        yaxis:
          - id: rate
          - id: total
            opposite: true
        series:
          - entity: sensor.david_ln_sensors_precipitation_rate
            name: Rate
            type: column
            stroke_width: 2
            yaxis_id: rate
            color: rebeccapurple
          - entity: sensor.david_ln_sensors_precipitation_today
            name: Total Today
            yaxis_id: total
##### END WEATHER CARD #####

###### LIGHTING CARD ######
  - title: Lighting
    icon: mdi:lightbulb-outline
    cards:
      - type: vertical-stack
        cards:
        - type: custom:decluttering-card
          template: de_mushroom_light_slider
          variables:
            - name: 'Kitchen Cans'
            - entity: light.cans_kitchen_zw
            - icon: mdi:light-recessed
        - type: custom:decluttering-card
          template: de_mushroom_light_slider
          variables:
            - name: 'Kitchen Chandelier'
            - entity: light.chandelier_kitchen_zw
            - icon: mdi:chandelier
        - type: custom:decluttering-card
          template: de_mushroom_light_slider
          variables:
            - name: 'Family Room Cans'
            - entity: light.cans_family_room_zw
            - icon: mdi:light-recessed
        - type: custom:decluttering-card
          template: de_mushroom_light_slider
          variables:
            - name: 'Family Room Chandelier'
            - entity: light.chandelier_family_room_zw
            - icon: mdi:chandelier
#        - type: custom:big-slider-card
#          entity: light.cans_movie_room_zw
#          name: 'Movie Room Cans'
#          attribute: brightness
#          color: '#fdd93c'
#          bold_text: true
#          show_percentage: true
        - type: custom:decluttering-card
          template: de_mushroom_light_slider
          variables:
            - name: 'Movie Room Cans'
            - entity: light.cans_movie_room_zw
            - icon: mdi:light-recessed
        - type: custom:decluttering-card
          template: de_mushroom_light_slider
          variables:
            - name: 'Front Hall Lamp'
            - entity: light.bulb_front_hall_lamp_zb
            - icon: mdi:lamp-outline
#        - type: custom:big-slider-card
#          entity: light.bulb_front_hall_lamp_zb
#          icon: mdi:lamp-outline
#          name: 'Front Hall Lamp'
#          color: '#ff9800'
#          colorize: true
#          border_radius: '12px'
#          show_percentage: true
#          bold_text: true
#          card_mod:
#            style: |
#              ha-card {
#                --bsc-brightness-ui: 100%;
#              }
#        - type: custom:decluttering-card
#          template: de_mushroom_light_slider_color
#          variables:
#            - name: 'Wine Cellar Light'
#            - entity: light.bulb_wine_cellar_zb
#            - icon: mdi:lamp-outline
        - type: custom:decluttering-card
          template: de_mushroom_light_slider_color
          variables:
            - name: 'Jonas Lamp'
            - entity: light.bulb_jonas_lamp_tp
            - icon: mdi:lamp-outline
        - type: custom:decluttering-card
          template: de_mushroom_light_slider_color
          variables:
            - name: 'School Bus Light'
            - entity: light.bulb_school_bus_zb
            - icon: mdi:lightbulb-outline


#        - type: markdown
#          style: |
#            .no-header {
#              padding-top: 10px !important;
#              padding-bottom: 10px !important;
#              text-align: center;
#              background: #222222;
#              color: #777777;
#            }
#            ha-card {
#              box-shadow: none;
#            }
#          content: '<ha-icon icon="mdi:chevron-double-left"></ha-icon> Swipe Here <ha-icon icon="mdi:chevron-double-right"></ha-icon>'
      - type: vertical-stack
        cards:
        - type: custom:decluttering-card
          template: de_mushroom_light_slider
          variables:
            - name: 'Back Porch Cans'
            - entity: light.cans_outside_zw
            - icon: mdi:light-recessed
        - type: custom:decluttering-card
          template: de_mushroom_light_slider_color
          variables:
            - name: 'Kitchen Voice Assist'
            - entity: light.esp32_voice_assist_kitchen2_led_strip
            - icon: mdi:cylinder
        - type: custom:decluttering-card
          template: de_mushroom_light_slider_color
          variables:
            - name: 'Kitchen Kauf RGB Big'
            - entity: light.kauf_rgb_sw_big_light
            - icon: mdi:light-switch
        - type: custom:decluttering-card
          template: de_mushroom_light_slider_color
          variables:
            - name: 'Kitchen Kauf RGB Small'
            - entity: light.kauf_rgb_sw_small_light
            - icon: mdi:light-switch
        - type: custom:decluttering-card
          template: de_mushroom_light_slider_color
          variables:
            - name: 'Kitchen Fireplace'
#            - entity: light.kitchen_fireplace_led_strip_partitions
            - entity: light.esp32_fireplace_kitchen_led_strip
#            - icon: mdi:fireplace
            - icon: mdi:led-strip-variant
        - type: custom:decluttering-card
          template: de_mushroom_light_slider_color
          variables:
            - name: 'Front Porch IoT'
            - entity: light.front_porch_lights_iot
            - icon: mdi:dome-light
        - type: custom:decluttering-card
          template: de_mushroom_light_slider
          variables:
            - name: 'Front House - ALL'
            - entity: light.front_house_all
            - icon: mdi:light-flood-up
        - type: custom:mushroom-template-card
          card_mod:
            style: |
              ha-card {
                padding-left: 1px !important;
              }
              ha-card #states {
                margin-bottom: -20px !important;
                padding-top: 1px !important;
                padding-bottom: -10px;
              }
              .type-custom-mushroom-template-card {
                padding: 9px 6px 9px 12px;
              }
              :host {
              #  --mush-card-primary-font-weight: normal;
              }
              mushroom-shape-icon {
              #  --shape-color: transparent !important;
                margin-left: -10px;
              }
          primary: |
            Jellyfish Lights
          secondary: |-
            {% if state_attr('light.jellyfish_6900_david_ln_front','effect') != None %}
              {{ state_attr('light.jellyfish_6900_david_ln_front','effect') | replace("/"," / ") }}
            {% endif %}
          icon: mdi:led-strip-variant
          icon_color: |-
            {% if state_attr('light.jellyfish_6900_david_ln_front','effect') != None %}
              {% if state_attr('light.jellyfish_6900_david_ln_front','effect').split('/').0 == 'Colors' %}
                {% if state_attr('light.jellyfish_6900_david_ln_front','effect').split('/').1.trim == 'Pink' %}
                  #ff9ef3
                {% elif state_attr('light.jellyfish_6900_david_ln_front','effect').split('/').1.trim == 'Hot Pink' %}
                  pink
                {% elif state_attr('light.jellyfish_6900_david_ln_front','effect').split('/').1.trim == 'Turquoise' %}
                  #08c5e6
                {% else %}
                  state_attr('light.jellyfish_6900_david_ln_front','effect').split('/').1 | lower %}
                {% endif %}
              {% else %} amber
              {% endif %}
            {% else %}
              {% if is_state('light.jellyfish_6900_david_ln_front','off') %}
                68, 115, 158
              {% else %}
                {{ state_attr('light.jellyfish_6900_david_ln_front','rgb_color') }}
              {% endif %}
            {% endif %}
          tap_action:
            action: more-info
          entity: light.jellyfish_6900_david_ln_front
          hold_action:
            action: toggle


###### END LIGHTING CARD ######


###### POOL CARD ######
  - title: Pool
    icon: mdi:swim
    columns: 2
    cards:
      - type: vertical-stack
        cards:
          - type: conditional
            conditions:
              - entity: binary_sensor.freeze_protection
                state: 'on'
            card:
              type: entities
              card_mod:
                style: |
                  ha-card #states {
                    margin-bottom: 10px !important;
                    padding-top: 10px !important;
                    padding-bottom: 0px;
                  }
              entities:
                - entity: binary_sensor.pool_freeze_protection
                  type: custom:multiple-entity-row
                  name: Pool Freeze Protection
                  icon: hass:snowflake
                  state_color: true
                  show_state: false
                  #secondary_info: last-changed
                  entities:
                    - entity: sensor.air_temp
                      name: Air Temp
                    - entity: sensor.freeze_protection_on
                      name: Duration

          - type: glance
            title: Pool
            columns: 3
            card_mod:
              style: |
                .card-header {
                  padding-top: 7px;
                  padding-bottom: 7px;
                }
            entities:
              - entity: input_number.pool_temp
                name: Pool Temp
                icon: mdi:swim
              - entity: input_number.spa_temp
                name: Spa Temp
                icon: mdi:hot-tub
                tap_action:
                  action: call-service
                  service: script.turn_on
                  service_data:
                    entity_id: script.set_spa_temp
              - entity: sensor.air_temp
                name: Air Temp
                icon: mdi:thermometer

          - type: glance
            columns: 3
            show_state: false
            entities:
              - entity: switch.pool_pump
                name: Pool Pump
                tap_action:
                  action: call-service
                  service: ensure.toggle
                  data:
                    entity_id: switch.pool_pump
              - entity: switch.spa_pump
                name: Spa Pump
                tap_action:
                  action: call-service
                  service: ensure.toggle
                  data:
                    entity_id: switch.spa_pump
              - entity: switch.pool_rockfall
                name: Rockfall
                icon: mdi:waves
                tap_action:
                  action: call-service
                  service: ensure.toggle
                  data:
                    entity_id: switch.pool_rockfall
          - type: glance
            columns: 3
            show_state: false
            entities:
              - entity: light.pool_light
                name: Pool Light
                icon: mdi:lightbulb-outline
                tap_action:
                  action: call-service
                  service: ensure.toggle
                  data:
                    entity_id: light.pool_light
              - entity: switch.spa_light
                name: Spa Light
                icon: mdi:lightbulb-outline
                tap_action:
                  action: call-service
                  service: ensure.toggle
                  data:
                    entity_id: switch.spa_light
              - entity: switch.spa_heater
                name: Heater
                icon: mdi:fire
                tap_action:
                  action: call-service
                  service: ensure.toggle
                  data:
                    entity_id: switch.spa_heater
          - type: custom:light-entity-card
            entity: light.pool_light
            group: true
            persist_features: true
###### END POOL SECTION ######
## SPRINKLER CARD ##
      - type: custom:stack-in-card
        title: Rachio Sprinklers
        mode: vertical
        card_mod:
          style: |
            .card-header {
              padding-top: 7px;
              padding-bottom: 7px;
              font-size: 20px;
              margin-bottom: -15px;
            }
        cards:
          - type: entities
            card_mod:
              style: |
                ha-card {
                  margin-top: -30px !important;
                  padding-top: 0px !important;
                  margin-bottom: 0px !important;
                }
            entities:
              - entity: switch.rachio_1_front_yard_north
                type: custom:multiple-entity-row
                name: Front North
                show_state: false
                state_color: true
                icon: mdi:numeric-1-box
                entities:
                  - entity: sensor.rachio_1_front_yard_north
                    attribute: last_run
                    name: Last Run
                  - entity: sensor.rachio_1_front_yard_north
                    attribute: duration
                    name: Duration
                  - entity: sensor.rachio_1_front_yard_north
                    attribute: last_07_days
                    name: 7 Days
                  - entity: sensor.rachio_1_front_yard_north
                    attribute: last_14_days
                    name: 14 Days
  #                - entity: sensor.rachio_1_front_yard_north
  #                  attribute: last_30_days
  #                  name: 30 Days
              - entity: switch.rachio_2_front_beds
                type: custom:multiple-entity-row
                name: Front Beds
                show_state: false
                state_color: true
                icon: mdi:numeric-2-box
                entities:
                  - entity: sensor.rachio_2_front_beds
                    attribute: last_run
                    name: Last Run
                  - entity: sensor.rachio_2_front_beds
                    attribute: duration
                    name: Duration
                  - entity: sensor.rachio_2_front_beds
                    attribute: last_07_days
                    name: 7 Days
                  - entity: sensor.rachio_2_front_beds
                    attribute: last_14_days
                    name: 14 Days
#                  - entity: sensor.rachio_2_front_beds
#                    attribute: last_30_days
#                    name: 30 Days
              - entity: switch.rachio_3_front_yard_street
                type: custom:multiple-entity-row
                name: Front Street
                show_state: false
                state_color: true
                icon: mdi:numeric-3-box
                entities:
                  - entity: sensor.rachio_3_front_yard_street
                    attribute: last_run
                    name: Last Run
                  - entity: sensor.rachio_3_front_yard_street
                    attribute: duration
                    name: Duration
                  - entity: sensor.rachio_3_front_yard_street
                    attribute: last_07_days
                    name: 7 Days
                  - entity: sensor.rachio_3_front_yard_street
                    attribute: last_14_days
                    name: 14 Days
#                  - entity: sensor.rachio_3_front_yard_street
#                    attribute: last_30_days
#                    name: 30 Days
              - entity: switch.rachio_4_front_yard_south
                type: custom:multiple-entity-row
                name: Front South
                show_state: false
                state_color: true
                icon: mdi:numeric-4-box
                entities:
                  - entity: sensor.rachio_4_front_yard_south
                    attribute: last_run
                    name: Last Run
                  - entity: sensor.rachio_4_front_yard_south
                    attribute: duration
                    name: Duration
                  - entity: sensor.rachio_4_front_yard_south
                    attribute: last_07_days
                    name: 7 Days
                  - entity: sensor.rachio_4_front_yard_south
                    attribute: last_14_days
                    name: 14 Days
#                  - entity: sensor.rachio_4_front_yard_south
#                    attribute: last_30_days
#                    name: 30 Days
              - entity: switch.rachio_5_back_yard_south
                type: custom:multiple-entity-row
                name: Back South
                show_state: false
                state_color: true
                icon: mdi:numeric-5-box
                entities:
                  - entity: sensor.rachio_5_back_yard_south
                    attribute: last_run
                    name: Last Run
                  - entity: sensor.rachio_5_back_yard_south
                    attribute: duration
                    name: Duration
                  - entity: sensor.rachio_5_back_yard_south
                    attribute: last_07_days
                    name: 7 Days
                  - entity: sensor.rachio_5_back_yard_south
                    attribute: last_14_days
                    name: 14 Days
#                  - entity: sensor.rachio_5_back_yard_south
#                    attribute: last_30_days
#                    name: 30 Days
              - entity: switch.rachio_6_back_yard_middle_beds
                type: custom:multiple-entity-row
                name: Back Beds
                show_state: false
                state_color: true
                icon: mdi:numeric-6-box
                entities:
                  - entity: sensor.rachio_6_back_yard_middle_beds
                    attribute: last_run
                    name: Last Run
                  - entity: sensor.rachio_6_back_yard_middle_beds
                    attribute: duration
                    name: Duration
                  - entity: sensor.rachio_6_back_yard_middle_beds
                    attribute: last_07_days
                    name: 7 Days
                  - entity: sensor.rachio_6_back_yard_middle_beds
                    attribute: last_14_days
                    name: 14 Days
#                  - entity: sensor.rachio_6_back_yard_middle_beds
#                    attribute: last_30_days
#                    name: 30 Days
              - entity: switch.rachio_7_back_yard_fence
                type: custom:multiple-entity-row
                name: Back Fence
                show_state: false
                state_color: true
                icon: mdi:numeric-7-box
                entities:
                  - entity: sensor.rachio_7_back_yard_fence
                    attribute: last_run
                    name: Last Run
                  - entity: sensor.rachio_7_back_yard_fence
                    attribute: duration
                    name: Duration
                  - entity: sensor.rachio_7_back_yard_fence
                    attribute: last_07_days
                    name: 7 Days
                  - entity: sensor.rachio_7_back_yard_fence
                    attribute: last_14_days
                    name: 14 Days
#                  - entity: sensor.rachio_7_back_yard_fence
#                    attribute: last_30_days
#                    name: 30 Days
              - entity: switch.rachio_8_side_yard_north
                type: custom:multiple-entity-row
                name: Side North
                show_state: false
                state_color: true
                icon: mdi:numeric-8-box
                entities:
                  - entity: sensor.rachio_8_side_yard_north
                    attribute: last_run
                    name: Last Run
                  - entity: sensor.rachio_8_side_yard_north
                    attribute: duration
                    name: Duration
                  - entity: sensor.rachio_8_side_yard_north
                    attribute: last_07_days
                    name: 7 Days
                  - entity: sensor.rachio_8_side_yard_north
                    attribute: last_14_days
                    name: 14 Days
#                  - entity: sensor.rachio_8_side_yard_north
#                    attribute: last_30_days
#                    name: 30 Days
              - entity: switch.rachio_10_pool_filler
                type: custom:multiple-entity-row
                name: Pool Filler
                show_state: false
                state_color: true
              #  icon: mdi:numeric-1-box
                icon: mdi:pool
                entities:
                  - entity: sensor.rachio_10_pool_filler
                    attribute: last_run
                    name: Last Run
                  - entity: sensor.rachio_10_pool_filler
                    attribute: duration
                    name: Duration
                  - entity: sensor.rachio_10_pool_filler
                    attribute: last_07_days
                    name: 7 Days
                  - entity: sensor.rachio_10_pool_filler
                    attribute: last_14_days
                    name: 14 Days
#                  - entity: sensor.rachio_10_pool_filler
#                    attribute: last_30_days
#                    name: 30 Days
              - entity: switch.outlet_solenoid_patio_plants_zb
                type: custom:multiple-entity-row
                name: Back Porch Plants
                show_state: false
                state_color: true
              #  icon: mdi:numeric-1-box
                icon: mdi:sprinkler-variant
                entities:
                  - entity: sensor.outlet_solenoid_patio_plants_zb
                    attribute: last_run
                    name: Last Run
                  - entity: sensor.outlet_solenoid_patio_plants_zb
                    attribute: duration
                    name: Duration
                  - entity: sensor.outlet_solenoid_patio_plants_zb
                    attribute: last_07_days
                    name: 7 Days
                  - entity: sensor.outlet_solenoid_patio_plants_zb
                    attribute: last_14_days
                    name: 14 Days
#                  - entity: sensor.outlet_solenoid_patio_plants_zb
#                    attribute: last_30_days
#                    name: 30 Days
              - type: section
              - entity: input_boolean.rachio_manual_override
                type: custom:multiple-entity-row
                name: Rachio Manual
                card_mod:
                  style: |
                    ha-card { margin: 0 0 -28px !important;}
                show_state: true
                toggle: true
                state_color: true
              #  icon: mdi:numeric-1-box
                icon: mdi:car-shift-pattern
                entities:
                  - entity: sensor.m99_weather_precipitation_0d
                    name: Today
                  - entity: sensor.weatherflow_rain_next_8_hours
                    name: '8h'
                  - entity: sensor.m99_weather_wind_0d
                    name: Wind
                  - entity: input_number.sprinkler_wind_override
                    name: Over

          - type: conditional
            conditions:
              - entity: group.sprinklers_all
                state: 'on'
            card:
              type: custom:auto-entities
              show_empty: false
              card:
                type: entities
                card_mod:
                  style: |
                    ha-card { margin: -25px 0 0 !important;}
                    ha-card #states {
                      margin-bottom: 0px !important;
                      padding-top: 0px !important;
                      padding-bottom: 0px;
                    }
                    #states {
                      margin: 0px 0 !important;
                    }
                    #states > * {
                      margin: 5px 0 !important;
                    }
                show_header_toggle: false
              filter:
                include:
#                  - entity_id: switch.rachio_2_front_beds
                  - domain: sensor
                    state: 'on'
                    label: 'Sprinkler'
  #                  entity_id: '*rachio_*'
  #                  attributes:
  #                    rgb_color: '! none'
                    options:
                      type: custom:stack-in-card
                      mode: horizontal
                      cards:
                        - type: custom:mushroom-template-card
                          primary: >-
                            {% set data = namespace(water=[]) %}
                            {% for zone in states.group.sprinklers_all.attributes.entity_id %}
                              {% if states(zone) == 'on' %}
                                {% set data.water = [zone] %}
                              {% endif %}
                            {% endfor %}
                            {% set ent = data.water.0 %}
                            {% set friendly = state_attr(ent,'friendly_name') %}
                            {% if friendly == 'Outlet - Solenoid - Patio Plants ZB' %}
                              Patio Plants
                            {% else %}{{ friendly }}
                            {% endif %}
                          secondary: >-
                            {{ state_attr('timer.rachio_temp_run','duration')[2:12] }}
                          icon: >-
                            {% set data = namespace(water=[]) %}
                            {% for zone in states.group.sprinklers_all.attributes.entity_id %}
                              {% if states(zone) == 'on' %}
                                {% set data.water = [zone] %}
                              {% endif %}
                            {% endfor %}
                            {% set ent = data.water.0 %}
                            {% set iconn = state_attr(ent,'icon') %}
                            {% set iconn = 'mdi:water-outline' %}
                            {{ iconn }}
                          entity: >-
                            {% set data = namespace(water=[]) %}
                            {% for zone in states.group.sprinklers_all.attributes.entity_id %}
                              {% if states(zone) == 'off' %}
                                {% set data.water = [zone] %}
                              {% endif %}
                            {% endfor %}
                            {% set ent = data.water.0 %}
                          tap_action:
                            action: call-service
                            service: ensure.toggle
                            data:
                              entity_id: group.sprinklers_all
                          hold_action:
                            action: none
                          double_tap_action:
                            action: none
                          icon_color: '#FFC107'
                          card_mod:
                            style: |
                              ha-card { border: none !important; }
                        - type: custom:timer-bar-card
                          layout: full_row
                          bar_background: '#474747'
                          entity: timer.rachio_temp_run

          - type: glance
            show_state: false
            show_name: false
            card_mod:
              style: |
                ha-card {
                  margin-top: -20px;
                }
                .entities {
                  padding-top: 0px !important;
                  padding-bottom: 0px !important;
                }
                .entity {
                  padding-bottom: 0px !important;
                  margin-bottom: 5px !important;
                }
            columns: 5
            entities:
              - entity: input_boolean.rachio_1_front_yard_north
                icon: mdi:numeric-1-box
                tap_action:
                  action: call-service
                  service: input_boolean.toggle
                  service_data:
                    entity_id:
                      - input_boolean.rachio_1_front_yard_north
              - entity: input_boolean.rachio_2_front_beds
                icon: mdi:numeric-2-box
                tap_action:
                  action: call-service
                  service: input_boolean.toggle
                  service_data:
                    entity_id:
                      - input_boolean.rachio_2_front_beds
              - entity: input_boolean.rachio_3_front_yard_street
                icon: mdi:numeric-3-box
                tap_action:
                  action: call-service
                  service: input_boolean.toggle
                  service_data:
                    entity_id:
                      - input_boolean.rachio_3_front_yard_street
              - entity: input_boolean.rachio_4_front_yard_south
                icon: mdi:numeric-4-box
                tap_action:
                  action: call-service
                  service: input_boolean.toggle
                  service_data:
                    entity_id:
                      - input_boolean.rachio_4_front_yard_south
              - entity: input_boolean.rachio_5_back_yard_south
                icon: mdi:numeric-5-box
                tap_action:
                  action: call-service
                  service: input_boolean.toggle
                  service_data:
                    entity_id:
                      - input_boolean.rachio_5_back_yard_south

          - type: glance
            show_state: false
            show_name: false
            card_mod:
              style: |
                ha-card {
                  margin-top: -20px;
                }
                .entities {
                  padding-top: 0px !important;
                  padding-bottom: 0px !important;
                }
                .entity {
                  padding-bottom: 0px !important;
                  margin-bottom: 5px !important;
                }
            columns: 5
            entities:
              - entity: input_boolean.rachio_6_back_yard_middle_beds
                icon: mdi:numeric-6-box
                tap_action:
                  action: call-service
                  service: input_boolean.toggle
                  service_data:
                    entity_id:
                      - input_boolean.rachio_6_back_yard_middle_beds
              - entity: input_boolean.rachio_7_back_yard_fence
                icon: mdi:numeric-7-box
                tap_action:
                  action: call-service
                  service: input_boolean.toggle
                  service_data:
                    entity_id:
                      - input_boolean.rachio_7_back_yard_fence
              - entity: input_boolean.rachio_8_side_yard_north
                icon: mdi:numeric-8-box
                tap_action:
                  action: call-service
                  service: input_boolean.toggle
                  service_data:
                    entity_id:
                      - input_boolean.rachio_8_side_yard_north
              - entity: input_boolean.rachio_10_pool_filler
                icon: mdi:pool
                tap_action:
                  action: call-service
                  service: input_boolean.toggle
                  service_data:
                    entity_id:
                      - input_boolean.rachio_10_pool_filler
              - entity: input_boolean.outlet_solenoid_patio_plants_zb
                icon: mdi:sprinkler-variant
                tap_action:
                  action: call-service
                  service: input_boolean.toggle
                  service_data:
                    entity_id:
                      - input_boolean.outlet_solenoid_patio_plants_zb

          - type: glance
            columns: 3
            show_icon: true
            show_name: false
            card_mod:
              style: |
                ha-card {
                  margin-top: -25px !important;
                  padding-top: 0px !important;
                  margin-bottom: 0px !important;
                  #font-size: 10px;
                  #color: #9da5b4;
                }
                .entities {
                  padding-top: 3px !important;
                }
            entities:
              - entity: group.rachio_sprinklers
              #- entity: script.rachio_sprinkler_temp_run
                name: Rachio Manual Run
                show_state: false
                icon: mdi:play-circle-outline
                tap_action:
                  action: call-service
                  service: script.rachio_sprinkler_temp_run_new
              - entity: input_number.sprinkler_temp_run_time
                name: Temp Run Time
                icon: mdi:clock
                unit: 'mins'
              - entity: input_select.sprinkler_zones
                icon: mdi:format-list-numbered


## END SPRINKLER CARD ##


###### NEW MEDIA CARD ######
  - title: Media
    icon: mdi:music-box-outline
    cards:

    # Show all active media players\
      - type: custom:stack-in-card
        mode: vertical
        card_mod:
          style: |
            .column {
              overflow: hidden;
            }
        cards:
        - type: custom:stack-in-card
          mode: vertical
          cards:
## Kitchen Group
          - type: custom:auto-entities
            show_empty: false
            filter:
              include:
                - entity_id: "media_player.kitchen_group"
                  state: /playing|paused/
                  options:
                    type: custom:mini-media-player
                  #  artwork_border: true
                    artwork: cover
                    group: false
                    hide:
                      icon: true
                      power: true
            card:
              type: entities
              title: ''
              show_header_toggle : false

## Individual Player Cards
          - type: custom:auto-entities
            show_empty: false
            filter:
              exclude:
                - entity_id: "media_player.kitchen_group"
              include:
                - domain: media_player
                  state: /playing|paused/
                  options:
                    type: custom:mini-media-player
                  #  artwork_border: true
                    artwork: cover
                    group: false
                    hide:
                      icon: true
                      power: true
            card:
              type: entities
              title: ''
              show_header_toggle : false

## ROKU TVs
          - type: custom:auto-entities
            show_empty: false
            filter:
              include:
                - domain: media_player
                  entity_id: "*_roku_tv"
                  state: /on/
                  options:
                    type: custom:mini-media-player
                  #  artwork_border: true
                    artwork: cover
                    group: false
                    hide:
                      icon: true
                      power: true
            card:
              type: entities
              title: ''
              show_header_toggle : false

      # Downstairs Speakers Card
        - type: custom:stack-in-card
          mode: vertical
          card_mod:
            style: |
              .column {
                overflow: hidden;
              }
          cards:
          - type: custom:auto-entities
            show_empty: true
            filter:
              include:
                - domain: media_player
                  state: /on|playing|paused/
                  attributes:
                    supported_features: 3468
                    friendly_name: 'Dn*'
                  sort:
                    method: attribute
                    attribute: friendly_name
                  options:
                    type: custom:mini-media-player
                  #  artwork_border: true
                    group: true
                    info: short
                    source: icon
                    #volume_stateless: true
                    hide:
                      name: true
                      controls: true
                      power: true
            card:
              type: entities
              title: Downstairs Speakers
              show_header_toggle : false
              card_mod:
                style: |
                  .card-header {
                    padding-top: 2px;
                    padding-bottom: 2px;
                    margin-bottom: -5px !important;
                  }

          - type: conditional
            conditions:
            - entity: switch.speakers_downstairs_zb
              state: "off"
            card:
              type: entities
              card_mod:
                style: |
                  ha-card #states {
                    margin-bottom: -5px !important;
                    margin-top: -25px !important;
                    padding-top: 15px !important;
                    padding-bottom: 5x !important;
                  }
              entities:
              - entity: switch.speakers_downstairs_zb
                state_color: true
                icon: mdi:speaker
                name: " "
          ## DOWNSTAIRS SPEAKRS ZONE ICONS ##
          - type: conditional
            conditions:
            - entity: switch.speakers_downstairs_zb
              state: "on"
            card:
              type: glance
              card_mod:
                style: |
                  ha-card .entities {
                    margin-bottom: -15px !important;
                    margin-top: 10px !important;
                    padding-top: 0px !important;
                    padding-bottom: 0px;
                  }
              columns: 6
              show_state: false
              entities:
                - entity: switch.htd_outside_couch
                  name: Couch
                  state_color: true
                  icon: mdi:power
                  card_mod:
                    style: |
                      state-badge {
                        margin-top: 0px !important;
                      }
                  tap_action:
                    action: call-service
                    service: ensure.toggle
                    data:
                      entity_id: switch.htd_outside_couch
                - entity: switch.htd_outside_fireplace
                  name: Fire
                  icon: mdi:power
                  card_mod:
                    style: |
                      state-badge {
                        margin-top: 0px !important;
                      }
                  tap_action:
                    action: call-service
                    service: ensure.toggle
                    data:
                      entity_id: switch.htd_outside_fireplace
                - entity: switch.htd_outside_rocks
                  name: Rocks
                  icon: mdi:power
                  card_mod:
                    style: |
                      state-badge {
                        margin-top: 0px !important;
                      }
                  tap_action:
                    action: call-service
                    service: ensure.toggle
                    data:
                      entity_id: switch.htd_outside_rocks
                - entity: switch.htd_kitchen
                  name: Kitch.
                  icon: mdi:power
                  card_mod:
                    style: |
                      state-badge {
                        margin-top: 0px !important;
                      }
                  tap_action:
                    action: call-service
                    service: ensure.toggle
                    data:
                      entity_id: switch.htd_kitchen
                - entity: switch.htd_dining_room
                  name: Dining
                  icon: mdi:power
                  card_mod:
                    style: |
                      state-badge {
                        margin-top: 0px !important;
                      }
                  tap_action:
                    action: call-service
                    service: ensure.toggle
                    data:
                      entity_id: switch.htd_dining_room
                - entity: switch.htd_master_bathroom
                  name: MBath
                  icon: mdi:power
                  card_mod:
                    style: |
                      state-badge {
                        margin-top: 0px !important;
                      }
                  tap_action:
                    action: call-service
                    service: ensure.toggle
                    data:
                      entity_id: switch.htd_master_bathroom
          ## DOWNSTAIRS VOLUME LEVELS ##
          - type: conditional
            conditions:
            - entity: group.speakers_downstairs
              state: "on"
            card:
              type: glance
              card_mod:
                style: |
                  ha-card .entities {
                    margin-bottom: -0px !important;
                    padding-top: 0px !important;
                    padding-bottom: 5px !important;
                  }
              columns: 6
              show_name: false
              show_icon: false
              entities:
                - entity: sensor.htd_outside_couch_vol
                - entity: sensor.htd_outside_fireplace_vol
                - entity: sensor.htd_outside_rocks_vol
                - entity: sensor.htd_kitchen_vol
                - entity: sensor.htd_dining_room_vol
                - entity: sensor.htd_master_bathroom_vol

          - type: conditional
            conditions:
            - entity: media_player.htd_outside_couch
              state: "on"
            card:
              type: entities
              card_mod:
                style: |
                  ha-card { margin-top: -15px; }
              entities:
              - type: custom:multiple-entity-row
                #icon: mdi:border-outside
                card_mod:
                  style:
                    hui-generic-entity-row:
                      $: |
                        state-badge { display: none !important; }
                entity: media_player.htd_outside_couch
                show_state: false
                #secondary_info:
                #  attribute: source
                entities:
                  - attribute: source
                  - icon: mdi:volume-off
                    tap_action:
                      action: call-service
                      service: script.htd_volume_mute
                      service_data:
                        keypad: media_player.htd_outside_couch
                  - icon: mdi:volume-minus
                    tap_action:
                      action: call-service
                      service: script.htd_volume_down
                      service_data:
                        keypad: media_player.htd_outside_couch
                  - icon: mdi:volume-plus
                    tap_action:
                      action: call-service
                      service: script.htd_volume_up
                      service_data:
                        keypad: media_player.htd_outside_couch
#                  - entity: sensor.htd_outside_couch_vol
#                    name: ' '

          - type: conditional
            conditions:
            - entity: media_player.htd_outside_fireplace
              state: "on"
            card:
              type: entities
              card_mod:
                style: |
                  ha-card { margin-top: -30px; }
              entities:
              - type: custom:multiple-entity-row
                card_mod:
                  style:
                    hui-generic-entity-row:
                      $: |
                        state-badge { display: none !important; }
                entity: media_player.htd_outside_fireplace
                show_state: false
                #secondary_info:
                #  attribute: source
                entities:
                  - attribute: source
                  - icon: mdi:volume-off
                    tap_action:
                      action: call-service
                      service: script.htd_volume_mute
                      service_data:
                        keypad: media_player.htd_outside_fireplace
                  - icon: mdi:volume-minus
                    tap_action:
                      action: call-service
                      service: script.htd_volume_down
                      service_data:
                        keypad: media_player.htd_outside_fireplace
                  - icon: mdi:volume-plus
                    tap_action:
                      action: call-service
                      service: script.htd_volume_up
                      service_data:
                        keypad: media_player.htd_outside_fireplace

          - type: conditional
            conditions:
            - entity: media_player.htd_outside_rocks
              state: "on"
            card:
              type: entities
              card_mod:
                style: |
                  ha-card { margin-top: -30px; }
              entities:
              - type: custom:multiple-entity-row
                card_mod:
                  style:
                    hui-generic-entity-row:
                      $: |
                        state-badge { display: none !important; }
                entity: media_player.htd_outside_rocks
                show_state: false
                #secondary_info:
                #  attribute: source
                entities:
                  - attribute: source
                  - icon: mdi:volume-off
                    tap_action:
                      action: call-service
                      service: script.htd_volume_mute
                      service_data:
                        keypad: media_player.htd_outside_rocks
                  - icon: mdi:volume-minus
                    tap_action:
                      action: call-service
                      service: script.htd_volume_down
                      service_data:
                        keypad: media_player.htd_outside_rocks
                  - icon: mdi:volume-plus
                    tap_action:
                      action: call-service
                      service: script.htd_volume_up
                      service_data:
                        keypad: media_player.htd_outside_rocks

          - type: conditional
            conditions:
            - entity: media_player.htd_kitchen
              state: "on"
            card:
              type: entities
              card_mod:
                style: |
                  ha-card { margin-top: -25px; }
              entities:
              - type: custom:multiple-entity-row
                card_mod:
                  style:
                    hui-generic-entity-row:
                      $: |
                        state-badge { display: none !important; }
                entity: media_player.htd_kitchen
                show_state: false
                #secondary_info:
                #  attribute: source
                entities:
                  - attribute: source
                  - icon: mdi:volume-off
                    tap_action:
                      action: call-service
                      service: script.htd_volume_mute
                      service_data:
                        keypad: media_player.htd_kitchen
                  - icon: mdi:volume-minus
                    tap_action:
                      action: call-service
                      service: script.htd_volume_down
                      service_data:
                        keypad: media_player.htd_kitchen
                  - icon: mdi:volume-plus
                    tap_action:
                      action: call-service
                      service: script.htd_volume_up
                      service_data:
                        keypad: media_player.htd_kitchen

          - type: conditional
            conditions:
            - entity: media_player.htd_dining_room
              state: "on"
            card:
              type: entities
              card_mod:
                style: |
                  ha-card { margin-top: -25px; }
              entities:
              - type: custom:multiple-entity-row
                card_mod:
                  style:
                    hui-generic-entity-row:
                      $: |
                        state-badge { display: none !important; }
                entity: media_player.htd_dining_room
                show_state: false
                #secondary_info:
                #  attribute: source
                entities:
                  - attribute: source
                  - icon: mdi:volume-off
                    tap_action:
                      action: call-service
                      service: script.htd_volume_mute
                      service_data:
                        keypad: media_player.htd_dining_room
                  - icon: mdi:volume-minus
                    tap_action:
                      action: call-service
                      service: script.htd_volume_down
                      service_data:
                        keypad: media_player.htd_dining_room
                  - icon: mdi:volume-plus
                    tap_action:
                      action: call-service
                      service: script.htd_volume_up
                      service_data:
                        keypad: media_player.htd_dining_room

          - type: conditional
            conditions:
            - entity: media_player.htd_master_bathroom
              state: "on"
            card:
              type: entities
              card_mod:
                style: |
                  ha-card { margin-top: -25px; }
              entities:
              - type: custom:multiple-entity-row
                card_mod:
                  style:
                    hui-generic-entity-row:
                      $: |
                        state-badge { display: none !important; }
                entity: media_player.htd_master_bathroom
                show_state: false
                #secondary_info:
                #  attribute: source
                entities:
                  - attribute: source
                  - icon: mdi:volume-off
                    tap_action:
                      action: call-service
                      service: script.htd_volume_mute
                      service_data:
                        keypad: media_player.htd_master_bathroom
                  - icon: mdi:volume-minus
                    tap_action:
                      action: call-service
                      service: script.htd_volume_down
                      service_data:
                        keypad: media_player.htd_master_bathroom
                  - icon: mdi:volume-plus
                    tap_action:
                      action: call-service
                      service: script.htd_volume_up
                      service_data:
                        keypad: media_player.htd_master_bathroom

      # END Downstairs Speakers Card #

        # PLACEHOLDER / SPACER ONLY
        - type: glance
          show_name: false
          show_state: false
          show_icon: false
          card_mod:
            style: |
              ha-card {
                height: 10px !important;
              }
          entities:
            - entity: script.do_nothing

      # Upstairs Speakers Card
        - type: custom:stack-in-card
          mode: vertical
          card_mod:
            style: |
              .column {
                overflow: hidden;
              }
          cards:
          - type: custom:auto-entities
            show_empty: true
            filter:
              include:
                - domain: media_player
                  state: /on|playing|paused/
                  attributes:
                    supported_features: 3468
                    friendly_name: 'Up*'
                  sort:
                    method: attribute
                    attribute: friendly_name
                  options:
                    type: custom:mini-media-player
                  #  artwork_border: true
                    group: true
                    info: short
                    source: icon
                    #volume_stateless: true
                    hide:
                      name: true
                      controls: true
                      power: true
            card:
              type: entities
              title: Upstairs Speakers
              show_header_toggle : false
              card_mod:
                style: |
                  .card-header {
                    padding-top: 2px;
                    padding-bottom: 2px;
                    margin-bottom: -5px !important;
                  }

          - type: conditional
            conditions:
            - entity: switch.speakers_upstairs_zb
              state: "off"
            card:
              type: entities
              card_mod:
                style: |
                  ha-card #states {
                    margin-bottom: -5px !important;
                    margin-top: -25px !important;
                    padding-top: 15px !important;
                    padding-bottom: 5x !important;
                  }
              entities:
              - entity: switch.speakers_upstairs_zb
                state_color: true
                icon: mdi:speaker
                name: " "
          ## Upstairs SPEAKRS ZONE ICONS ##
          - type: conditional
            conditions:
            - entity: switch.speakers_upstairs_zb
              state: "on"
            card:
              type: glance
              card_mod:
                style: |
                  ha-card .entities {
                    margin-bottom: -15px !important;
                    margin-top: 10px !important;
                    padding-top: 0px !important;
                    padding-bottom: 0px;
                  }
              columns: 5
              show_state: false
              entities:
                - entity: switch.htd_pool_table_room
                  name: PoolTbl
                  state_color: true
                  icon: mdi:power
                  card_mod:
                    style: |
                      state-badge {
                        margin-top: 0px !important;
                      }
                  tap_action:
                    action: call-service
                    service: ensure.toggle
                    data:
                      entity_id: switch.htd_pool_table_room
                - entity: switch.htd_aubrey_s_room
                  name: Aubrey
                  icon: mdi:power
                  card_mod:
                    style: |
                      state-badge {
                        margin-top: 0px !important;
                      }
                  tap_action:
                    action: call-service
                    service: ensure.toggle
                    data:
                      entity_id: switch.htd_aubrey_s_room
                - entity: switch.htd_jonas_room
                  name: Jonas
                  icon: mdi:power
                  card_mod:
                    style: |
                      state-badge {
                        margin-top: 0px !important;
                      }
                  tap_action:
                    action: call-service
                    service: ensure.toggle
                    data:
                      entity_id: switch.htd_jonas_room
                - entity: switch.htd_office
                  name: Office
                  icon: mdi:power
                  card_mod:
                    style: |
                      state-badge {
                        margin-top: 0px !important;
                      }
                  tap_action:
                    action: call-service
                    service: ensure.toggle
                    data:
                      entity_id: switch.htd_office
                - entity: switch.htd_workout_room
                  name: Workout
                  icon: mdi:power
                  card_mod:
                    style: |
                      state-badge {
                       margin-top: 0px !important;
                      }
                  tap_action:
                    action: call-service
                    service: ensure.toggle
                    data:
                      entity_id: switch.htd_workout_room

          ## Upstairs VOLUME LEVELS ##
          - type: conditional
            conditions:
            - entity: group.speakers_upstairs
              state: "on"
            card:
              type: glance
              card_mod:
                style: |
                  ha-card .entities {
                    margin-bottom: -0px !important;
                    padding-top: 0px !important;
                    padding-bottom: 5px !important;
                  }
              columns: 5
              show_name: false
              show_icon: false
              entities:
                - entity: sensor.htd_pool_table_room_vol
                - entity: sensor.htd_aubrey_s_room_vol
                - entity: sensor.htd_jonas_room_vol
                - entity: sensor.htd_office_vol
                - entity: sensor.htd_workout_room_vol

          - type: conditional
            conditions:
            - entity: media_player.htd_pool_table_room
              state: "on"
            card:
              type: entities
              card_mod:
                style: |
                  ha-card { margin-top: -15px; }
              entities:
              - type: custom:multiple-entity-row
                #icon: mdi:border-outside
                card_mod:
                  style:
                    hui-generic-entity-row:
                      $: |
                        state-badge { display: none !important; }
                entity: media_player.htd_pool_table_room
                show_state: false
                #secondary_info:
                #  attribute: source
                entities:
                  - attribute: source
                  - icon: mdi:volume-off
                    tap_action:
                      action: call-service
                      service: script.htd_volume_mute
                      service_data:
                        keypad: media_player.htd_pool_table_room
                  - icon: mdi:volume-minus
                    tap_action:
                      action: call-service
                      service: script.htd_volume_down
                      service_data:
                        keypad: media_player.htd_pool_table_room
                  - icon: mdi:volume-plus
                    tap_action:
                      action: call-service
                      service: script.htd_volume_up
                      service_data:
                        keypad: media_player.htd_pool_table_room
#                  - entity: sensor.htd_pool_table_room_vol
#                    name: ' '

          - type: conditional
            conditions:
            - entity: media_player.htd_aubrey_s_room
              state: "on"
            card:
              type: entities
              card_mod:
                style: |
                  ha-card { margin-top: -30px; }
              entities:
              - type: custom:multiple-entity-row
                card_mod:
                  style:
                    hui-generic-entity-row:
                      $: |
                        state-badge { display: none !important; }
                entity: media_player.htd_aubrey_s_room
                show_state: false
                #secondary_info:
                #  attribute: source
                entities:
                  - attribute: source
                  - icon: mdi:volume-off
                    tap_action:
                      action: call-service
                      service: script.htd_volume_mute
                      service_data:
                        keypad: media_player.htd_aubrey_s_room
                  - icon: mdi:volume-minus
                    tap_action:
                      action: call-service
                      service: script.htd_volume_down
                      service_data:
                        keypad: media_player.htd_aubrey_s_room
                  - icon: mdi:volume-plus
                    tap_action:
                      action: call-service
                      service: script.htd_volume_up
                      service_data:
                        keypad: media_player.htd_aubrey_s_room

          - type: conditional
            conditions:
            - entity: media_player.htd_jonas_room
              state: "on"
            card:
              type: entities
              card_mod:
                style: |
                  ha-card { margin-top: -30px; }
              entities:
              - type: custom:multiple-entity-row
                card_mod:
                  style:
                    hui-generic-entity-row:
                      $: |
                        state-badge { display: none !important; }
                entity: media_player.htd_jonas_room
                show_state: false
                #secondary_info:
                #  attribute: source
                entities:
                  - attribute: source
                  - icon: mdi:volume-off
                    tap_action:
                      action: call-service
                      service: script.htd_volume_mute
                      service_data:
                        keypad: media_player.htd_jonas_room
                  - icon: mdi:volume-minus
                    tap_action:
                      action: call-service
                      service: script.htd_volume_down
                      service_data:
                        keypad: media_player.htd_jonas_room
                  - icon: mdi:volume-plus
                    tap_action:
                      action: call-service
                      service: script.htd_volume_up
                      service_data:
                        keypad: media_player.htd_jonas_room

          - type: conditional
            conditions:
            - entity: media_player.htd_office
              state: "on"
            card:
              type: entities
              card_mod:
                style: |
                  ha-card { margin-top: -25px; }
              entities:
              - type: custom:multiple-entity-row
                card_mod:
                  style:
                    hui-generic-entity-row:
                      $: |
                        state-badge { display: none !important; }
                entity: media_player.htd_office
                show_state: false
                #secondary_info:
                #  attribute: source
                entities:
                  - attribute: source
                  - icon: mdi:volume-off
                    tap_action:
                      action: call-service
                      service: script.htd_volume_mute
                      service_data:
                        keypad: media_player.htd_office
                  - icon: mdi:volume-minus
                    tap_action:
                      action: call-service
                      service: script.htd_volume_down
                      service_data:
                        keypad: media_player.htd_office
                  - icon: mdi:volume-plus
                    tap_action:
                      action: call-service
                      service: script.htd_volume_up
                      service_data:
                        keypad: media_player.htd_office

          - type: conditional
            conditions:
            - entity: media_player.htd_workout_room
              state: "on"
            card:
              type: entities
              card_mod:
                style: |
                  ha-card { margin-top: -25px; }
              entities:
              - type: custom:multiple-entity-row
                card_mod:
                  style:
                    hui-generic-entity-row:
                      $: |
                       state-badge { display: none !important; }
                entity: media_player.htd_workout_room
                show_state: false
                #secondary_info:
                #  attribute: source
                entities:
                  - attribute: source
                  - icon: mdi:volume-off
                    tap_action:
                      action: call-service
                      service: script.htd_volume_mute
                      service_data:
                        keypad: media_player.htd_workout_room
                  - icon: mdi:volume-minus
                    tap_action:
                      action: call-service
                      service: script.htd_volume_down
                      service_data:
                        keypad: media_player.htd_workout_room
                  - icon: mdi:volume-plus
                    tap_action:
                      action: call-service
                      service: script.htd_volume_up
                      service_data:
                        keypad: media_player.htd_workout_room

      # END Upstairs Speakers Card #

      - type: vertical-stack
        card_mod:
          style: |
            .column {
              overflow: hidden;
            }
        cards:

          # Google Homes
          - type: custom:auto-entities
            card:
              type: custom:fold-entity-row
              head:
                type: section
                card_mod:
                  style: |
                    .label {
                      color: #DADADB !important;
                      margin-top: 19px !important;
                      margin-bottom: 4px !important;
                      margin-right: 0px !important;
                    }
                label: Google Homes
            filter:
              include:
                - domain: media_player
                  entity_id: '*_google'
                  attributes:
                    supported_features: '>21000'
                  sort:
                    method: attribute
                    attribute: friendly_name
                  options:
                    type: custom:mini-media-player
                    group: true
                    show_tts: google
                    artwork: cover
                    source: icon
                    power_color: true
                    scroll_info: true
          # Rokus
          - type: custom:auto-entities
            card:
              type: custom:fold-entity-row
              head:
                type: section
                card_mod:
                  style: |
                    div.label {
                      color: #DADADB !important;
                      margin-top: 19px !important;
                      margin-bottom: 4px !important;
                    }
                label: Rokus
            filter:
              exclude:
                - state: /unavailable/
              include:
                - domain: media_player
                  entity_id: '*roku_*'
                  sort:
                    method: attribute
                    attribute: friendly_name
                  options:
                    type: custom:mini-media-player
                    idle: when_idle
                    group: true
                    show_tts: google
                    hide:
                      volume: true
                      info: true
                      controls: true
                    power_color: true
                    scroll_info: true
          # Chromecasts
          - type: custom:auto-entities
            card:
              type: custom:fold-entity-row
              head:
                type: section
                card_mod:
                  style: |
                    .label {
                      color: #DADADB !important;
                      margin-top: 19px !important;
                      margin-bottom: 4px !important;
                    }
                label: Chromecasts
            filter:
              exclude:
                - state: /unavailable/
              include:
                - domain: media_player
                  entity_id: '*chromecast*'
                  sort:
                    method: attribute
                    attribute: friendly_name
                  options:
                   type: custom:mini-media-player
                   group: true
                   show_tts: google
                   artwork: cover
                   power_color: true
                   scroll_info: true
          # HTD Zones (ALL)
          - type: custom:auto-entities
            card:
              type: custom:fold-entity-row
              head:
                type: section
                card_mod:
                  style: |
                    .label {
                      color: #DADADB !important;
                      margin-top: 19px !important;
                      margin-bottom: 4px !important;
                    }
                label: HTD Zones (ALL)
            filter:
              exclude:
                - entity_id: 'media_player.htd_unused'
              include:
                - domain: media_player
                  entity_id: '*htd*'
                  attributes:
                    supported_features: 3468
                  sort:
                    method: attribute
                    attribute: friendly_name
                  options:
                    type: custom:mini-media-player
                    group: true
                    show_tts: google
                    artwork: cover
                    source: icon
                    power_color: true
                    scroll_info: true

          # HTD Zones (ALL)
          - type: custom:auto-entities
            card:
              type: custom:fold-entity-row
              head:
                type: section
                card_mod:
                  style: |
                    .label {
                      color: #DADADB !important;
                      margin-top: 19px !important;
                      margin-bottom: 4px !important;
                    }
                label: HTD Zones (Upstairs)
            filter:
              exclude:
                - entity_id: 'media_player.htd_unused'
                - entity_id: 'media_player.htd_dining_room'
                - entity_id: 'media_player.htd_kitchen'
                - entity_id: 'media_player.htd_master_bathroom'
                - entity_id: 'media_player.htd_outside_couch'
                - entity_id: 'media_player.htd_outside_fireplace'
                - entity_id: 'media_player.htd_outside_rocks'
              include:
                - domain: media_player
                  entity_id: '*htd*'
                  attributes:
                    supported_features: 3468
                  sort:
                    method: attribute
                    attribute: friendly_name
                  options:
                    type: custom:mini-media-player
                    group: true
                    show_tts: google
                    artwork: cover
                    source: icon
                    power_color: true
                    scroll_info: true

          # HTD Zones (ALL)
          - type: custom:auto-entities
            card:
              type: custom:fold-entity-row
              head:
                type: section
                card_mod:
                  style: |
                    .label {
                      color: #DADADB !important;
                      margin-top: 19px !important;
                      margin-bottom: 4px !important;
                    }
                label: HTD Zones (Downstairs)
            filter:
              exclude:
                - entity_id: 'media_player.htd_unused'
                - entity_id: 'media_player.htd_aubrey_s_room'
                - entity_id: 'media_player.htd_jonas_room'
                - entity_id: 'media_player.htd_pool_table_room'
                - entity_id: 'media_player.htd_workout_room'
                - entity_id: 'media_player.htd_office'
              include:
                - domain: media_player
                  entity_id: '*htd*'
                  attributes:
                    supported_features: 3468
                  sort:
                    method: attribute
                    attribute: friendly_name
                  options:
                    type: custom:mini-media-player
                    group: true
                    show_tts: google
                    artwork: cover
                    source: icon
                    power_color: true
                    scroll_info: true

#          # HTD Zones (ON)
#          - type: custom:auto-entities
#            card:
#              type: custom:fold-entity-row
#              head:
#                type: section
#                style: |
#                  .label {
#                    color: #DADADB !important;
#                    margin-top: 19px !important;
#                    margin-bottom: 4px !important;
#                  }
#                label: HTD Zones (ON)
#            filter:
#              exclude:
#                - entity_id: 'media_player.htd_unused'
#              include:
#                - domain: media_player
#                  entity_id: '*htd*'
#                  state: "on"
#                  attributes:
#                    supported_features: 3468
#                  sort:
#                    method: attribute
#                    attribute: friendly_name
#                  options:
#                    type: custom:mini-media-player
#                    group: true
#                    show_tts: google
#                    artwork: cover
#                    source: icon
#                    power_color: true
#                    scroll_info: true
#                    icon: ""

###### END MEDIA CARD ######

###### CAMERAS CARD ######
  - title: Camera
    icon: mdi:video-outline
    columns: 2
    cards:
## OLD CAMS ##
    - type: vertical-stack
      cards:
#        - type: picture-entity
#          name: Front Door
#          entity: camera.front_door
#          camera_image: camera.front_door
#          show_name: true
#          show_state: false
#        - type: 'custom:webrtc-camera'
#          url: 'rtsp://admin:000111@192.168.20.30/cam/realmonitor?channel=3&subtype=0'
#        - type: 'custom:webrtc-camera'
#          url: 'rtsp://admin:000111@192.168.20.30/cam/realmonitor?channel=4&subtype=0'
#        - type: 'custom:webrtc-camera'
#          url: 'rtsp://admin:000111@192.168.20.30/cam/realmonitor?channel=6&subtype=0'
#        - type: 'custom:webrtc-camera'
#          url: 'rtsp://admin:000111@192.168.20.30/cam/realmonitor?channel=7&subtype=0'
        - type: picture-entity
          name: Front Drive
          entity: camera.unifi_g5_driveway_front_high
          camera_image: camera.unifi_g5_driveway_front_high
          show_name: false
          show_state: false
        - type: picture-entity
          name: Driveway Gate
          entity: camera.unifi_g5_driveway_gate_high
          camera_image: camera.unifi_g5_driveway_gate_high
          show_name: false
          show_state: false
        - type: picture-entity
          name: Front Door
          entity: camera.unifi_g4_front_doorbell_high
          camera_image: camera.unifi_g4_front_doorbell_high
          card_mod:
            style: |
              ha-card {
                max-height: 278px !important;
              }
          show_name: false
          show_state: false
        - type: picture-entity
          name: Pool
          entity: camera.unifi_g5_pool_high
          camera_image: camera.unifi_g5_pool_high
          show_name: false
          show_state: false
        - type: picture-entity
          name: Back Patio
          entity: camera.unifi_g5_back_patio_high
          camera_image: camera.unifi_g5_back_patio_high
          show_name: false
          show_state: false

        - type: picture-entity
          name: Kitchen
          entity: camera.g4_instant_high_resolution_channel
          camera_image: camera.g4_instant_high_resolution_channel
          show_name: false
          show_state: false



    - type: vertical-stack
      cards:
#       - type: 'custom:webrtc-camera'
#          url: 'rtsp://admin:000111@192.168.20.30/cam/realmonitor?channel=2&subtype=0'
#        - type: 'custom:webrtc-camera'
#          url: 'rtsp://admin:000111@192.168.20.30/cam/realmonitor?channel=1&subtype=0'
#        - type: 'custom:webrtc-camera'
#          url: 'rtsp://admin:000111@192.168.20.30/cam/realmonitor?channel=5&subtype=0'
#        - type: 'custom:webrtc-camera'
#          url: 'rtsp://admin:000111@192.168.20.30/cam/realmonitor?channel=8&subtype=0'
        - type: picture-entity
          name: Front Walk
          entity: camera.unifi_g5_front_sidewalk_high
          camera_image: camera.unifi_g5_front_sidewalk_high
          show_name: false
          show_state: false
        - type: picture-entity
          name: Driveway Door
          entity: camera.unifi_g5_driveway_door_high
          camera_image: camera.unifi_g5_driveway_door_high
          show_name: false
          show_state: false
        - type: picture-entity
          name: Side Yard
          entity: camera.unifi_g5_side_yard_high
          camera_image: camera.unifi_g5_side_yard_high
          show_name: false
          show_state: false
        - type: picture-entity
          name: Back Fireplace
          entity: camera.unifi_g5_back_yard_high
          camera_image: camera.unifi_g5_back_fireplace_high
          show_state: false
          show_name: false
        - type: picture-entity
          name: Back Fireplace
          entity: camera.unifi_g5_back_fireplace_high
          camera_image: camera.unifi_g5_back_fireplace_high
          show_state: false
          show_name: false
        - type: picture-entity
          name: Back Grill
          entity: camera.unifi_g5_pool_bath_high
          camera_image: camera.unifi_g5_pool_bath_high
          show_state: false
          show_name: false
        - type: picture-entity
          name: 3D Printer
          entity: camera.octoprint
          camera_image: camera.octoprint
          show_name: false
          show_state: false


###### END CAMERA CARD ######

###### MISC CARD #######
  - title: main
    icon: mdi:floor-plan
    #icon: mdi:apps
    columns: 2
    cards:
      - type: vertical-stack
        cards:
        - type: glance
          show_state: true
          show_name: true
          columns: 5
          entities:
            - entity: binary_sensor.roku_tv_game_room_left_helper
              name: TV Left
              icon: mdi:television-box
            - entity: binary_sensor.xbox_one_s
              name: XBox S
              icon: mdi:microsoft-xbox
            - entity: binary_sensor.ping_xbox_series_x
              name: XBox X
              icon: mdi:microsoft-xbox
            - entity: binary_sensor.roku_tv_game_room_right_helper
              name: TV Right
              icon: mdi:television-box
            - entity: switch.outlet_xbox_one_s_zb
              name: XBox Sw
              icon: mdi:power-socket-us
            ## Row 2
            ## ROW 2
            - entity: switch.outlet_coffee_maker_zb
              name: Gaggia
            - entity: switch.outlet_subwoofer_left_zw
              name: SW Left
            - entity: switch.outlet_subwoofer_right_zw
              name: SW Right
            - entity: binary_sensor.subwoofer_light_blinking_helper
              name: Blinking
            - entity: sensor.subwoofer_light_sensor_variance_1m
              name: StdDev

      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            primary: "{{ states('sensor.game_room_fan_level_helper') }}"
            secondary: ''
            icon: "mdi:calculator"
            layout: vertical
            entity: sensor.game_room_fan_level_helper
          - type: custom:mushroom-template-card
            primary: "{{ state_attr('fan.game_room_downstairs','percentage') }}"
            secondary: ''
            icon: "mdi:fan"
            icon_color: >-
              {% if is_state('fan.game_room_downstairs','on') %} #FFC107
              {% else %} #44739E
              {% endif %}
            layout: vertical
            entity: fan.game_room_downstairs


      - type: glance
        columns: 5
        show_name: false
        entities:
          - entity: input_number.6900_upstairs_hvac_on_threshold
            icon: mdi:pound
          - entity: sensor.golf_room_sensor_trend_gradient
            name: Gradient
            icon: mdi:gradient-vertical
#          - entity: sensor.6900_upstairs_temp
#            icon: mdi:thermometer-chevron-up
#          - entity: sensor.golf_room_zw_air_temperature
#            icon: mdi:thermometer-lines
          - entity: sensor.golf_room_sensor_trend_threshold
            icon: mdi:thermometer-lines
          - entity: binary_sensor.golf_fan_sb
            name: Should Be
            icon: mdi:calculator
          - entity: sensor.6900_upstairs_hvac_action
            name: Up HVAC
            icon: mdi:thermostat
          - entity: media_player.roku_upstairs_tv_room
            name: Roku
            icon: mdi:television-play
          - entity: binary_sensor.xbox_360
            name: XBox 360
            icon: mdi:microsoft-xbox-controller
          - entity: binary_sensor.pc_predator
            name: PC
            icon: mdi:desktop-classic
          - entity: binary_sensor.golf_room_activity
            name: Activity
            icon: mdi:equal-box
          - entity: switch.fan_golf_room_zw
            name: Golf Fan
            icon: mdi:fan

      - type: glance
        title: AdGuard
        columns: 4
        card_mod:
          style: |
            .card-header {
              padding-top: 7px;
              padding-bottom: 7px;
              font-size: 20px;
              margin-bottom: -15px;
            }
            .entity {
              margin-bottom: 0px !important;

            }
            .entities {
              margin-top: -20px;
              padding-bottom: 15px !important;
            }
        show_name: false
        entities:
          - entity: switch.adguard_home_protection
            name: Protection
            tap_action:
              action: call-service
              service: ensure.toggle
              data:
                entity_id: switch.adguard_home_protection
          - entity: sensor.adguard_home_average_processing_speed
            name: Proc. Speed
          - entity: sensor.adguard_home_dns_queries_blocked_ratio
            name: Blocked %
          - entity: sensor.adguard_home_dns_queries
            name: Queries

#      - type: custom:mini-graph-card
#        name: Golf Room Temp Gradient (2h)
#        entities:
#          - entity: sensor.golf_room_sensor_trend_gradient
#        line_width: 3
#        hours_to_show: 2
#        points_per_hour: 120
#        decimals: 4



      - type: vertical-stack
        cards:
        - type: glance
          title: ''
          columns: 3
          card_mod:
            style: |
              ha-card {
                font-size: 20px;
                color: #9c9c9c;
              }
          show_name: true
          show_state: false
          show_icon: false
          entities:
            - entity: sensor.google_alarms_aubrey
              name: 'Alarms'
            - entity: sensor.google_alarms_aubrey
              name: 'Aubrey'
            - entity: sensor.google_alarms_jonas
              name: 'Jonas'
        - type: glance
          title: ''
          columns: 3
          card_mod:
            style: |
              ha-card {
                margin-top: -21px;
              }
          show_name: false
          show_state: true
          show_icon: false
          entities:
            - entity: sensor.google_alarms_mon
            - entity: sensor.google_alarms_aubrey_mon
            - entity: sensor.google_alarms_jonas_mon

            - entity: sensor.google_alarms_tue
            - entity: sensor.google_alarms_aubrey_tue
            - entity: sensor.google_alarms_jonas_tue

            - entity: sensor.google_alarms_wed
            - entity: sensor.google_alarms_aubrey_wed
            - entity: sensor.google_alarms_jonas_wed

            - entity: sensor.google_alarms_thu
            - entity: sensor.google_alarms_aubrey_thu
            - entity: sensor.google_alarms_jonas_thu

            - entity: sensor.google_alarms_fri
            - entity: sensor.google_alarms_aubrey_fri
            - entity: sensor.google_alarms_jonas_fri

            - entity: sensor.google_alarms_sat
            - entity: sensor.google_alarms_aubrey_sat
            - entity: sensor.google_alarms_jonas_sat

            - entity: sensor.google_alarms_sun
            - entity: sensor.google_alarms_aubrey_sun
            - entity: sensor.google_alarms_jonas_sun



### OUTSIDE SCREENS
      - type: vertical-stack
        name: Outside Screens
        cards:
          - type: entities
            name: Outside Screens
            entities:
              - entity: cover.outside_fireplace_screen
                type: custom:multiple-entity-row
                name: false
                show_state: false
                state_color: false
                icon: mdi:fireplace
                entities:
                  - icon: mdi:arrow-up-bold-box-outline
                    state_color: false
                    tap_action:
                      action: call-service
                      service: cover.open_cover
                      service_data:
                        entity_id: cover.outside_fireplace_screen
                  - icon: mdi:square-medium
                    state_color: false
                    tap_action:
                      action: call-service
                      service: cover.stop_cover
                      service_data:
                        entity_id: cover.outside_fireplace_screen
                  - icon: mdi:arrow-down-bold-box-outline
                    state_color: false
                    tap_action:
                      action: call-service
                      service: cover.close_cover
                      service_data:
                        entity_id: cover.outside_fireplace_screen
                  - icon: mdi:chevron-down
                    state_color: false
                    tap_action:
                      action: call-service
                      service: cover.set_cover_position
                      service_data:
                        entity_id: cover.outside_fireplace_screen
                        position: 75
                  - icon: mdi:chevron-double-down
                    state_color: false
                    tap_action:
                      action: call-service
                      service: cover.set_cover_position
                      service_data:
                        entity_id: cover.outside_fireplace_screen
                        position: 60
                  - icon: mdi:chevron-triple-down
                    state_color: false
                    tap_action:
                      action: call-service
                      service: cover.set_cover_position
                      service_data:
                        entity_id: cover.outside_fireplace_screen
                        position: 45
#                  - entity: cover.outside_fireplace_screen
#                    attribute: current_position
#                    name: '% Up'
                  - entity: sensor.outside_fireplace_screen_closed_helper
                    name: 'Open'

              - entity: cover.outside_main_screen
                type: custom:multiple-entity-row
                name: false
                show_state: false
                state_color: false
                icon: mdi:sofa-outline
                entities:
                  - icon: mdi:arrow-up-bold-box-outline
                    state_color: false
                    tap_action:
                      action: call-service
                      service: cover.open_cover
                      service_data:
                        entity_id: cover.outside_main_screen
                  - icon: mdi:square-medium
                    state_color: false
                    tap_action:
                      action: call-service
                      service: cover.stop_cover
                      service_data:
                        entity_id: cover.outside_main_screen
                  - icon: mdi:arrow-down-bold-box-outline
                    state_color: false
                    tap_action:
                      action: call-service
                      service: cover.close_cover
                      service_data:
                        entity_id: cover.outside_main_screen
                  - icon: mdi:chevron-down
                    state_color: false
                    tap_action:
                      action: call-service
                      service: cover.set_cover_position
                      service_data:
                        entity_id: cover.outside_main_screen
                        position: 75
                  - icon: mdi:chevron-double-down
                    state_color: false
                    tap_action:
                      action: call-service
                      service: cover.set_cover_position
                      service_data:
                        entity_id: cover.outside_main_screen
                        position: 60
                  - icon: mdi:chevron-triple-down
                    state_color: false
                    tap_action:
                      action: call-service
                      service: cover.set_cover_position
                      service_data:
                        entity_id: cover.outside_main_screen
                        position: 45
#                  - entity: cover.outside_main_screen
#                    attribute: current_position
#                    name: '% Up'
                  - entity: sensor.outside_main_screen_closed_helper
                    name: 'Open'

      - type: horizontal-stack
        cards:
#        - type: markdown
#          style: |
#            .no-header {
#              padding-top: 1px !important;
#              padding-bottom: 5px !important;
#              text-align: center;
#              vertical-align: 30%;
#            }
#            ha-card {
#              box-shadow: none;
#
#            }
#          content: 'Hibiscus Moisture'
        - type: glance
          show_state: false
          show_icon: false
          card_mod:
            style:
              .entities .entity:
                $: |
                  .name {
                    text-overflow: unset !important;
                    white-space: unset !important;
                    margin-bottom: 0px !important;
                    vertical-align: middle !important;
                    padding-top: 0px;
                    padding-bottom: 0px;
                  }
                  ha-card {
                    vertical-align: middle !important; }
          entities:
            - entity: sensor.ercot_reserves
              name: TX ERCOT Electrical Grid Operating Reserves
        - type: gauge
          card_mod:
            style: |
              ha-card {
                vertical-align: middle !important;
                padding: 4px 15% 2px 15% !important;
              }
          entity: sensor.ercot_reserves
          needle: true
          min: 1
          max: 8000
          segments:
            - from: 1
              color: '#222'
            - from: 1000
              color: '#f30229'
            - from: 1750
              color: '#FFA500'
            - from: 2300
              color: '#ffc107'
            - from: 2900
              color: '#41b552'
            - from: 3500
              color: '#25952d'
          name: ''
          unit: MW

      - type: custom:mini-graph-card
        name: Internet Speed (48h)
        card_mod:
          style: |
            .info.flex {
              display: none;
            }
        entities:
          - entity: sensor.fast_com_download
            name: Fast.com
#            - entity: sensor.speedtest_download
#              name: Speedtest.net
        line_width: 3
        lower_bound: 50
        upper_bound: 250
        hours_to_show: 48
        decimals: 0
        font_size: 80
        icon: mdi:speedometer
        show:
#             labels: true
          #icon: false
          #name: false
        color_thresholds:
          - value: 200
            color: "#4c709d" #blue
          - value: 50
            color: '#FFF'
#             - value: 100
#               color: "#58848C"
#             - value: 150
#               color: "#87895E"

      - type: custom:mini-graph-card
        name: Golf Room Temp Sensor (2h)
        entities:
          - entity: sensor.golf_room_zw_air_temperature
        line_width: 3
        line_color: '#f7dd3e'
        hours_to_show: 2
        points_per_hour: 60
        decimals: 1
        show:
          icon: false

      - type: picture-glance
        title: DFW Weather Radar
        name: DFW Weather Radar
        entities: []
        camera_image: camera.radar_weather_gov

      - type: glance
        title: Tile Trackers
        columns: 4
        card_mod:
          style: |
            .card-header {
              padding-top: 7px;
              margin-bottom: -10px;
            }
        show_name: true
        icon_color: false
        entities:
          - entity: device_tracker.tile_marks_luggage
            icon: mdi:bag-suitcase-outline
          - entity: device_tracker.tile_ambers_bag
            icon: mdi:bag-suitcase-outline
          - entity: device_tracker.tile_aubreys_bag
            icon: mdi:bag-suitcase-outline
          - entity: device_tracker.tile_jonas_bag
            icon: mdi:bag-suitcase-outline

#          - entity: device_tracker.tile_porsche_cayenne_gts
#            name: Cayenne GTS
#            icon: mdi:car-outline
          - entity: device_tracker.tile_marks_golf_clubs
            name: Mark's Clubs
            icon: mdi:golf
          - entity: device_tracker.tile_jonas_bike
            name: Jonas Bike
            icon: mdi:bike

      - type: vertical-stack
        name: AirTag Trackers
        cards:
        - type: glance
          title: AirTag Trackers
          columns: 4
          card_mod:
            style: |
              .card-header {
                padding-top: 7px;
                margin-bottom: -10px;
              }
          show_name: true
          icon_color: false
          entities:
            - entity: device_tracker.findmy_f9a2fe5b55bf46d6b6bcd5d9375e5464
              name: Dad
            - entity: device_tracker.findmy_f13967403dbe461082a24088b6e5df67
              name: Mom
            - entity: device_tracker.findmy_0bc668d9b2dd4c279923787722b131a2
              name: Aubrey
            - entity: device_tracker.findmy_33cc16d575464f11bd4ccb1b4db1c773
#              name: Jonas
              name: Aubrey

            - entity: device_tracker.findmy_e4f1a6c15fe8414386e398795ca73520
              name: Jonas
            - entity: device_tracker.findmy_a088878164e54ff992d94340c3509d62
              name: XC90
            - entity: device_tracker.findmy_c2fab81601794087a84482708dfb077c
              name: '911'
            - entity: device_tracker.findmy_697852d81d6f4fd8939bc71b35ad141e
#              name: Dad
              name: Mom

        - type: map
          aspect_ratio: 16:9
          default_zoom: 8
          auto_fit: true
          entities:
            - device_tracker.findmy_0bc668d9b2dd4c279923787722b131a2 #Aubrey Suitcase
            - device_tracker.findmy_33cc16d575464f11bd4ccb1b4db1c773 #Jonas Suitcase
            - device_tracker.findmy_f13967403dbe461082a24088b6e5df67 #Mom Suitcase
#            - device_tracker.findmy_f9a2fe5b55bf46d6b6bcd5d9375e5464 #Dad Suitcase
            - device_tracker.findmy_697852d81d6f4fd8939bc71b35ad141e #Dad Backpack

      - type: vertical-stack
        name: Fingerprints
        cards:
          - type: glance
            title: Fingerprint Sensor
            columns: 3
            card_mod:
              style: |
                .card-header {
                  padding-top: 7px;
                  margin-bottom: -10px;
                }
            show_name: true
            icon_color: false
            entities:
              - entity: sensor.garage_fingerprint_state
                name: Status
              - entity: sensor.garage_fingerprint_last_finger_id
                name: Last ID
                icon: mdi:card-account-details-outline
              - entity: sensor.garage_fingerprint_person
                name: Last Person
                icon: mdi:emoticon-cool-outline

          - type: entities
            card_mod:
              style: |
                .card-content {
                  padding: 5px 15px;
                  margin: 0px;
                }
            entities:
              - entity: input_text.garage_fingerprint_1
                show_icon: false

#          - type: entities
#            style: |
#              .card-content {
#                padding: 5px 15px;
#                margin: 0px;
#              }
#            entities:
#              - entity: input_number.fingerprint_learning_id
#                name: 'ID'
#                show_icon: false

          - type: horizontal-stack
            cards:
            - type: button
              name: Learn Print
              show_state: false
              show_icon: false
              tap_action:
                action: call-service
                service: script.fingerprint_learning_mode
            - type: glance
              show_name: false
              show_icon: false
              entities:
                - entity: input_number.fingerprint_learning_id
            - type: button
              name: Delete Print
              show_state: false
              show_icon: false
              tap_action:
                action: call-service
                service: script.fingerprint_delete_mode

      - type: picture-glance
        title: Deebot T8 Vacuum
        entities: []
        image_entity: image.deebot_t8_map

  - title: Debugging
    icon: mdi:format-list-bulleted-square
    path: debugging
    cards:
      - type: entities
        card_mod:
          style: |
            ha-card #states {
              margin-bottom: -5px !important;
              padding-top: 1px !important;
              padding-bottom: 7px;
            }
        entities:
#            - entity: binary_sensor.front_gate_sensor_zw
#              name: Front Gatef
#              icon: mdi:gate
          - entity: sensor.david_ln_sensors_illuminance
            type: custom:multiple-entity-row
            name: Weatherflow Brightness
            state_color: true
            toggle: false
            show_state: true
          - entity: sensor.outside_brightness_10m_average
            type: custom:multiple-entity-row
            name: WF Brightness Avg 10m
            state_color: true
            toggle: false
            show_state: true

      - type: custom:auto-entities
        show_empty: true
        filter:
          include:
            - entity_id: 'sensor.var_*'
        sort:
          method: name
          ignore_case: true
        card:
          type: entities
          title: Variable Values
          show_header_toggle: false


      - type: custom:auto-entities
        show_empty: true
        filter:
          include:
            - domain: input_datetime
          exclude:
            - state: 'on'
        sort:
          method: name
          ignore_case: true
        card:
          type: entities
          title: Input DateTime
          show_state: true
          show_header_toggle: false

      - type: custom:auto-entities
        show_empty: true
        filter:
          include:
            - domain: input_select
          exclude:
            - state: 'on'
        sort:
          method: name
          ignore_case: true
        card:
          type: entities
          title: Input Select
          show_state: true
          show_header_toggle: false

      - type: custom:auto-entities
        show_empty: true
        filter:
          include:
            - domain: input_text
          exclude:
            - state: 'on'
        sort:
          method: name
          ignore_case: true
        card:
          type: entities
          title: Input Text
          show_state: true
          show_header_toggle: false

      - type: custom:auto-entities
        show_empty: true
        filter:
          include:
            - domain: automation
          exclude:
            - attributes:
                current: "= 0"
        sort:
          method: name
          ignore_case: true
        card:
          type: entities
          title: Running Automations
          show_header_toggle: false

      - type: custom:auto-entities
        show_empty: true
        filter:
          include:
            - domain: timer
          exclude:
            - state: 'idle'
        sort:
          method: name
          ignore_case: true
        card:
          type: entities
          title: Running Timers
          show_header_toggle: false

      - type: custom:auto-entities
        show_empty: true
        filter:
          include:
            - domain: script
          exclude:
            - state: 'off'
        sort:
          method: name
          ignore_case: true
        card:
          type: entities
          title: Running Scripts
          show_header_toggle: true

      - type: custom:auto-entities
        show_empty: true
        filter:
          include:
            - domain: input_boolean
        sort:
          method: name
          ignore_case: true
        card:
          type: entities
          title: Input Boolean
          show_state: true
          show_header_toggle: false

      - type: custom:auto-entities
        show_empty: true
        filter:
          include:
            - domain: input_number
          exclude:
            - state: 'on'
        sort:
          method: name
          ignore_case: true
        card:
          type: entities
          title: Input Numbers
          show_state: true
          show_header_toggle: false

      - type: custom:auto-entities
        show_empty: true
        filter:
          include:
            - domain: alert
          exclude:
            - state: 'idle'
        sort:
          method: name
          ignore_case: true
        card:
          type: entities
          title: Active Alerts
          show_header_toggle: false

      - type: custom:auto-entities
        filter:
          include:
            - domain: group
          exclude:
            - state: 'off'
            - state: 'unknown'
        card:
          filter:
            include:
              - domain: group
                options:
                  type: custom:fold-entity-row
          type: entities
          show_header_toggle: false
          title: Groups

#      - type: custom:auto-entities
#        show_empty: true
#        filter:
#          include:
#            - domain: automation
#          exclude:
#            - state: 'on'
#        sort:
#          method: name
#          ignore_case: true
#        card:
#          type: entities
#          title: Disabled Automations
#          show_header_toggle: false

  - title: Chores
    icon: mdi:broom
    path: chores
    panel: true
    #columns: 3
    cards:
    - type: horizontal-stack
      cards:
## START OF INFO STACK on CHORES VIEW
      - type: vertical-stack
        cards:
        - type: custom:mushroom-title-card
          title: '{{ states(''sensor.pretty_time'') }} {% set months = ["Jan", "Feb", "March", "April", "May", "June", "July", "Aug", "Sept", "Oct", "Nov", "Dec"] %}
          {% set days = ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"]  %}
          {{ days[now().weekday()] + ", " + months[now().month-1]  + " " + now().day | string }}'
          subtitle: ''
          alignment: center

        ## Chores Weather Forecast Card
        - type: custom:stack-in-card
          mode: vertical
          cards:
          - type: weather-forecast
            entity: weather.forecast_david_ln
            name: "Colleyville, TX"
            show_forecast: false
            card_mod:
              style: |
                ha-card {
                  padding: 5px 10px 0px !important;
                }
#                .header {
#                  padding-top: 1px !important;
#                }
#                .content {
#                  padding-bottom: 12px !important;
#                }

          ## Weather Current Day Values
#          - type: glance
#            columns: 4
#            show_icon: false
#            show_name: false
#            card_mod:
#              style: |
#                ha-card {
#                  margin-top: -30px !important;
#                  margin-bottom: -5px !important;
#                }
#            entities:
#              - entity: sensor.wind_speed_average
#              - entity: sensor.m99_weather_wind_dir_0d
#              - entity: sensor.m99_weather_precipitation_0d
#              - entity: sensor.weatherflow_outside_feels_like



### PEOPLE / ALARM CARD ###
## PEOPLE STATES ##



  ## PEOPLE ICONS ##
        #  - type: glance
        - type: custom:vertical-stack-in-card
          cards:
            - type: horizontal-stack
              cards:
                - type: custom:mushroom-template-card
                  primary: '{{ states(''sensor.google_maps_mark'') }}'
                  secondary: '{{ states(''sensor.battery_mark_phone'') }}%'
                  icon: ''
                  layout: vertical
                  entity: sensor.battery_mark_phone
                  picture: /local/custom_icons/Mark.jpg
                  tap_action:
                    action: more-info
                - type: custom:mushroom-template-card
                  primary: '{{ states(''sensor.google_maps_amber'') }}'
                  secondary: '{{ states(''sensor.battery_amber_phone'') }}%'
                  icon: ''
                  layout: vertical
                  entity: sensor.battery_amber_phone
                  picture: /local/custom_icons/Amber.jpg
                  tap_action:
                    action: more-info
                - type: custom:mushroom-template-card
                  primary: '{{ states(''sensor.google_maps_aubrey'') }}'
                  secondary: '{{ states(''sensor.battery_aubrey_iphone'') }}%'
                  icon: ''
                  layout: vertical
                  entity: sensor.battery_aubrey_iphone
                  picture: /local/custom_icons/Aubrey2.jpg
                  tap_action:
                    action: more-info
                - type: custom:mushroom-template-card
                  primary: '{{ states(''sensor.google_maps_jonas'') }}'
                  secondary: '{{ states(''sensor.battery_jonas_phone'') }}%'
                  icon: ''
                  layout: vertical
                  entity: sensor.battery_jonas_phone
                  picture: /local/custom_icons/Jonas2.jpg
                  tap_action:
                    action: more-info
                - type: custom:mushroom-template-card
                  primary: >
                    {% if is_state('alarm_control_panel.home', 'armed_away') %}
                      away
                    {% elif is_state('alarm_control_panel.home', 'armed_home') %}
                      stay
                    {% else %}
                      disarmed
                    {% endif %}
                  secondary: ''
                  icon: ''
                  layout: vertical
                  entity: alarm_control_panel.home
                  picture: >
                    {% if is_state('alarm_control_panel.home', 'armed_away') %}
                      /local/custom_icons/shield-home-away.png
                    {% elif is_state('alarm_control_panel.home', 'armed_home') %}
                      /local/custom_icons/shield-home-yellow-FFC107.png
                    {% else %}
                      /local/custom_icons/shield-home-blue-44739E.png
                    {% endif %}
                  tap_action:
                    action: more-info

#            - type: markdown
#              card_mod:
#                style: |
#                  .no-header {
#                    margin-top: -15px;
#                    margin-bottom: -8px;
#                    text-align: center;
#                    color: #9c9c9c;
#                    font-size: 14x;
#                  }
#                  ha-card {
#                    box-shadow: none;
#                    padding-bottom: 0px;
#                  }
#              content: '<ha-icon icon="mdi:alarm-multiple"></ha-icon>&nbsp;&nbsp;&nbsp;  Aubrey: {{ states(''sensor.google_alarms_aubrey_tomorrow'') }}&nbsp;&nbsp;&nbsp;  Jonas: {{ states(''sensor.google_alarms_jonas_tomorrow'') }}'

#        - type: conditional
#          conditions:
#            - entity: sensor.kitchen_timer_1
#              state: 'active'
#          card:
#            type: entities
#            card_mod:
#              style: |
#                ha-card #states {
#                  margin-bottom: -5px !important;
#                  padding-top: 1px !important;
#                  padding-bottom: 7px;
#                }
#            entities:
#              - entity: sensor.kitchen_timer_1
#                type: custom:timer-bar-card
#                #bar_width: 30%
#                sbar_height: 12px
#                state_color: true
#                bar_background: '#464646'

#        - type: conditional
#          conditions:
#            - entity: sensor.kitchen_timer_2
#              state: 'active'
#          card:
#            type: entities
#            card_mod:
#              style: |
#                ha-card #states {
#                  margin-bottom: -5px !important;
#                  padding-top: 1px !important;
#                  padding-bottom: 7px;
#                }
#            entities:
#              - entity: sensor.kitchen_timer_2
#                type: custom:timer-bar-card

#        - type: conditional
#          conditions:
#            - entity: sensor.kitchen_timer_3
#              state: 'active'
#          card:
#            type: entities
#            card_mod:
#              style: |
#                ha-card #states {
#                  margin-bottom: -5px !important;
#                  padding-top: 1px !important;
#                  padding-bottom: 7px;
#                }
#            entities:
#              - entity: sensor.kitchen_timer_3
#                type: custom:timer-bar-card

## Updated Flip Timers for Casting
        - type: conditional
          conditions:
            - entity: sensor.kitchen_timer_1
              state: 'active'
          card:
            type: custom:vertical-stack-in-card
            horizontal: true
            cards:
              - type: custom:layout-card
                layout_type: custom:grid-layout
                layout:
                      grid-template-columns: 35% 65%
                      margin: -10px -15px -15px -5px
                      padding: 0px 0px 0px 0px
                      card_margin: 0px
                cards:
                  - type: custom:mushroom-title-card
                    title: "{{ states('sensor.kitchen_timer_1_name') }}"
                    alignment: center
                    subtitle: "{{ state_attr('sensor.kitchen_timer_1','duration_trunc') }}"
#                    card_mod:
#                      style: |
#                        ha-card { margin-top: 5px; }
                  - type: custom:flipdown-timer-card
                    entity: input_datetime.kitchen_timer_1
                    show_hour: auto
                    show_title: false
                    styles:
                      rotor:
                        width: 38px
                        height: 60px
                        fontsize: 4rem
                      button:
                        location: hide

        - type: conditional
          conditions:
            - entity: sensor.kitchen_timer_2
              state: 'active'
          card:
            type: custom:vertical-stack-in-card
            horizontal: true
            cards:
              - type: custom:layout-card
                layout_type: custom:grid-layout
                layout:
                      grid-template-columns: 35% 65%
                      margin: -10px -15px -15px -5px
                      padding: 0px 0px 0px 0px
                      card_margin: 0px
                cards:
                  - type: custom:mushroom-title-card
                    title: "{{ states('sensor.kitchen_timer_2_name') }}"
                    alignment: center
                    subtitle: "{{ state_attr('sensor.kitchen_timer_2','duration_trunc') }}"
#                    card_mod:
#                      style: |
#                        ha-card { margin-top: 5px; }
                  - type: custom:flipdown-timer-card
                    entity: input_datetime.kitchen_timer_2
                    show_hour: auto
                    show_title: false
                    styles:
                      rotor:
                        width: 38px
                        height: 60px
                        fontsize: 4rem
                      button:
                        location: hide

        - type: conditional
          conditions:
            - entity: sensor.kitchen_timer_3
              state: 'active'
          card:
            type: custom:vertical-stack-in-card
            horizontal: true
            cards:
              - type: custom:layout-card
                layout_type: custom:grid-layout
                layout:
                      grid-template-columns: 35% 65%
                      margin: -10px -15px -15px -5px
                      padding: 0px 0px 0px 0px
                      card_margin: 0px
                cards:
                  - type: custom:mushroom-title-card
                    title: "{{ states('sensor.kitchen_timer_3_name') }}"
                    alignment: center
                    subtitle: "{{ state_attr('sensor.kitchen_timer_3','duration_trunc') }}"
#                    card_mod:
#                      style: |
#                        ha-card { margin-top: 5px; }
                  - type: custom:flipdown-timer-card
                    entity: input_datetime.kitchen_timer_3
                    show_hour: auto
                    show_title: false
                    styles:
                      rotor:
                        width: 38px
                        height: 60px
                        fontsize: 4rem
                      button:
                        location: hide


        - type: conditional
          conditions:
            - entity: media_player.chromecast_upstairs
              state: 'playing'
          card:
            type: custom:mini-media-player
            card_mod:
              style: |
                ha-card {
                  margin-top: 0px;
                }
                .mmp-player {
                  padding: 12px !important;
                }
            entity: media_player.chromecast_upstairs
            artwork: cover

        - type: conditional
          conditions:
            - entity: binary_sensor.front_gate_sensor_zw
              state: "on"
          card:
            type: entities
            card_mod:
              style: |
                ha-card #states {
                  margin-bottom: -5px !important;
                  padding-top: 1px !important;
                  padding-bottom: 7px;
                }
            entities:
  #            - entity: binary_sensor.front_gate_sensor_zw
  #              name: Front Gatef
  #              icon: mdi:gate
                - entity: switch.front_drive_gate
                  type: custom:multiple-entity-row
                  name: Front Gate
                  state_color: true
                  toggle: false
                  show_state: false
                  entities:
                    - entity: switch.front_drive_gate
                      toggle: true
                      name: false
                      tap_action:
                        action: call-service
                        service: script.turn_on
                        service_data:
                          entity_id: script.front_gate_close
                    - entity: sensor.front_gate_last_open
                      name: Duration


        - type: conditional
          conditions:
            - entity: binary_sensor.front_gate_sensor_zw
              state: "off"
          card:
            type: entities
            card_mod:
              style: |
                ha-card #states {
                  margin-bottom: -5px !important;
                  padding-top: 1px !important;
                  padding-bottom: 0px;
                }
            entities:
  #            - entity: binary_sensor.front_gate_sensor_zw
  #              name: Front Gatef
  #              icon: mdi:gate
              - entity: switch.front_drive_gate
                type: custom:multiple-entity-row
                name: Front Gate
                state_color: true
                toggle: false
                show_state: false
                entities:
                  - entity: switch.front_drive_gate
                    toggle: true
                    name: false
                    tap_action:
                      action: call-service
                      service: script.turn_on
                      service_data:
                        entity_id: script.front_gate_open
                  - entity: sensor.front_gate_last_close
                    name: Closed

        - type: conditional
          conditions:
            - entity: cover.garage_door_west_zw
              state: 'open'
          card:
            type: entities
            card_mod:
              style: |
                ha-card #states {
                  margin-bottom: -5px !important;
                  padding-top: 1px !important;
                  padding-bottom: 9px;
                }
            entities:
              - entity: switch.garage_door_west
                type: custom:multiple-entity-row
                name: Amber Garage
                state_color: true
                toggle: false
                show_state: false
                entities:
                  - entity: switch.garage_door_west
                    toggle: true
                    name: false
                  - entity: sensor.garage_door_main_last_changed
                    name: Duration

        - type: conditional
          conditions:
            - entity: cover.garage_door_east_zw
              state: 'open'
          card:
            type: entities
            card_mod:
              style: |
                ha-card #states {
                  margin-bottom: -5px !important;
                  padding-top: 1px !important;
                  padding-bottom: 9px;
                }
            entities:
              - entity: switch.garage_door_east
                type: custom:multiple-entity-row
                name: Mark Garage
                state_color: true
                toggle: false
                show_state: false
                entities:
                  - entity: switch.garage_door_east
                    toggle: true
                    name: false
                  - entity: sensor.garage_door_east_last_changed
                    name: Duration

        - type: conditional
          conditions:
            - entity: switch.outlet_octopi_tm
              state: 'on'
          card:
            type: entities
            card_mod:
              style: |
                ha-card #states {
                  margin-bottom: -5px !important;
                  padding-top: 1px !important;
                  padding-bottom: 9px;
                }
            entities:
              - entity: switch.outlet_octopi_tm
                type: custom:multiple-entity-row
                name: 3D Printer
                state_color: true
                icon: mdi:printer-3d
                show_state: false
                entities:
#                    - entity: sensor.octoprint_start_time
#                      name: Start Time
                  - entity: sensor.octoprint_time_percent_complete
                    name: 'Progress'
                  - entity: sensor.octoprint_time_printing
                    name: 'Duration'
                  - entity: sensor.octoprint_time_remaining
                    name: 'Remain'
                  - entity: sensor.octoprint_time_end_pretty
                    name: 'Done'
#                    - entity: switch.outlet_octopi_tm
#                      toggle: true
#                      name: ' '

        - type: conditional
          conditions:
            - entity: binary_sensor.xbox_360
              state: 'on'
          card:
            type: entities
            card_mod:
              style: |
                ha-card #states {
                  margin-bottom: -5px !important;
                  padding-top: 1px !important;
                  padding-bottom: 9px;
                }
            entities:
              - entity: binary_sensor.xbox_360
                type: custom:multiple-entity-row
                name: XBox 360
                state_color: true
                icon: mdi:microsoft-xbox
                show_state: false
                entities:
                  - entity: sensor.xbox_360_last_on
                    name: Duration

        - type: conditional
          conditions:
            - entity: binary_sensor.xbox_one_s
              state: 'on'
          card:
            type: entities
            card_mod:
              style: |
                ha-card #states {
                  margin-bottom: -5px !important;
                  padding-top: 1px !important;
                  padding-bottom: 9px;
                }
            entities:
              - entity: binary_sensor.xbox_one_s
                type: custom:multiple-entity-row
                name: XBox One S
                state_color: true
                icon: mdi:microsoft-xbox
                show_state: false
                entities:
                  - entity: sensor.xbox_one_s_last_on
                    name: Duration

        - type: conditional
          conditions:
            - entity: binary_sensor.ping_xbox_series_x
              state: 'onn'
          card:
            type: entities
            card_mod:
              style: |
                ha-card #states {
                  margin-bottom: -5px !important;
                  padding-top: 1px !important;
                  padding-bottom: 9px;
                }
            entities:
              - entity: binary_sensor.ping_xbox_series_x
                type: custom:multiple-entity-row
                name: XBox Series X
                state_color: true
                icon: mdi:microsoft-xbox
                show_state: false
                entities:
                  - entity: fan.game_room_downstairs
                    attribute: percentage
                    name: Fan Speed
                    unit: '%'
                  - entity: sensor.xbox_series_x_last_on
                    name: Duration

        - type: conditional
          conditions:
            - entity: media_player.kitchen_google
              state: 'off'
          card:
            type: entities
            card_mod:
              style: |
                ha-card #states {
                  margin-bottom: -5px !important;
                  padding-top: 1px !important;
                  padding-bottom: 9px;
                }
            entities:
              - entity: binary_sensor.ping_xbox_series_x
                type: custom:multiple-entity-row
                name: Kitchen Google
                state_color: true
                icon: mdi:cast-off
                show_state: false
                entities:
                  - entity: sensor.xbox_series_x_last_on
                    name: Duration


        - type: conditional
          conditions:
            - entity: switch.adguard_home_protection
              state: 'off'
          card:
            type: entities
            card_mod:
              style: |
                ha-card #states {
                  margin-bottom: -5px !important;
                  padding-top: 1px !important;
                  padding-bottom: 9px;
                }
            entities:
              - entity: switch.adguard_home_protection
                type: custom:multiple-entity-row
                name: AdGuard Protection
                state_color: true
                show_state: false
                entities:
                  - entity: switch.adguard_home_protection
                    toggle: true
                    name: false
                  - entity: sensor.adguard_last_off
                    name: Duration

#        - type: conditional
#          conditions:
#            - entity: timer.school_bus
#              state_not: 'idle'
#          card:
#            type: markdown
#            card_mod:
#              style: |
#                .no-header {
#                  padding-top: 12px !important;
#                  padding-bottom: 8px !important;
#                  text-align: center;
#                  color: #FFF;
#                  font-size: 30px;
#                }
#                ha-card {
#                  box-shadow: none;
#                }
#            content: 'Bus {{ states(''sensor.school_bus_timer_remain'') }}'

        - type: conditional
          conditions:
            - entity: timer.school_bus
              state_not: 'idle'
          card:
            type: custom:vertical-stack-in-card
            horizontal: true
            cards:
              - type: custom:layout-card
                layout_type: custom:grid-layout
                layout:
                      grid-template-columns: 35% 65%
                      margin: -10px -15px -15px -5px
                      padding: 0px 0px 0px 0px
                      card_margin: 0px
                cards:
                  - type: custom:mushroom-title-card
                    title: "Leave In"
                    alignment: center
                    subtitle: "10:00"
#                    card_mod:
#                      style: |
#                        ha-card { margin-top: 5px; }
                  - type: custom:flipdown-timer-card
                    entity: timer.school_bus
                    show_hour: auto
                    show_title: false
                    styles:
                      rotor:
                        width: 38px
                        height: 60px
                        fontsize: 4rem
                      button:
                        location: hide

        # PLACEHOLDER / SPACER ONLY



  ## START of JONAS CHORES VERTICAL-STACK
      - type: vertical-stack
        cards:
        - type: custom:mushroom-title-card
          title: >-
            {% set undone = expand('group.chores_jonas') | selectattr('state','eq','on') |
            list | count | int %}
            {% if undone == 0 %} Jonas Chores 🎉
            {% else %} Jonas Chores ({{ undone }} more)
            {% endif %}
          subtitle: ''
          alignment: center
          title_tap_action:
            action: call-service
            service: script.complete_jonas_chores
            target: {}

        ## JONAS TAKE OUT CANS
        - type: conditional
          conditions:
            - entity: sensor.date_dayoftheweek
              state_not: 'Monday'
            - entity: sensor.date_dayoftheweek
              state_not: 'Wednesday'
            - entity: sensor.date_dayoftheweek
              state_not: 'Thursday'
            - entity: sensor.date_dayoftheweek
              state_not: 'Saturday'
            - entity: sensor.date_dayoftheweek
              state_not: 'Sunday'
            - entity: binary_sensor.before_noon
              state: 'on'
          card:
            type: entities
            card_mod:
              style: |
                ha-card #states {
                  margin-bottom: 10px !important;
                  padding-top: 10px !important;
                  padding-bottom: 0px;
                  font-size: 16px;
                }
            entities:
              - entity: input_boolean.chore_jonas_cans_out
                type: custom:multiple-entity-row
                name: Trash/Recycle Can(s) Out
                state_color: true
                toggle: true
        ## JONAS BRING IN CANS
        - type: conditional
          conditions:
            - entity: sensor.date_dayoftheweek
              state_not: 'Monday'
            - entity: sensor.date_dayoftheweek
              state_not: 'Wednesday'
            - entity: sensor.date_dayoftheweek
              state_not: 'Thursday'
            - entity: sensor.date_dayoftheweek
              state_not: 'Saturday'
            - entity: sensor.date_dayoftheweek
              state_not: 'Sunday'
            - entity: binary_sensor.before_noon
              state: 'off'
          card:
            type: entities
            card_mod:
              style: |
                ha-card #states {
                  margin-bottom: 10px !important;
                  padding-top: 10px !important;
                  padding-bottom: 0px;
                  font-size: 16px;
                }
            entities:
              - entity: input_boolean.chore_jonas_cans_in
                type: custom:multiple-entity-row
                name: Trash / Recycle Can(s) In
                state_color: true
                toggle: true
        ## JONAS BRING IN MAIL
        - type: conditional
          conditions:
            - entity: sensor.date_dayoftheweek
              state_not: 'Sunday'
            - entity: binary_sensor.before_noon
              state: 'off'
          card:
            type: entities
            card_mod:
              style: |
                ha-card #states {
                  margin-bottom: 10px !important;
                  padding-top: 10px !important;
                  padding-bottom: 0px;
                  font-size: 16px;
                }
            entities:
              - entity: input_boolean.chore_jonas_mail
                type: custom:multiple-entity-row
                name: Bring in Mail
                state_color: true
                toggle: true
        ## JONAS LUNCH
        - type: conditional
          conditions:
            - entity: binary_sensor.date_schoolday
              state: 'on'
            - entity: binary_sensor.before_noon
              state: 'off'
          card:
            type: entities
            card_mod:
              style: |
                ha-card #states {
                  margin-bottom: 10px !important;
                  padding-top: 10px !important;
                  padding-bottom: 0px;
                  font-size: 16px;
                }
            entities:
              - entity: input_boolean.chore_jonas_lunch_away
                type: custom:multiple-entity-row
                name: Unpack Lunch Box
                state_color: true
                toggle: true
        ## JONAS LAUNDRY
        - type: conditional
          conditions:
            - entity: binary_sensor.date_schoolday
              state: 'on'
            - entity: binary_sensor.before_noon
              state: 'off'
            - entity: input_boolean.chore_jonas_school_laundry
              state: 'on'
          card:
            type: entities
            card_mod:
              style: |
                ha-card #states {
                  margin-bottom: 10px !important;
                  padding-top: 10px !important;
                  padding-bottom: 0px;
                  font-size: 16px;
                }
            entities:
              - entity: input_boolean.chore_jonas_school_laundry
                type: custom:multiple-entity-row
                name: Wash Clothes
                state_color: true
                toggle: true
        ## JONAS TAKE OUT RECYCLING
        - type: conditional
          conditions:
            - entity: sensor.date_dayoftheweek
              state_not: 'NULL'
          card:
            type: entities
            card_mod:
              style: |
                ha-card #states {
                  margin-bottom: 10px !important;
                  padding-top: 10px !important;
                  padding-bottom: 0px;
                  font-size: 16px;
                }
            entities:
              - entity: input_boolean.chore_jonas_recycling
                type: custom:multiple-entity-row
                name: Check / Empty Recycling
                state_color: true
                toggle: true
        ## JONAS WORKOUT
        - type: conditional
          conditions:
            - entity: sensor.date_dayoftheweek
              state_not: 'NULL'
          card:
            type: entities
            card_mod:
              style: |
                ha-card #states {
                  margin-bottom: 10px !important;
                  padding-top: 10px !important;
                  padding-bottom: 0px;
                  font-size: 16px;
                }
            entities:
              - entity: input_boolean.chore_jonas_workout
                type: custom:multiple-entity-row
                name: Workout / Pushups
                state_color: true
                toggle: true
        ## JONAS Pickup Room
        - type: conditional
          conditions:
            - entity: sensor.date_dayoftheweek
              state_not: 'NULL'
          card:
            type: entities
            card_mod:
              style: |
                ha-card #states {
                  margin-bottom: 10px !important;
                  padding-top: 10px !important;
                  padding-bottom: 0px;
                  font-size: 16px;
                }
            entities:
              - entity: input_boolean.chore_jonas_pickup_room
                type: custom:multiple-entity-row
                name: Pickup Room
                state_color: true
                toggle: true
        ## JONAS Water Plants
        - type: conditional
          conditions:
            - entity: sensor.date_dayoftheweek
              state: 'onn'
          card:
            type: entities
            card_mod:
              style: |
                ha-card #states {
                  margin-bottom: 10px !important;
                  padding-top: 10px !important;
                  padding-bottom: 0px;
                  font-size: 16px;
                }
            entities:
              - entity: input_boolean.chore_jonas_water_plants
                type: custom:multiple-entity-row
                name: Water Plants AM
                state_color: true
                toggle: true
        ## JONAS Drink Shake
        - type: conditional
          conditions:
            - entity: sensor.date_dayoftheweek
              state_not: 'NULL'
          card:
            type: entities
            card_mod:
              style: |
                ha-card #states {
                  margin-bottom: 10px !important;
                  padding-top: 10px !important;
                  padding-bottom: 0px;
                  font-size: 16px;
                }
            entities:
              - entity: input_boolean.chore_jonas_drink_shake
                type: custom:multiple-entity-row
                name: Drink Shake
                state_color: true
                toggle: true
        ## JONAS Humidifier
        - type: conditional
          conditions:
            - entity: sensor.date_dayoftheweek
              state_not: 'NULL'
            - entity: climate.6900_upstairs
              state: 'heat'
          card:
            type: entities
            card_mod:
              style: |
                ha-card #states {
                  margin-bottom: 10px !important;
                  padding-top: 10px !important;
                  padding-bottom: 0px;
                  font-size: 16px;
                }
            entities:
              - entity: input_boolean.chore_jonas_humidifier
                type: custom:multiple-entity-row
                name: Fill Humidifier
                state_color: true
                toggle: true
        ## JONAS Vitamins AM
        - type: conditional
          conditions:
            - entity: sensor.date_dayoftheweek
              state_not: 'NULL'
            - entity: input_boolean.chore_jonas_vitamins_am
              state: 'on'
          card:
            type: entities
            card_mod:
              style: |
                ha-card #states {
                  margin-bottom: 10px !important;
                  padding-top: 10px !important;
                  padding-bottom: 0px;
                  font-size: 16px;
                }
            entities:
              - entity: input_boolean.chore_jonas_vitamins_am
                type: custom:multiple-entity-row
                name: Take Vitamins AM
                state_color: true
                toggle: true
        ## JONAS Vitamins PM
        - type: conditional
          conditions:
            - entity: sensor.date_dayoftheweek
              state_not: 'NULL'
            - entity: input_boolean.chore_jonas_vitamins_pm
              state: 'on'
          card:
            type: entities
            card_mod:
              style: |
                ha-card #states {
                  margin-bottom: 10px !important;
                  padding-top: 10px !important;
                  padding-bottom: 0px;
                  font-size: 16px;
                }
            entities:
              - entity: input_boolean.chore_jonas_vitamins_pm
                type: custom:multiple-entity-row
                name: Take Vitamins PM
                state_color: true
                toggle: true

        - type: custom:mushroom-title-card
          title: ''
          subtitle: 'Gracie Chores'
          alignment: center
          card_mod:
            style: |
              ha-card {
                --secondary-text-color: #999;
              }

        ## JONAS GRACIE POOP
        - type: conditional
          conditions:
            - entity: sensor.date_dayoftheweek
              state: 'Wednesday'
          card:
            type: entities
            card_mod:
              style: |
                ha-card #states {
                  margin-bottom: 10px !important;
                  padding-top: 10px !important;
                  padding-bottom: 0px;
                  font-size: 16px;
                }
            entities:
              - entity: input_boolean.chore_jonas_gracie_poop
                type: custom:multiple-entity-row
                name: Clean Up Gracie Poop
                state_color: true
                toggle: true
        ## JONAS GRACIE WALK
        - type: conditional
          conditions:
            - entity: input_boolean.chore_jonas_gracie_walk
              state_not: 'NULL'
          card:
            type: entities
            card_mod:
              style: |
                ha-card #states {
                  margin-bottom: 10px !important;
                  padding-top: 10px !important;
                  padding-bottom: 0px;
                  font-size: 16px;
                }
            entities:
              - entity: input_boolean.chore_jonas_gracie_walk
                type: custom:multiple-entity-row
                name: Take Gracie for Walk
                state_color: true
                toggle: true
        ## JONAS GRACIE WATER
        - type: conditional
          conditions:
            - entity: sensor.date_dayoftheweek
              state: 'NULL'
          card:
            type: entities
            card_mod:
              style: |
                ha-card #states {
                  margin-bottom: 10px !important;
                  padding-top: 10px !important;
                  padding-bottom: 0px;
                  font-size: 16px;
                }
            entities:
              - entity: input_boolean.chore_jonas_gracie_water
                type: custom:multiple-entity-row
                name: Refill Gracie Water
                state_color: true
                toggle: true

      ## AUBREY CHORES
      - type: vertical-stack
        cards:
        - type: custom:mushroom-title-card
          title: >-
            {% set undone = expand('group.chores_aubrey') | selectattr('state','eq','on') |
            list | count | int %}
            {% if undone == 0 %} Aubrey Chores 🎉
            {% else %} Aubrey Chores ({{ undone }} more)
            {% endif %}
          subtitle: ''
          alignment: center
          title_tap_action:
            action: call-service
            service: script.complete_aubrey_chores
            target: {}

        ## AUBREY SINK / DISHWASHER
        - type: conditional
          conditions:
            - entity: sensor.date_dayoftheweek
              state_not: 'NULL'
            - entity: input_boolean.chore_aubrey_dishes_sink_am
              state: 'on'
          card:
            type: entities
            card_mod:
              style: |
                ha-card #states {
                  margin-bottom: 10px !important;
                  padding-top: 10px !important;
                  padding-bottom: 0px;
                  font-size: 16px;
                }
            entities:
              - entity: input_boolean.chore_aubrey_dishes_sink_am
                type: custom:multiple-entity-row
                name: Sink / Dishwasher AM
                state_color: true
                toggle: true

        - type: conditional
          conditions:
            - entity: sensor.date_dayoftheweek
              state_not: 'NULL'
          card:
            type: entities
            card_mod:
              style: |
                ha-card #states {
                  margin-bottom: 10px !important;
                  padding-top: 10px !important;
                  padding-bottom: 0px;
                  font-size: 16px;
                }
            entities:
              - entity: input_boolean.chore_aubrey_dishes_sink_pm
                type: custom:multiple-entity-row
                name: Sink / Dishwasher PM
                state_color: true
                toggle: true
        ## AUBREY LUNCH
        - type: conditional
          conditions:
            - entity: binary_sensor.date_schoolday
              state: 'on'
            - entity: binary_sensor.before_noon
              state: 'off'
          card:
            type: entities
            card_mod:
              style: |
                ha-card #states {
                  margin-bottom: 10px !important;
                  padding-top: 10px !important;
                  padding-bottom: 0px;
                  font-size: 16px;
                }
            entities:
              - entity: input_boolean.chore_aubrey_lunch_away
                type: custom:multiple-entity-row
                name: Unpack Lunch Box
                state_color: true
                toggle: true
        ## AUBREY Pickup Room
        - type: conditional
          conditions:
            - entity: sensor.date_dayoftheweek
              state_not: 'NULL'
          card:
            type: entities
            card_mod:
              style: |
                ha-card #states {
                  margin-bottom: 10px !important;
                  padding-top: 10px !important;
                  padding-bottom: 0px;
                  font-size: 16px;
                }
            entities:
              - entity: input_boolean.chore_aubrey_pickup_room
                type: custom:multiple-entity-row
                name: Pickup Room
                state_color: true
                toggle: true

        ## AUBREY Humidifier
        - type: conditional
          conditions:
            - entity: sensor.date_dayoftheweek
              state_not: 'NULL'
            - entity: climate.6900_upstairs
              state: 'heat'
          card:
            type: entities
            card_mod:
              style: |
                ha-card #states {
                  margin-bottom: 10px !important;
                  padding-top: 10px !important;
                  padding-bottom: 0px;
                  font-size: 16px;
                }
            entities:
              - entity: input_boolean.chore_aubrey_humidifier
                type: custom:multiple-entity-row
                name: Fill Humidifier
                state_color: true
                toggle: true

        ## AUBREY Water Palm
        - type: conditional
          conditions:
            - entity: sensor.date_dayoftheweek
              state_not: 'NULL'
            - entity: input_boolean.chore_aubrey_water_palm
              state: 'on'
          card:
            type: entities
            card_mod:
              style: |
                ha-card #states {
                  margin-bottom: 10px !important;
                  padding-top: 10px !important;
                  padding-bottom: 0px;
                  font-size: 16px;
                }
            entities:
              - entity: input_boolean.chore_aubrey_water_palm
                type: custom:multiple-entity-row
                name: Water Palm Tree
                state_color: true
                toggle: true

        ## AUBREY Water sago
        - type: conditional
          conditions:
            - entity: sensor.date_dayoftheweek
              state_not: 'NULL'
            - entity: input_boolean.chore_aubrey_water_sago
              state: 'on'
          card:
            type: entities
            card_mod:
              style: |
                ha-card #states {
                  margin-bottom: 10px !important;
                  padding-top: 10px !important;
                  padding-bottom: 0px;
                  font-size: 16px;
                }
            entities:
              - entity: input_boolean.chore_aubrey_water_sago
                type: custom:multiple-entity-row
                name: Water sago
                state_color: true
                toggle: true
        ## AUBREY Water Poinsettia
        - type: conditional
          conditions:
            - entity: sensor.date_dayoftheweek
              state_not: 'NULL'
            - entity: input_boolean.chore_aubrey_water_poinsettia
              state: 'on'
          card:
            type: entities
            card_mod:
              style: |
                ha-card #states {
                  margin-bottom: 10px !important;
                  padding-top: 10px !important;
                  padding-bottom: 0px;
                  font-size: 16px;
                }
            entities:
              - entity: input_boolean.chore_aubrey_water_poinsettia
                type: custom:multiple-entity-row
                name: Water sago
                state_color: true
                toggle: true
        ## AUBREY Water Succulent
        - type: conditional
          conditions:
            - entity: sensor.date_dayoftheweek
              state_not: 'NULL'
            - entity: input_boolean.chore_aubrey_water_succulent
              state: 'on'
          card:
            type: entities
            card_mod:
              style: |
                ha-card #states {
                  margin-bottom: 10px !important;
                  padding-top: 10px !important;
                  padding-bottom: 0px;
                  font-size: 16px;
                }
            entities:
              - entity: input_boolean.chore_aubrey_water_succulent
                type: custom:multiple-entity-row
                name: Water Succulent
                state_color: true
                toggle: true

        ## AUBREY Water Plants
        - type: conditional
          conditions:
            - entity: input_boolean.chore_aubrey_water_plants
              state: 'onn'
          card:
            type: custom:mod-card
            card:
      ## TEST PLANT CARD ##
              type: horizontal-stack
              cards:
              - type: custom:mushroom-template-card
                primary: '  {{ states(''sensor.miflora_2_moisture'') }} %'
                secondary: Palm Tree
                icon: mdi:palm-tree
                card_mod:
                  style: |
                    .type-custom-mushroom-template-card {
                      padding: 9px 6px 9px 13px;
                    }
                    ha-card {
                      --card-primary-font-weight: normal;
                      --card-primary-font-size: 16px;
                      --card-secondary-font-weight: normal;
                    }
                icon_color: |-
                  {% set moist = states('sensor.miflora_2_moisture') | int(0) %}
                  {% if moist > 60 %} #f79a29
                  {% elif moist > 50 %} #41b552
                  {% elif moist > 25 %} #25952d
                  {% elif moist > 15 %} #41b552
                  {% else %} #F79a29
                  {% endif %}
                entity: sensor.miflora_2_moisture
                tap_action:
                  action: more-info
              - type: custom:mushroom-template-card
                primary: '  {{ states(''sensor.miflora_1_moisture'') }} %'
                secondary: Succulents
                icon: mdi:spa-outline
                card_mod:
                  style: |
                    .type-custom-mushroom-template-card {
                      padding: 9px 6px 9px 13px;
                    }
                    ha-card {
                      --card-primary-font-weight: normal;
                      --card-primary-font-size: 16px;
                      --card-secondary-font-weight: normal;
                    }
                icon_color: |-
                  {% set moist = states('sensor.miflora_1_moisture') | int(0) %}
                  {% if moist > 60 %} #f79a29
                  {% elif moist > 50 %} #41b552
                  {% elif moist > 25 %} #25952d
                  {% elif moist > 15 %} #41b552
                  {% else %} #F79a29
                  {% endif %}
                entity: sensor.miflora_1_moisture
                tap_action:
                  action: more-info
      ## END PLANT CARD ##

        - type: custom:mushroom-title-card
          title: ''
          subtitle: 'Gracie Chores'
          alignment: center
          card_mod:
            style: |
              ha-card {
                --secondary-text-color: #999;
              }

        ## AUBREY GRACIE FOOD
        - type: conditional
          conditions:
            - entity: sensor.date_dayoftheweek
              state_not: 'NULL'
          card:
            type: entities
            card_mod:
              style: |
                ha-card #states {
                  margin-bottom: 10px !important;
                  padding-top: 10px !important;
                  padding-bottom: 0px;
                  font-size: 16px;
                }
            entities:
              - entity: input_boolean.chore_aubrey_gracie_food
                type: custom:multiple-entity-row
                name: Gracie Food
                state_color: true
                toggle: true
        ## AUBREY GRACIE WATER
        - type: conditional
          conditions:
            - entity: input_boolean.chore_aubrey_gracie_water
              state: 'on'
          card:
            type: entities
            card_mod:
              style: |
                ha-card #states {
                  margin-bottom: 10px !important;
                  padding-top: 10px !important;
                  padding-bottom: 0px;
                  font-size: 16px;
                }
            entities:
              - entity: input_boolean.chore_aubrey_gracie_water
                type: custom:multiple-entity-row
                name: Wash Gracie Water
                state_color: true
                toggle: true
        ## AUBREY GRACIE BRUSH
        - type: conditional
          conditions:
            - entity: binary_sensor.date_weekday
              state_not: 'NULL'
          card:
            type: entities
            card_mod:
              style: |
                ha-card #states {
                  margin-bottom: 10px !important;
                  padding-top: 10px !important;
                  padding-bottom: 0px;
                  font-size: 16px;
                }
            entities:
              - entity: input_boolean.chore_aubrey_gracie_brush
                type: custom:multiple-entity-row
                name: Brush Gracie
                state_color: true
                toggle: true
        ## AUBREY GRACIE WALK
        - type: conditional
          conditions:
            - entity: input_boolean.chore_aubrey_gracie_walk
              state: 'on'
          card:
            type: entities
            card_mod:
              style: |
                ha-card #states {
                  margin-bottom: 10px !important;
                  padding-top: 10px !important;
                  padding-bottom: 0px;
                  font-size: 16px;
                }
            entities:
              - entity: input_boolean.chore_aubrey_gracie_walk
                type: custom:multiple-entity-row
                name: Take Gracie for Walk
                state_color: true
                toggle: true

  - title: Google Keep Lists
    icon: mdi:clipboard-list-outline
    path: google-keep-lists
    columns: 2
    cards:
    - type: todo-list
      card_mod:
        style: |
          ha-list {
            margin-top: -25px !important;
          }
          ha-card.type-todo-list div.header {
            display: none;
          }
          ha-check-list-item {
            min-height: 28px !important;
          }
          .divider {
            display: none;
          }
      entity: todo.google_keep_grocery
      title: Grocery List
      hide_completed: true
    #  hide_create: true
    - type: todo-list
      card_mod:
        style: |
          ha-list {
            margin-top: -25px !important;
          }
          ha-card.type-todo-list div.header {
            display: none;
          }
          ha-check-list-item {
            min-height: 28px !important;
          }
          .divider {
            display: none;
          }
      entity: todo.google_keep_bulk
      title: Bulk List
      hide_completed: true
      hide_create: true

  - title: Loading
    icon: mdi:dots-horizontal
    path: chores-loading
    panel: true
    #columns: 3
    cards:
    - type: markdown
      content: |
        # <br/><br/><br/><br/><br/><br/><br/><br/><br/><center> Loading... </center> <br/><br/><br/><br/><br/><br/><br/><br/><br/>
